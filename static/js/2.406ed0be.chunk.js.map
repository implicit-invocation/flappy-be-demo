{"version":3,"sources":["../node_modules/@babel/runtime/regenerator/index.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/gdxjs/lib/loadTexture.js","../node_modules/klasse/index.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/kami-texture2/index.js","../node_modules/kami-util/index.js","../node_modules/number-util/index.js","../node_modules/fbemitter/index.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/gdxjs/lib/createAnimation.js","../node_modules/fbemitter/lib/EmitterSubscription.js","../node_modules/fbjs/lib/invariant.js","../node_modules/kami-mesh-buffer/index.js","../node_modules/gdxjs/lib/createBatch.js","../node_modules/kami-batch2/index.js","../node_modules/gdxjs/lib/InputHandler.js","../node_modules/gdxjs/lib/TextureRegion.js","../node_modules/gl-matrix/esm/common.js","../node_modules/gl-matrix/esm/mat4.js","../node_modules/gdxjs/lib/mathUtils.js","../node_modules/gdxjs/lib/orthoCamera.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/fbemitter/lib/BaseEventEmitter.js","../node_modules/fbemitter/lib/EventSubscription.js","../node_modules/fbemitter/lib/EventSubscriptionVendor.js","../node_modules/fbjs/lib/emptyFunction.js","../node_modules/kami-util/wrapper.js","../node_modules/kami-shader/index.js","../node_modules/webgl-compile-shader/index.js","../node_modules/webgl-context/index.js","../node_modules/kami-base-batch/index.js","../node_modules/kami-base-batch/mixins.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/common.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/mat2.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/mat2d.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/mat3.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/mat4.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/vec3.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/vec4.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/quat.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/quat2.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix/vec2.js","../node_modules/kami-batch2/node_modules/gl-matrix/lib/gl-matrix.js"],"names":["module","exports","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","gl","url","options","Promise","resolve","image","Image","src","onload","texture","Texture","setFilter","Filter","LINEAR","getProperty","definition","k","isClassDescriptor","def","getOwnPropertyDescriptor","get","set","hasGetterOrSetter","hasNonConfigurable","prop","extend","ctor","hasOwnProperty","prototype","Class","ignoreFinals","Error","mixin","myClass","mixins","Array","isArray","i","length","initialize","Extends","base","apply","this","arguments","create","constructor","Mixins","_slicedToArray","arr","Symbol","iterator","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","TypeError","require","isPowerOfTwo","nextPowerOfTwo","BaseObject","context","managedArgs","id","target","TEXTURE_2D","width","height","__shape","wrapS","DEFAULT_WRAP","wrapT","minFilter","DEFAULT_FILTER","magFilter","addManagedObject","setup","img","path","crossOrigin","successCB","onLoad","failCB","onError","genMipmaps","self","USE_DUMMY_1x1_DATA","uploadData","ev","uploadImage","onerror","generateMipmap","onabort","format","dataType","data","createTexture","bind","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_PREMULTIPLY_ALPHA","UNPACK_ALIGNMENT","UNPACK_FLIP_Y_WEBGL","UNPACK_FLIP_Y","colorspace","UNPACK_COLORSPACE_CONVERSION","BROWSER_DEFAULT_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","setWrap","destroy","deleteTexture","removeManagedObject","s","t","ignoreBind","_checkPOT","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","min","mag","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","type","RGBA","UNSIGNED_BYTE","texImage2D","domObject","uploadSubImage","FORCE_POT","wrongFilter","NEAREST","wrongWrap","Wrap","CLAMP_TO_EDGE","unit","activeTexture","TEXTURE0","bindTexture","shape","NEAREST_MIPMAP_LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","MIRRORED_REPEAT","REPEAT","Format","DEPTH_COMPONENT","ALPHA","RGB","LUMINANCE","LUMINANCE_ALPHA","DataType","BYTE","SHORT","INT","FLOAT","UNSIGNED_INT","UNSIGNED_SHORT","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","getNumComponents","GLContextWrapper","wrapContext","rawgl","window","WebGLRenderingContext","int8","Int8Array","int32","Int32Array","buffer","float32","Float32Array","NumberUtil","intBitsToFloat","floatToIntBits","f","intToFloatColor","colorToFloat","r","g","b","a","n","fbemitter","EventEmitter","EmitterSubscription","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","PlayMode","NORMAL","LOOP","LOOP_PINGPONG","REVERSED","LOOP_REVERSED","frameDuration","keyFrames","getKeyFrame","stateTime","mode","frameNumber","Math","floor","max","_EventSubscription","subscriber","listener","subClass","superClass","setPrototypeOf","__proto__","_inherits","validateFormat","condition","c","d","e","error","args","argIndex","replace","name","framesToPop","Mesh","dirty","val","verticesDirty","indicesDirty","isStatic","numVerts","numIndices","vertexAttribs","vertices","indices","vertexBuffer","indexBuffer","indexUsage","vertexUsage","_vertexAttribs","vertexStride","STATIC_DRAW","DYNAMIC_DRAW","totalNumComponents","offsetCount","Uint16Array","createBuffer","deleteBuffer","_updateBuffers","subDataLength","bindBuffer","ELEMENT_ARRAY_BUFFER","bufferData","ARRAY_BUFFER","view","subarray","bufferSubData","draw","primitiveType","count","offset","drawElements","drawArrays","shader","stride","loc","location","getAttributeLocation","enableVertexAttribArray","vertexAttribPointer","numComponents","normalize","unbind","disableVertexAttribArray","Attrib","Boolean","createBatch","ShaderProgram","BaseBatch","mat4","SpriteBatch","projection","resize","setProjection","getVertexSize","VERTEX_SIZE","_createVertexAttributes","POSITION_ATTRIBUTE","COLOR_ATTRIBUTE","TEXCOORD_ATTRIBUTE","drawing","x","oldX","y","oldY","flush","updateMatrices","_createShader","DEFAULT_VERT_SHADER","DEFAULT_FRAG_SHADER","log","console","warn","setUniformMatrix4","_preRender","begin","setUniformi","depthMask","end","idx","totalRenderCalls","drawRegion","region","u","v","u2","v2","originX","originY","rotation","scaleX","scaleY","u1","v1","x1","x2","x3","x4","y1","y2","y3","y4","color","cos","sin","rotatedX1","rotatedY1","rotatedX2","rotatedY2","rotatedX3","rotatedY3","rotatedX4","rotatedY4","drawVertices","verts","off","join","InputHandler","canvas","lastX","lastY","touched","emitter","mouseDownHandler","evt","handleMove","emit","getX","getY","mouseUpHandler","mouseMoveHandler","touchStartHandler","preventDefault","touch","touches","dispatchEvent","MouseEvent","clientX","clientY","touchEndHandler","touchMoveHandler","addEventListener","removeEventListener","event","addListener","rect","getBoundingClientRect","left","top","TextureRegion","tex","extraData","invTexWidth","invTexHeight","batch","EPSILON","ARRAY_TYPE","random","PI","out","glMatrix","clone","copy","fromValues","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","adjoint","determinant","multiply","b0","b1","b2","b3","translate","z","scale","rotate","rad","axis","b12","b20","b21","b22","len","hypot","rotateX","rotateY","rotateZ","fromTranslation","fromScaling","fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","q","w","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","sqrt","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","fromQuat","yx","zx","zy","frustum","right","bottom","near","far","rl","tb","nf","perspective","fovy","aspect","tan","Infinity","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","y0","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","abs","targetTo","str","frob","add","subtract","multiplyScalar","multiplyScalarAndAdd","exactEquals","equals","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","mul","sub","unproject","vec3","invMat4","viewX","viewY","viewWidth","viewHeight","m","l_w","project","viewportWidth","viewportHeight","combined","invOrtho","transform","tmp3","origin","scaleVec","negOriginVec","translateVec","setMatrix","unprojectVector2","input","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","reject","invoke","result","__await","then","unwrapped","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","mark","awrap","async","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","EventSubscriptionVendor","emptyFunction","invariant","BaseEventEmitter","_subscriber","_currentSubscription","eventType","addSubscription","once","removeCurrentListener","removeAllListeners","removeAllSubscriptions","removeSubscription","listeners","subscriptions","getSubscriptionsForType","filter","thatReturnsTrue","map","subscription","ii","__emitToSubscription","concat","EventSubscription","remove","_subscriptionsForType","subscriptionsForType","makeEmptyFunction","thatReturns","thatReturnsFalse","thatReturnsNull","thatReturnsThis","thatReturnsArgument","compileShader","vertSource","fragSource","attributeLocations","vertShader","fragShader","program","uniformCache","attributeCache","trim","_compileShaders","vertex","fragment","verbose","VERBOSE_COMPILE","_fetchUniforms","_fetchAttributes","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","size","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","useProgram","detachShader","deleteShader","deleteProgram","getUniformInfo","getAttributeInfo","hasUniform","hasAttribute","getUniform","getUniformAt","uniform1i","uniform2i","uniform3i","uniform4i","setUniformf","uniform1f","uniform2f","uniform3f","uniform4f","setUniformfv","arrayBuffer","uniform1fv","uniform2fv","uniform3fv","uniform4fv","setUniformiv","uniform1iv","uniform2iv","uniform3iv","uniform4iv","setUniformMatrix3","uniformMatrix3fv","uniformMatrix4fv","NORMAL_ATTRIBUTE","getGL","loadShader","source","createShader","shaderSource","typeStr","VERTEX_SHADER","logResult","getShaderInfoLog","getShaderParameter","COMPILE_STATUS","addLineNumbers","string","lines","split","opts","attribs","vert","frag","FRAGMENT_SHADER","createProgram","attachShader","bindAttribLocation","linkProgram","getProgramInfoLog","LINK_STATUS","compile","document","createElement","attributes","getContext","BaseMixins","mesh","_createMesh","j","_blendingEnabled","enable","BLEND","disable","_blendSrc","_blendDst","blendFunc","spriteCount","TRIANGLES","maxVertices","ownsShader","defaultShader","_shader","ONE","ONE_MINUS_SRC_ALPHA","premultiplied","blendingEnabled","old","blendSrc","blendDst","setBlendFunction","wasDrawing","setColor","rnum","RANDOM","setMatrixArrayType","degree","toRadian","v0","pow","LDU","L","D","U","tx","ty","aa","ab","ac","ad","atx","aty","fromMat4","fromMat2d","normalFromMat4","divide","ceil","round","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","dot","cross","lerp","hermite","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","zScale","transformMat4","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","p","angle","tempA","tempB","cosine","acos","div","dist","sqrDist","sqrLen","vec","l","v3","v4","s1","s2","ix","iy","iz","iw","setAxisAngle","getAxisAngle","out_axis","calculateW","slerp","omega","cosom","sinom","scale0","scale1","u3","sqrt1MinusU1","sqrtU1","invDot","conjugate","fromMat3","fTrace","fRoot","fromEuler","halfToRad","cx","cy","cz","vec4","rotationTo","tmpvec3","xUnitVec3","yUnitVec3","sqlerp","temp1","temp2","setAxes","matr","mat3","dq","w1","fromRotationTranslationValues","outer","quat","getReal","getDual","setReal","setDual","ax1","ay1","az1","aw1","bx1","by1","bz1","ax2","ay2","az2","aw2","rotateByQuatAppend","rotateByQuatPrepend","rotateAroundAxis","axisLength","ax0","ay0","az0","aw0","bw1","bx0","by0","bz0","bw0","mt","sqlen","a_dot_b","transformMat2","transformMat2d","p0","p1","sinC","cosC","len1","len2"],"mappings":"+FAAAA,EAAOC,QAAU,EAAQ,K,6BCAV,SAASC,EAAgBC,EAAKC,EAAKC,GAYhD,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,E,kPCXO,aAACQ,EAAIC,EAAKC,GAAV,OAAsB,IAAIC,SAAQ,SAAAC,GAChD,IAAMC,EAAQ,IAAIC,MAClBD,EAAME,IAAMN,EAEZI,EAAMG,OAAS,WACb,IAAMC,EAAU,IAAIC,IAAQV,E,+VAAZ,IAAqBE,EAArB,CACdG,WAEFI,EAAQE,UAAUD,IAAQE,OAAOC,OAAQH,IAAQE,OAAOC,QAAQ,GAChET,EAAQK,QAGUC,IAAQE,Q,cCT9B,SAASE,EAAYC,EAAYC,EAAGC,GAKnC,IAAIC,EAAMD,EACLF,EAAWC,GACXrB,OAAOwB,yBAAyBJ,EAAYC,GAQjD,OANKC,GAAqBC,EAAIxB,OAA8B,kBAAdwB,EAAIxB,QACjDwB,EAAMA,EAAIxB,UAKNwB,IAnBN,SAA2BA,GAC1B,QAAUA,EAAIE,KAA0B,oBAAZF,EAAIE,OAA0BF,EAAIG,KAA0B,oBAAZH,EAAIG,IAkBpEC,CAAkBJ,MACC,qBAAnBA,EAAIrB,aACdqB,EAAIrB,YAAa,GACc,qBAArBqB,EAAIpB,eACdoB,EAAIpB,cAAe,GACboB,GAMT,SAASK,EAAmB/B,EAAKwB,GAChC,IAAIQ,EAAO7B,OAAOwB,yBAAyB3B,EAAKwB,GAChD,QAAKQ,IAGDA,EAAK9B,OAA+B,kBAAf8B,EAAK9B,QAC7B8B,EAAOA,EAAK9B,QAEa,IAAtB8B,EAAK1B,cASV,SAAS2B,EAAOC,EAAMX,EAAYE,EAAmBQ,GACpD,IAAK,IAAIT,KAAKD,EACb,GAAKA,EAAWY,eAAeX,GAA/B,CAGA,IAAIE,EAAMJ,EAAYC,EAAYC,EAAGC,GAErC,IAAY,IAARC,EAAe,CAKlB,GAAIK,GADSE,GAAUC,GACOE,UAAWZ,GAAI,CAG5C,GAAIa,EAAMC,aACT,SAOD,MAAM,IAAIC,MAAM,mCAAmCf,EAC/C,4CAGLrB,OAAOC,eAAe8B,EAAKE,UAAWZ,EAAGE,QAEzCQ,EAAKE,UAAUZ,GAAKD,EAAWC,IAQlC,SAASgB,EAAMC,EAASC,GACvB,GAAKA,EAAL,CAGKC,MAAMC,QAAQF,KAClBA,EAAS,CAACA,IAEX,IAAK,IAAIG,EAAE,EAAGA,EAAEH,EAAOI,OAAQD,IAC9BZ,EAAOQ,EAASC,EAAOG,GAAGT,WAAaM,EAAOG,KA8BhD,SAASR,EAAMd,GAKd,IAAIwB,EACAC,EAEJ,GAPKzB,IACJA,EAAa,IAMVA,EAAWwB,WAAY,CAC1B,GAAqC,oBAA1BxB,EAAWwB,WACrB,MAAM,IAAIR,MAAM,iCACjBQ,EAAaxB,EAAWwB,kBAKjBxB,EAAWwB,gBAElB,GAAIxB,EAAWyB,QAAS,CACvB,IAAIC,EAAO1B,EAAWyB,QACtBD,EAAa,WACZE,EAAKC,MAAMC,KAAMC,iBAGlBL,EAAa,aAIXxB,EAAWyB,SACdD,EAAWX,UAAYjC,OAAOkD,OAAO9B,EAAWyB,QAAQZ,WACxDW,EAAWX,UAAUkB,YAAcP,EAGnCC,EAAUzB,EAAWyB,eACdzB,EAAWyB,SAElBD,EAAWX,UAAUkB,YAAcP,EAIpC,IAAIL,EAAS,KAYb,OAXInB,EAAWgC,SACdb,EAASnB,EAAWgC,cACbhC,EAAWgC,QAInBf,EAAMO,EAAYL,GAGlBT,EAAOc,EAAYxB,GAAY,EAAMyB,GAE9BD,EAGRV,EAAMJ,OAASA,EACfI,EAAMG,MAAQA,EACdH,EAAMC,cAAe,EAErBzC,EAAOC,QAAUuC,G,6BClLF,SAASmB,EAAeC,EAAKZ,GAC1C,OCJa,SAAyBY,GACtC,GAAId,MAAMC,QAAQa,GAAM,OAAOA,EDGxB,CAAeA,IEJT,SAA+BA,EAAKZ,GACjD,GAAMa,OAAOC,YAAYxD,OAAOsD,IAAgD,uBAAxCtD,OAAOiC,UAAUwB,SAASC,KAAKJ,GAAvE,CAIA,IAAIK,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAKC,EAET,IACE,IAAK,IAAiCC,EAA7BC,EAAKX,EAAIC,OAAOC,cAAmBI,GAAMI,EAAKC,EAAGC,QAAQC,QAChER,EAAKS,KAAKJ,EAAGjE,QAET2C,GAAKiB,EAAKhB,SAAWD,GAH8CkB,GAAK,IAK9E,MAAOS,GACPR,GAAK,EACLC,EAAKO,EACL,QACA,IACOT,GAAsB,MAAhBK,EAAW,QAAWA,EAAW,SAC5C,QACA,GAAIJ,EAAI,MAAMC,GAIlB,OAAOH,GFvBuB,CAAqBL,EAAKZ,IGJ3C,WACb,MAAM,IAAI4B,UAAU,wDHG0C,GAJhE,mC,gBIMA,IAAIpC,EAAQqC,EAAQ,GAEhBC,GADiBD,EAAQ,GAAeE,eACzBF,EAAQ,GAAeC,cACtCE,EAAaH,EAAQ,GAAaG,WAElC3D,EAAU,IAAImB,EAAM,CAkCtBU,WAAY,SAAS7B,EAAQ4D,EAASpE,GACpC,KAAMyC,gBAAgBjC,GAAU,OAAO,IAAIA,EAAQ4D,EAASpE,GAG5DmE,EAAWhB,KAAKV,KAAM2B,GAiBtB3B,KAAK4B,YAAcrE,EAQnByC,KAAK6B,GAAK,KAWV7B,KAAK8B,OAAS9B,KAAK2B,QAAQtE,GAAG0E,WAS9B/B,KAAKgC,MAAQ,EASbhC,KAAKiC,OAAS,EAEdjC,KAAKkC,QAAU,CAAC,EAAG,GAMnBlC,KAAKmC,MAAQpE,EAAQqE,aAKrBpC,KAAKqC,MAAQtE,EAAQqE,aAKrBpC,KAAKsC,UAAYvE,EAAQwE,eAMzBvC,KAAKwC,UAAYzE,EAAQwE,eAGzBvC,KAAK2B,QAAQc,iBAAiBzC,MAC9BA,KAAKE,UAYPwC,MAAO,SAASnF,GACd,IAAIF,EAAK2C,KAAK3C,GAGd,GAAKE,EAKL,GAAIA,EAAQK,KAA8B,kBAAhBL,EAAQK,IAAkB,CAClD,IAAI+E,EAAM,IAAIhF,MACViF,EAAOrF,EAAQK,IACfiF,EAActF,EAAQsF,YACtBC,EACwB,oBAAnBvF,EAAQwF,OAAwBxF,EAAQwF,OAAS,KACtDC,EACyB,oBAApBzF,EAAQ0F,QAAyB1F,EAAQ0F,QAAU,KACxDC,EAAa3F,EAAQ2F,WAErBC,EAAOnD,KAMPjC,EAAQqF,qBACVD,EAAKE,WAAW,EAAG,GACnBrD,KAAKgC,MAAQhC,KAAKiC,OAAS,GAG7BU,EAAIE,YAAcA,EAElBF,EAAI9E,OAAS,SAASyF,GACpBH,EAAKI,YAAYZ,OAAK5B,OAAWA,EAAWmC,GACnB,oBAAdJ,GAA0BA,EAAUpC,KAAKyC,EAAMG,EAAIH,IAEhER,EAAIa,QAAU,SAASF,GACjBJ,GAEF7F,EAAGoG,eAAepG,EAAG0E,YACD,oBAAXiB,GAAuBA,EAAOtC,KAAKyC,EAAMG,EAAIH,IAE1DR,EAAIe,QAAU,SAASJ,GACjBJ,GAAY7F,EAAGoG,eAAepG,EAAG0E,YACf,oBAAXiB,GAAuBA,EAAOtC,KAAKyC,EAAMG,EAAIH,IAG1DR,EAAI/E,IAAMgF,OAGHrF,EAAQG,MACfsC,KAAKuD,YACHhG,EAAQG,MACRH,EAAQoG,OACRpG,EAAQqG,SACRrG,EAAQ2F,YAKVlD,KAAKqD,WACH9F,EAAQyE,MACRzE,EAAQ0E,OACR1E,EAAQoG,OACRpG,EAAQqG,SACRrG,EAAQsG,KACRtG,EAAQ2F,aAYdhD,OAAQ,WACNF,KAAK3C,GAAK2C,KAAK2B,QAAQtE,GACvB,IAAIA,EAAK2C,KAAK3C,GAEd2C,KAAK6B,GAAKxE,EAAGyG,gBACb9D,KAAKgC,MAAQhC,KAAKiC,OAAS,EAC3BjC,KAAK8B,OAASzE,EAAG0E,WAEjB/B,KAAK+D,OAGL1G,EAAG2G,YACD3G,EAAG4G,+BACHlG,EAAQmG,0BAEV7G,EAAG2G,YAAY3G,EAAG8G,iBAAkBpG,EAAQoG,kBAC5C9G,EAAG2G,YAAY3G,EAAG+G,oBAAqBrG,EAAQsG,eAE/C,IAAIC,EACFvG,EAAQwG,8BAAgClH,EAAGmH,sBAC7CnH,EAAG2G,YAAY3G,EAAGoH,mCAAoCH,GAGtDtE,KAAK0E,QAAQ1E,KAAKmC,MAAOnC,KAAKqC,OAAO,GACrCrC,KAAKhC,UAAUgC,KAAKsC,UAAWtC,KAAKwC,WAAW,GAE3CxC,KAAK4B,aACP5B,KAAK0C,MAAM1C,KAAK4B,cAapB+C,QAAS,WACH3E,KAAK6B,IAAM7B,KAAK3C,IAAI2C,KAAK3C,GAAGuH,cAAc5E,KAAK6B,IAC/C7B,KAAK2B,SAAS3B,KAAK2B,QAAQkD,oBAAoB7E,MACnDA,KAAKgC,MAAQhC,KAAKiC,OAAS,EAC3BjC,KAAK6B,GAAK,KACV7B,KAAK4B,YAAc,KACnB5B,KAAK2B,QAAU,KACf3B,KAAK3C,GAAK,MAgBZqH,QAAS,SAASI,EAAGC,EAAGC,GAElBF,GAAKC,GACP/E,KAAKmC,MAAQ2C,EACb9E,KAAKqC,MAAQ0C,GACR/E,KAAKmC,MAAQnC,KAAKqC,MAAQyC,EAGjC9E,KAAKiF,YAEAD,GAAYhF,KAAK+D,OAEtB,IAAI1G,EAAK2C,KAAK3C,GACdA,EAAG6H,cAAclF,KAAK8B,OAAQzE,EAAG8H,eAAgBnF,KAAKmC,OACtD9E,EAAG6H,cAAclF,KAAK8B,OAAQzE,EAAG+H,eAAgBpF,KAAKqC,QAgBxDrE,UAAW,SAASqH,EAAKC,EAAKN,GACxBK,GAAOC,GACTtF,KAAKsC,UAAY+C,EACjBrF,KAAKwC,UAAY8C,GACZtF,KAAKsC,UAAYtC,KAAKwC,UAAY6C,EAGzCrF,KAAKiF,YAEAD,GAAYhF,KAAK+D,OAEtB,IAAI1G,EAAK2C,KAAK3C,GACdA,EAAG6H,cAAclF,KAAK8B,OAAQzE,EAAGkI,mBAAoBvF,KAAKsC,WAC1DjF,EAAG6H,cAAclF,KAAK8B,OAAQzE,EAAGmI,mBAAoBxF,KAAKwC,YAkB5Da,WAAY,SAASrB,EAAOC,EAAQ0B,EAAQ8B,EAAM5B,EAAMX,GACtD,IAAI7F,EAAK2C,KAAK3C,GAEdsG,EAASA,GAAUtG,EAAGqI,KACtBD,EAAOA,GAAQpI,EAAGsI,cAClB9B,EAAOA,GAAQ,KAEf7D,KAAKgC,MAAQA,GAAkB,GAATA,EAAaA,EAAQhC,KAAKgC,MAChDhC,KAAKiC,OAASA,GAAoB,GAAVA,EAAcA,EAASjC,KAAKiC,OAEpDjC,KAAKiF,YAELjF,KAAK+D,OAEL1G,EAAGuI,WACD5F,KAAK8B,OACL,EACA6B,EACA3D,KAAKgC,MACLhC,KAAKiC,OACL,EACA0B,EACA8B,EACA5B,GAGEX,GAAY7F,EAAGoG,eAAezD,KAAK8B,SAazCyB,YAAa,SAASsC,EAAWlC,EAAQ8B,EAAMvC,GAC7C,IAAI7F,EAAK2C,KAAK3C,GAEdsG,EAASA,GAAUtG,EAAGqI,KACtBD,EAAOA,GAAQpI,EAAGsI,cAElB3F,KAAKgC,MAAQ6D,EAAU7D,MACvBhC,KAAKiC,OAAS4D,EAAU5D,OAExBjC,KAAKiF,YAELjF,KAAK+D,OAEL1G,EAAGuI,WAAW5F,KAAK8B,OAAQ,EAAG6B,EAAQA,EAAQ8B,EAAMI,GAEhD3C,GAAY7F,EAAGoG,eAAezD,KAAK8B,SAGzCgE,eAAgB,aAYhBb,UAAW,WACT,IAAKlH,EAAQgI,UAAW,CAGtB,IAAIC,EACFhG,KAAKsC,YAAcvE,EAAQE,OAAOC,QAClC8B,KAAKsC,YAAcvE,EAAQE,OAAOgI,QAChCC,EACFlG,KAAKmC,QAAUpE,EAAQoI,KAAKC,eAC5BpG,KAAKqC,QAAUtE,EAAQoI,KAAKC,cAE9B,IAAIJ,GAAeE,MACZ1E,EAAaxB,KAAKgC,SAAWR,EAAaxB,KAAKiC,SAClD,MAAM,IAAI7C,MACR4G,EACI,4DACA,8DAgBdjC,KAAM,SAASsC,GACb,IAAIhJ,EAAK2C,KAAK3C,IACVgJ,GAAiB,IAATA,IAAYhJ,EAAGiJ,cAAcjJ,EAAGkJ,SAAWF,GACvDhJ,EAAGmJ,YAAYxG,KAAK8B,OAAQ9B,KAAK6B,KAGnCpB,SAAU,WACR,OAAOT,KAAK6B,GAAK,IAAM7B,KAAKgC,MAAQ,IAAMhC,KAAKiC,QAGjDwE,MAAO,CACLhI,IAAK,WAGH,OAFAuB,KAAKkC,QAAQ,GAAKlC,KAAKgC,MACvBhC,KAAKkC,QAAQ,GAAKlC,KAAKiC,OAChBjC,KAAKkC,SAEdxD,IAAK,SAAS+H,GACZ,MAAM,IAAIrH,MAAM,oCAsBtBrB,EAAQE,OAAS,CACfgI,QAAS,KACTS,sBAAuB,KACvBC,uBAAwB,KACxBzI,OAAQ,KACR0I,qBAAsB,KACtBC,sBAAuB,MAiBzB9I,EAAQoI,KAAO,CACbC,cAAe,MACfU,gBAAiB,MACjBC,OAAQ,OAiBVhJ,EAAQiJ,OAAS,CACfC,gBAAiB,KACjBC,MAAO,KACPxB,KAAM,KACNyB,IAAK,KACLC,UAAW,KACXC,gBAAiB,MAgBnBtJ,EAAQuJ,SAAW,CACjBC,KAAM,KACNC,MAAO,KACPC,IAAK,KACLC,MAAO,KACP/B,cAAe,KACfgC,aAAc,KACdC,eAAgB,KAChBC,uBAAwB,MACxBC,uBAAwB,MACxBC,qBAAsB,OAWxBhK,EAAQqE,aAAerE,EAAQoI,KAAKC,cAUpCrI,EAAQwE,eAAiBxE,EAAQE,OAAOgI,QAiBxClI,EAAQgI,WAAY,EAGpBhI,EAAQsG,eAAgB,EACxBtG,EAAQoG,iBAAmB,EAC3BpG,EAAQmG,0BAA2B,EACnCnG,EAAQwG,kCAA+BxD,EAGvChD,EAAQqF,oBAAqB,EAY7BrF,EAAQiK,iBAAmB,SAASrE,GAClC,OAAQA,GACN,KAAK5F,EAAQiJ,OAAOC,gBACpB,KAAKlJ,EAAQiJ,OAAOE,MACpB,KAAKnJ,EAAQiJ,OAAOI,UAClB,OAAO,EACT,KAAKrJ,EAAQiJ,OAAOK,gBAClB,OAAO,EACT,KAAKtJ,EAAQiJ,OAAOG,IAClB,OAAO,EACT,KAAKpJ,EAAQiJ,OAAOtB,KAClB,OAAO,EAEX,OAAO,MAGThJ,EAAOC,QAAUoB,G,gBC3nBjB,IAAIkK,EAAmB1G,EAAQ,IAE/B,SAAS2G,EAAY7K,GAGjB,IAAI8K,EAAQ9K,GAAMA,EAAG8K,MAAQ9K,EAAG8K,MAAQ9K,EACxC,MAA4C,qBAAjC+K,OAAOC,uBAAyCF,aAAiBC,OAAOC,sBACxE,IAAIJ,EAAiB5K,GAErBA,EAafX,EAAOC,QAAQuL,YAAcA,EAE7BxL,EAAOC,QAAQ+E,WAAa,SAASC,GACjC,IAAKA,GAA8B,kBAAZA,EACnB,KAAM,iCAEV3B,KAAK2B,QAAUuG,EAAYvG,K,cC5B/B,IAAI2G,EAAO,IAAIC,UAAU,GACrBC,EAAQ,IAAIC,WAAWH,EAAKI,OAAQ,EAAG,GACvCC,EAAU,IAAIC,aAAaN,EAAKI,OAAQ,EAAG,GAM3CG,EAAa,aAcjBA,EAAWC,eAAiB,SAASpJ,GAEpC,OADA8I,EAAM,GAAK9I,EACJiJ,EAAQ,IAYhBE,EAAWE,eAAiB,SAASC,GAEpC,OADAL,EAAQ,GAAKK,EACNR,EAAM,IAUdK,EAAWI,gBAAkB,SAASlM,GACrC,OAAO8L,EAAWC,eAAwB,WAAR/L,IAenC8L,EAAWK,aAAe,SAASC,EAAGC,EAAGC,EAAGC,GAE3C,OAAOT,EAAWI,gBADNK,GAAK,GAAKD,GAAK,GAAKD,GAAK,EAAID,IAW1CN,EAAWrH,aAAe,SAAS+H,GAClC,OAAyB,KAAjBA,EAAKA,EAAI,IASlBV,EAAWpH,eAAiB,SAAS8H,GAOpC,OANAA,IACAA,GAAKA,GAAK,EACVA,GAAKA,GAAK,EACVA,GAAKA,GAAK,EACVA,GAAKA,GAAK,GACVA,GAAKA,GAAK,IACD,GAGV7M,EAAOC,QAAUkM,G,gBCvFjB,IAAIW,EAAY,CACdC,aAAclI,EAAQ,IACtBmI,oBAAsBnI,EAAQ,KAGhC7E,EAAOC,QAAU6M,G,6BCdF,SAASG,EAAgBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIvI,UAAU,qCAFxB,mC,6BCAA,SAASwI,EAAkBhI,EAAQiI,GACjC,IAAK,IAAIrK,EAAI,EAAGA,EAAIqK,EAAMpK,OAAQD,IAAK,CACrC,IAAIsK,EAAaD,EAAMrK,GACvBsK,EAAW9M,WAAa8M,EAAW9M,aAAc,EACjD8M,EAAW7M,cAAe,EACtB,UAAW6M,IAAYA,EAAW5M,UAAW,GACjDJ,OAAOC,eAAe6E,EAAQkI,EAAWlN,IAAKkN,IAInC,SAASC,EAAaJ,EAAaK,EAAYC,GAG5D,OAFID,GAAYJ,EAAkBD,EAAY5K,UAAWiL,GACrDC,GAAaL,EAAkBD,EAAaM,GACzCN,EAbT,mC,6BCAA,kCAAO,IAAMO,EAAW,CACtBC,OAAQ,EACRC,KAAM,EACNC,cAAe,EACfC,SAAU,EACVC,cAAe,GAGD,aAACC,GAAkC,IAAnBC,EAAmB,uDAAP,GAC1C,MAAO,CACLC,YADK,SACOC,GAAmC,IAAxBC,EAAwB,uDAAjBV,EAASC,OACjCU,EAAcC,KAAKC,MAAMJ,EAAYH,GAEzC,OAAQI,GACN,KAAKV,EAASC,OACZU,EAAcC,KAAK3F,IAAIsF,EAAUhL,OAAS,EAAGoL,GAC7C,MAEF,KAAKX,EAASE,KACZS,GAA4BJ,EAAUhL,OACtC,MAEF,KAAKyK,EAASG,eACZQ,GAAgD,EAAnBJ,EAAUhL,OAAa,IAEjCgL,EAAUhL,SAC3BoL,EAAcJ,EAAUhL,OAAS,GAAKoL,EAAcJ,EAAUhL,SAGhE,MAEF,KAAKyK,EAASI,SACZO,EAAcC,KAAKE,IAAIP,EAAUhL,OAASoL,EAAc,EAAG,GAC3D,MAEF,KAAKX,EAASK,cACZM,GAA4BJ,EAAUhL,OACtCoL,EAAcJ,EAAUhL,OAASoL,EAAc,EAMnD,OAAOJ,EAAUI,O,6BCzBvB,IAMIrB,EAAuB,SAAUyB,GAYnC,SAASzB,EAAoB0B,EAAYC,EAAU1J,IAtBrD,SAAyBiI,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIvI,UAAU,qCAuB5GqI,CAAgB3J,KAAM0J,GAEtByB,EAAmBzK,KAAKV,KAAMoL,GAC9BpL,KAAKqL,SAAWA,EAChBrL,KAAK2B,QAAUA,EAGjB,OA5BF,SAAmB2J,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIjK,UAAU,kEAAoEiK,GAAeD,EAASrM,UAAYjC,OAAOkD,OAAOqL,GAAcA,EAAWtM,UAAW,CAAEkB,YAAa,CAAEpD,MAAOuO,EAAUpO,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAeoO,IAAYvO,OAAOwO,eAAiBxO,OAAOwO,eAAeF,EAAUC,GAAcD,EAASG,UAAYF,GAS/dG,CAAUhC,EAAqByB,GAmBxBzB,EApBkB,CANHnI,EAAQ,KA6BhC7E,EAAOC,QAAU+M,G,6BC1BjB,IAAIiC,EAAiB,SAAwBhI,KA+B7CjH,EAAOC,QArBP,SAAmBiP,EAAWjI,EAAQ2F,EAAGD,EAAGwC,EAAGC,EAAGC,EAAG/C,GAGnD,GAFA2C,EAAehI,IAEViI,EAAW,CACd,IAAII,EACJ,QAAejL,IAAX4C,EACFqI,EAAQ,IAAI5M,MAAM,qIACb,CACL,IAAI6M,EAAO,CAAC3C,EAAGD,EAAGwC,EAAGC,EAAGC,EAAG/C,GACvBkD,EAAW,GACfF,EAAQ,IAAI5M,MAAMuE,EAAOwI,QAAQ,OAAO,WACtC,OAAOF,EAAKC,UAERE,KAAO,sBAIf,MADAJ,EAAMK,YAAc,EACdL,K,gBC1CV,IAAI9M,EAAQqC,EAAQ,GAChBG,EAAaH,EAAQ,GAAaG,WAQlC4K,EAAO,IAAIpN,EAAM,CAWpBqN,MAAO,CACN7N,IAAK,SAAS8N,GACbxM,KAAKyM,cAAgBD,EACrBxM,KAAK0M,aAAeF,IAqBtB5M,WAAY,SAAc+B,EAASgL,EAAUC,EAAUC,EAAYC,GAElE,IAAKF,EACJ,KAAM,sCAEPlL,EAAWhB,KAAKV,KAAM2B,GAEtB3B,KAAK3C,GAAK2C,KAAK2B,QAAQtE,GAEvB2C,KAAK4M,SAAW,KAChB5M,KAAK6M,WAAa,KAElB7M,KAAK+M,SAAW,KAChB/M,KAAKgN,QAAU,KACfhN,KAAKiN,aAAe,KACpBjN,KAAKkN,YAAc,KAEnBlN,KAAKyM,eAAgB,EACrBzM,KAAK0M,cAAe,EACpB1M,KAAKmN,WAAa,KAClBnN,KAAKoN,YAAc,KAMnBpN,KAAKqN,eAAiB,KAOtBrN,KAAKsN,aAAe,KAEpBtN,KAAK4M,SAAWA,EAChB5M,KAAK6M,WAAaA,GAAc,EAChC7M,KAAKoN,YAAcT,EAAW3M,KAAK3C,GAAGkQ,YAAcvN,KAAK3C,GAAGmQ,aAC5DxN,KAAKmN,WAAcR,EAAW3M,KAAK3C,GAAGkQ,YAAcvN,KAAK3C,GAAGmQ,aAC5DxN,KAAKqN,eAAiBP,GAAiB,GAEvC9M,KAAK0M,cAAe,EACpB1M,KAAKyM,eAAgB,EAIrB,IADA,IAAIgB,EAAqB,EAChB/N,EAAE,EAAGA,EAAEM,KAAKqN,eAAe1N,OAAQD,IAC3C+N,GAAsBzN,KAAKqN,eAAe3N,GAAGgO,YAC9C1N,KAAKsN,aAAoC,EAArBG,EAEpBzN,KAAK+M,SAAW,IAAInE,aAAa5I,KAAK4M,UACtC5M,KAAKgN,QAAU,IAAIW,YAAY3N,KAAK6M,YAGpC7M,KAAK2B,QAAQc,iBAAiBzC,MAE9BA,KAAKE,UAINA,OAAQ,WACPF,KAAK3C,GAAK2C,KAAK2B,QAAQtE,GACvB,IAAIA,EAAK2C,KAAK3C,GACd2C,KAAKiN,aAAe5P,EAAGuQ,eAGvB5N,KAAKkN,YAAclN,KAAK6M,WAAa,EAChCxP,EAAGuQ,eACH,KAEL5N,KAAKuM,OAAQ,GAGd5H,QAAS,WACR3E,KAAK+M,SAAW,KAChB/M,KAAKgN,QAAU,KACXhN,KAAKiN,cAAgBjN,KAAK3C,IAC7B2C,KAAK3C,GAAGwQ,aAAa7N,KAAKiN,cACvBjN,KAAKkN,aAAelN,KAAK3C,IAC5B2C,KAAK3C,GAAGwQ,aAAa7N,KAAKkN,aAC3BlN,KAAKiN,aAAe,KACpBjN,KAAKkN,YAAc,KACflN,KAAK2B,SACR3B,KAAK2B,QAAQkD,oBAAoB7E,MAClCA,KAAK3C,GAAK,KACV2C,KAAK2B,QAAU,MAGhBmM,eAAgB,SAAS9I,EAAY+I,GACpC,IAAI1Q,EAAK2C,KAAK3C,GAmBd,GAhBI2C,KAAK6M,WAAa,IAChB7H,GACJ3H,EAAG2Q,WAAW3Q,EAAG4Q,qBAAsBjO,KAAKkN,aAGzClN,KAAK0M,eACRrP,EAAG6Q,WAAW7Q,EAAG4Q,qBAAsBjO,KAAKgN,QAAShN,KAAKmN,YAC1DnN,KAAK0M,cAAe,IAKjB1H,GACJ3H,EAAG2Q,WAAW3Q,EAAG8Q,aAAcnO,KAAKiN,cAGjCjN,KAAKyM,cAAe,CACvB,GAAIsB,EAAe,CAElB,IAAIK,EAAOpO,KAAK+M,SAASsB,SAAS,EAAGN,GACrC1Q,EAAGiR,cAAcjR,EAAG8Q,aAAc,EAAGC,QAErC/Q,EAAG6Q,WAAW7Q,EAAG8Q,aAAcnO,KAAK+M,SAAU/M,KAAKoN,aAIpDpN,KAAKyM,eAAgB,IAIvB8B,KAAM,SAASC,EAAeC,EAAOC,EAAQX,GAC5C,GAAc,IAAVU,EAAJ,CAGA,IAAIpR,EAAK2C,KAAK3C,GAEdqR,EAASA,GAAU,EAInB1O,KAAK8N,gBAAe,EAAMC,GAEtB/N,KAAK6M,WAAa,EACrBxP,EAAGsR,aAAaH,EAAeC,EAC5BpR,EAAGuK,eAAyB,EAAT8G,GAEtBrR,EAAGuR,WAAWJ,EAAeE,EAAQD,KAIvC1K,KAAM,SAAS8K,GACd,IAAIxR,EAAK2C,KAAK3C,GAEVqR,EAAS,EACTI,EAAS9O,KAAKsN,aAGlBtN,KAAK8N,iBAGL,IAAK,IAAIpO,EAAE,EAAGA,EAAEM,KAAKqN,eAAe1N,OAAQD,IAAK,CAChD,IAAI4J,EAAItJ,KAAKqN,eAAe3N,GAGxBqP,EAAqB,OAAfzF,EAAE0F,SACRH,EAAOI,qBAAqB3F,EAAE8C,MAC9B9C,EAAE0F,SAON3R,EAAG6R,wBAAwBH,GAG3B1R,EAAG8R,oBAAoBJ,EAAKzF,EAAE8F,cAAe9F,EAAE7D,MAAQpI,EAAGqK,MAClD4B,EAAE+F,UAAWP,EAAQJ,GAG7BA,GAA0B,EAAhBpF,EAAEoE,cAId4B,OAAQ,SAAST,GAIhB,IAHA,IAAIxR,EAAK2C,KAAK3C,GAGLqC,EAAE,EAAGA,EAAEM,KAAKqN,eAAe1N,OAAQD,IAAK,CAChD,IAAI4J,EAAItJ,KAAKqN,eAAe3N,GAGxBqP,EAAqB,OAAfzF,EAAE0F,SACRH,EAAOI,qBAAqB3F,EAAE8C,MAC9B9C,EAAE0F,SAGN3R,EAAGkS,yBAAyBR,OAK/BzC,EAAKkD,OAAS,IAAItQ,EAAM,CAEvBkN,KAAM,KACNgD,cAAe,KACfJ,SAAU,KACVvJ,KAAM,KAmBN7F,WAAY,SAASwM,EAAMgD,EAAeJ,EAAUvJ,EAAM4J,EAAW3B,GACpE1N,KAAKoM,KAAOA,EACZpM,KAAKoP,cAAgBA,EACrBpP,KAAKgP,SAA+B,kBAAbA,EAAwBA,EAAW,KAC1DhP,KAAKyF,KAAOA,EACZzF,KAAKqP,UAAYI,QAAQJ,GACzBrP,KAAK0N,YAAqC,kBAAhBA,EAA2BA,EAAc1N,KAAKoP,iBAK1E1S,EAAOC,QAAU2P,G,6BCvRjB,qBACeoD,MAAf,G,gBCMA,IAAIxQ,EAAQqC,EAAQ,GAEhB+K,EAAO/K,EAAQ,IACfoO,EAAgBpO,EAAQ,IACxBqO,EAAYrO,EAAQ,IACpBsO,EAAOtO,EAAQ,IAAasO,KAgC5BC,EAAc,IAAI5Q,EAAM,CAE3BkB,OAAQwP,EAGRhQ,WAAY,SAASkQ,EAAYnO,EAASpE,GACzC,KAAMyC,gBAAgB8P,GACrB,OAAO,IAAIA,EAAYnO,EAASpE,GACjCqS,EAAUlP,KAAKV,KAAM2B,EAASpE,GAe9ByC,KAAK+P,WAAaF,EAAK3P,SAQvBF,KAAKlC,QAAU,MAYhBkS,OAAQ,SAAShO,EAAOC,GACvBjC,KAAKiQ,cAAcjO,EAAQ,EAAGC,EAAS,IAUxCiO,cAAe,WACd,OAAOJ,EAAYK,aAUpBC,wBAAyB,WACxB,IAAI/S,EAAK2C,KAAK2B,QAAQtE,GAEtB,MAAO,CACN,IAAIiP,EAAKkD,OAAOG,EAAcU,mBAAoB,GAElD,IAAI/D,EAAKkD,OACRG,EAAcW,gBACd,EACA,KACAjT,EAAGsI,eACH,EACA,GAED,IAAI2G,EAAKkD,OAAOG,EAAcY,mBAAqB,IAAK,KAY1DN,cAAe,SAASJ,GACvB7P,KAAK+P,WAAaF,GACd7P,KAAKwQ,SAAYC,GAAKC,MAAQC,GAAKC,OACtC5Q,KAAK6Q,QACL7Q,KAAK8Q,mBAWPC,cAAe,WACd,IAAIlC,EAAS,IAAIc,EAChB3P,KAAK2B,QACLmO,EAAYkB,oBACZlB,EAAYmB,qBAGb,OADIpC,EAAOqC,KAAKC,QAAQC,KAAK,gBAAkBvC,EAAOqC,KAC/CrC,GAcRiC,eAAgB,WACf9Q,KAAK6O,OAAOwC,kBAAkB,eAAgBrR,KAAK+P,aASpDuB,WAAY,WACPtR,KAAKlC,SAASkC,KAAKlC,QAAQiG,QAUhCwN,MAAO,WAEN,IAAIlU,EAAK2C,KAAK2B,QAAQtE,GAGtBuS,EAAU3Q,UAAUsS,MAAM7Q,KAAKV,MAE/BA,KAAK8Q,iBAIL9Q,KAAK6O,OAAO2C,YAAY,aAAc,GAGtCnU,EAAGoU,WAAU,IAQdC,IAAK,WAEJ,IAAIrU,EAAK2C,KAAK2B,QAAQtE,GAItBuS,EAAU3Q,UAAUyS,IAAIhR,KAAKV,MAE7B3C,EAAGoU,WAAU,IAUdZ,MAAO,WAED7Q,KAAKlC,SACO,IAAbkC,KAAK2R,MACT/B,EAAU3Q,UAAU4R,MAAMnQ,KAAKV,MAC/B8P,EAAY8B,qBAGbC,WAAY,SAASC,EAAQrB,EAAGE,EAAG3O,EAAOC,GACzCjC,KAAKuO,KACJuD,EAAOhU,QACP2S,EACAE,EACA3O,EACAC,EACA6P,EAAOC,EACPD,EAAOE,EACPF,EAAOG,GACPH,EAAOI,KAmBT3D,KAAM,SACLzQ,EACA2S,EACAE,EACA3O,EACAC,GAUC,IATDkQ,EASC,uDATS,EACVC,EAQC,uDARS,EACVC,EAOC,uDAPU,EACXC,EAMC,uDANQ,EACTC,EAKC,uDALQ,EACTC,EAIC,0DAJI,EACLC,EAGC,0DAHI,EACLR,EAEC,0DAFI,EACLC,EACC,0DADI,EAEL,IAAKlS,KAAKwQ,QACT,KAAM,uDAGP,GAAK1S,EAAL,CAEqB,OAAjBkC,KAAKlC,SAAoBkC,KAAKlC,QAAQ+D,KAAO/D,EAAQ+D,IAExD7B,KAAK6Q,QACL7Q,KAAKlC,QAAUA,GACLkC,KAAK2R,KAAO3R,KAAK+M,SAASpN,QACpCK,KAAK6Q,QAKNJ,EAAIA,GAAK,EACTE,EAAIA,GAAK,EAET,IAAI+B,GAAMP,EACNQ,GANJ3Q,EAAkB,IAAVA,EAAcA,EAAQA,GAASlE,EAAQkE,OAM9BmQ,EACbS,EAAK5Q,EAAQmQ,EACbU,GAAMV,EAENW,GAAMV,EACNW,GAAMX,EACNY,GAXJ/Q,EAAoB,IAAXA,EAAeA,EAASA,GAAUnE,EAAQmE,QAWjCmQ,EACda,EAAKhR,EAASmQ,EAEdvG,EAAI7L,KAAKkT,MAgBb,GAde,IAAXZ,IACHI,GAAUJ,EACVK,GAAUL,EACVM,GAAUN,EACVO,GAAUP,GAGI,IAAXC,IACHO,GAAUP,EACVQ,GAAUR,EACVS,GAAUT,EACVU,GAAUV,GAGM,IAAbF,EAAgB,CACnB,IAAIc,EAAMnI,KAAKmI,IAAId,GACfe,EAAMpI,KAAKoI,IAAIf,GAEfgB,EAAYF,EAAMT,EAAKU,EAAMN,EAC7BQ,EAAYF,EAAMV,EAAKS,EAAML,EAE7BS,EAAYJ,EAAMR,EAAKS,EAAML,EAC7BS,EAAYJ,EAAMT,EAAKQ,EAAMJ,EAE7BU,EAAYN,EAAMP,EAAKQ,EAAMJ,EAC7BU,EAAYN,EAAMR,EAAKO,EAAMH,EAE7BW,EAAYR,EAAMN,EAAKO,EAAMH,EAC7BW,EAAYR,EAAMP,EAAKM,EAAMF,EAEjCP,EAAKW,EACLV,EAAKY,EACLX,EAAKa,EACLZ,EAAKc,EAELb,EAAKQ,EACLP,EAAKS,EACLR,EAAKU,EACLT,EAAKW,EAGNlB,GAAMjC,EAAI0B,EACVQ,GAAMlC,EAAI0B,EACVS,GAAMnC,EAAI0B,EACVU,GAAMpC,EAAI0B,EAEVW,GAAMnC,EAAIyB,EACVW,GAAMpC,EAAIyB,EACVY,GAAMrC,EAAIyB,EACVa,GAAMtC,EAAIyB,EAGVpS,KAAK+M,SAAS/M,KAAK2R,OAASe,EAC5B1S,KAAK+M,SAAS/M,KAAK2R,OAASmB,EAE5B9S,KAAK+M,SAAS/M,KAAK2R,OAAS9F,EAE5B7L,KAAK+M,SAAS/M,KAAK2R,OAASa,EAC5BxS,KAAK+M,SAAS/M,KAAK2R,OAASc,EAG5BzS,KAAK+M,SAAS/M,KAAK2R,OAASgB,EAC5B3S,KAAK+M,SAAS/M,KAAK2R,OAASoB,EAE5B/S,KAAK+M,SAAS/M,KAAK2R,OAAS9F,EAE5B7L,KAAK+M,SAAS/M,KAAK2R,OAASM,EAC5BjS,KAAK+M,SAAS/M,KAAK2R,OAASc,EAG5BzS,KAAK+M,SAAS/M,KAAK2R,OAASiB,EAC5B5S,KAAK+M,SAAS/M,KAAK2R,OAASqB,EAE5BhT,KAAK+M,SAAS/M,KAAK2R,OAAS9F,EAE5B7L,KAAK+M,SAAS/M,KAAK2R,OAASM,EAC5BjS,KAAK+M,SAAS/M,KAAK2R,OAASO,EAG5BlS,KAAK+M,SAAS/M,KAAK2R,OAASkB,EAC5B7S,KAAK+M,SAAS/M,KAAK2R,OAASsB,EAE5BjT,KAAK+M,SAAS/M,KAAK2R,OAAS9F,EAE5B7L,KAAK+M,SAAS/M,KAAK2R,OAASa,EAC5BxS,KAAK+M,SAAS/M,KAAK2R,OAASO,IAkB7B2B,aAAc,SAAS/V,EAASgW,EAAOC,GACtC,IAAK/T,KAAKwQ,QACT,KAAM,uDAGF1S,IAEDkC,KAAKlC,SAAWA,GAEnBkC,KAAK6Q,QACL7Q,KAAKlC,QAAUA,GACLkC,KAAK2R,KAAO3R,KAAK+M,SAASpN,QACpCK,KAAK6Q,QAGNkD,EAAMA,GAAO,EAGb/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAClC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAElC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAElC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAClC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAGlC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAClC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAElC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAElC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAClC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAGlC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAClC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAElC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAElC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAClC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAGlC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAClC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAElC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAElC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,KAClC/T,KAAK+M,SAAS/M,KAAK2R,OAASmC,EAAMC,SAYpCjE,EAAYK,YAAc,EAiB1BL,EAAY8B,iBAAmB,EAE/B9B,EAAYmB,oBAAsB,CACjC,2BACA,2BACA,uBACA,gCAEA,oBACA,gEACA,KACC+C,KAAK,MAEPlE,EAAYkB,oBAAsB,CACjC,kBAAoBrB,EAAcU,mBAAqB,IACvD,kBAAoBV,EAAcW,gBAAkB,IACpD,kBAAoBX,EAAcY,mBAAqB,KAEvD,6BACA,2BACA,uBAEA,oBACA,oCAAsCZ,EAAcU,mBAAqB,IACzE,mBAAqBV,EAAcY,mBAAqB,KACxD,eAAiBZ,EAAcW,gBAAkB,IACjD,0CACA,KACC0D,KAAK,MAEPtX,EAAOC,QAAUmT,G,wFChhBImE,E,WACnB,WAAYC,GAAQ,+BAClBlU,KAAKkU,OAASA,EACdlU,KAAKmU,MAAQ,EACbnU,KAAKoU,MAAQ,EACbpU,KAAKqU,SAAU,EACf,IAAMC,EAAUtU,KAAKsU,QAAU,IAAI7K,eAEnCzJ,KAAKuU,iBAAmB,SAAAC,GACtB,EAAKH,SAAU,EACf,EAAKI,WAAWD,GAChBF,EAAQI,KAAK,aAAc,EAAKC,OAAQ,EAAKC,SAG/C5U,KAAK6U,eAAiB,SAAAL,GACpB,EAAKH,SAAU,EACfC,EAAQI,KAAK,aAGf1U,KAAK8U,iBAAmB,SAAAN,GACtB,EAAKC,WAAWD,GAChBF,EAAQI,KAAK,YAAa,EAAKC,OAAQ,EAAKC,SAG9C5U,KAAK+U,kBAAoB,SAAAP,GACvBA,EAAIQ,iBAEJ,IAAIC,EAAQT,EAAIU,QAAQ,GACxB,EAAKhB,OAAOiB,cAAc,IAAIC,WAAW,YAAa,CACpDC,QAASJ,EAAMI,QACfC,QAASL,EAAMK,YAInBtV,KAAKuV,gBAAkB,SAAAf,GACrBA,EAAIQ,iBACJ,EAAKd,OAAOiB,cAAc,IAAIC,WAAW,aAG3CpV,KAAKwV,iBAAmB,SAAAhB,GACtBA,EAAIQ,iBACJ,IAAIC,EAAQT,EAAIU,QAAQ,GACxB,EAAKhB,OAAOiB,cAAc,IAAIC,WAAW,YAAa,CACpDC,QAASJ,EAAMI,QACfC,QAASL,EAAMK,YAInBtV,KAAKkU,OAAOuB,iBAAiB,YAAazV,KAAKuU,kBAAkB,GACjEvU,KAAKkU,OAAOuB,iBAAiB,UAAWzV,KAAK6U,gBAAgB,GAC7D7U,KAAKkU,OAAOuB,iBAAiB,YAAazV,KAAK8U,kBAAkB,GACjE9U,KAAKkU,OAAOuB,iBAAiB,aAAczV,KAAK+U,mBAAmB,GACnE/U,KAAKkU,OAAOuB,iBAAiB,WAAYzV,KAAKuV,iBAAiB,GAC/DvV,KAAKkU,OAAOuB,iBAAiB,YAAazV,KAAKwV,kBAAkB,G,sDAIjExV,KAAKkU,OAAOwB,oBAAoB,YAAa1V,KAAKuU,kBAClDvU,KAAKkU,OAAOwB,oBAAoB,UAAW1V,KAAK6U,gBAChD7U,KAAKkU,OAAOwB,oBAAoB,YAAa1V,KAAK8U,kBAClD9U,KAAKkU,OAAOwB,oBAAoB,aAAc1V,KAAK+U,mBACnD/U,KAAKkU,OAAOwB,oBAAoB,WAAY1V,KAAKuV,iBACjDvV,KAAKkU,OAAOwB,oBAAoB,YAAa1V,KAAKwV,oB,uCAGnCG,EAAOtK,GACtBrL,KAAKsU,QAAQsB,YAAYD,EAAOtK,K,iCAGvBmJ,GACT,IAAMqB,EAAO7V,KAAKkU,OAAO4B,wBACnBrF,EAAI+D,EAAIa,QAAUQ,EAAKE,KACvBpF,EAAI6D,EAAIc,QAAUO,EAAKG,IAC7BhW,KAAKmU,MAAQ1D,EACbzQ,KAAKoU,MAAQzD,I,6BAIb,OAAO3Q,KAAKmU,Q,6BAIZ,OAAOnU,KAAKoU,Q,kCAIZ,OAAOpU,KAAKqU,Y,uFCvFK4B,E,WACnB,WAAYC,EAAKzF,EAAGE,EAAG3O,EAAOC,EAAQkU,EAAWC,EAAaC,GAAc,oBACrED,GAAgBC,IACnBD,EAAc,EAAIF,EAAIlU,MACtBqU,EAAe,EAAIH,EAAIjU,QAGzB,IAAM8P,EAAItB,EAAI2F,EACRpE,EAAIrB,EAAI0F,EACRpE,GAAMxB,EAAIzO,GAASoU,EACnBlE,GAAMvB,EAAI1O,GAAUoU,EAW1B,IAAK,IAAIvZ,KAVTkD,KAAKlC,QAAUoY,EACflW,KAAKyQ,EAAIA,EACTzQ,KAAK2Q,EAAIA,EACT3Q,KAAKgC,MAAQA,EACbhC,KAAKiC,OAASA,EACdjC,KAAK+R,EAAIA,EACT/R,KAAKgS,EAAIA,EACThS,KAAKiS,GAAKA,EACVjS,KAAKkS,GAAKA,EAEMiE,EACdnW,KAAKlD,GAAOqZ,EAAUrZ,G,iDAIrBwZ,EAAO7F,EAAGE,EAAG3O,EAAOC,GAAwE,IAAhEkQ,EAAgE,uDAAtD,EAAGC,EAAmD,uDAAzC,EAAGC,EAAsC,uDAA3B,EAAGC,EAAwB,uDAAf,EAAGC,EAAY,uDAAH,EAC5F+D,EAAM/H,KAAKvO,KAAKlC,QAAS2S,EAAGE,EAAG3O,EAAOC,EAAQkQ,EAASC,EAASC,EAAUC,EAAQC,EAAQvS,KAAK+R,EAAG/R,KAAKgS,EAAGhS,KAAKiS,GAAIjS,KAAKkS,Q,whECtBrH,IAAIqE,EAAU,KACVC,EAAqC,qBAAjB5N,aAA+BA,aAAepJ,MACzDwL,KAAKyL,OAUZzL,KAAK0L,GCLX,SAASxW,IACd,IAAIyW,EAAM,IAAIC,EAAoB,IAqBlC,OAnBIA,GAAuBhO,eACzB+N,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,GAGZA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EASF,SAASE,EAAMvN,GACpB,IAAIqN,EAAM,IAAIC,EAAoB,IAiBlC,OAhBAD,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACLqN,EAUF,SAASG,EAAKH,EAAKrN,GAiBxB,OAhBAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACLqN,EAwBF,SAASI,EAAWC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACpG,IAAIpB,EAAM,IAAIC,EAAoB,IAiBlC,OAhBAD,EAAI,GAAKK,EACTL,EAAI,GAAKM,EACTN,EAAI,GAAKO,EACTP,EAAI,GAAKQ,EACTR,EAAI,GAAKS,EACTT,EAAI,GAAKU,EACTV,EAAI,GAAKW,EACTX,EAAI,GAAKY,EACTZ,EAAI,GAAKa,EACTb,EAAI,GAAKc,EACTd,EAAI,IAAMe,EACVf,EAAI,IAAMgB,EACVhB,EAAI,IAAMiB,EACVjB,EAAI,IAAMkB,EACVlB,EAAI,IAAMmB,EACVnB,EAAI,IAAMoB,EACHpB,EAyBF,SAASjY,EAAIiY,EAAKK,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAiBlG,OAhBApB,EAAI,GAAKK,EACTL,EAAI,GAAKM,EACTN,EAAI,GAAKO,EACTP,EAAI,GAAKQ,EACTR,EAAI,GAAKS,EACTT,EAAI,GAAKU,EACTV,EAAI,GAAKW,EACTX,EAAI,GAAKY,EACTZ,EAAI,GAAKa,EACTb,EAAI,GAAKc,EACTd,EAAI,IAAMe,EACVf,EAAI,IAAMgB,EACVhB,EAAI,IAAMiB,EACVjB,EAAI,IAAMkB,EACVlB,EAAI,IAAMmB,EACVnB,EAAI,IAAMoB,EACHpB,EASF,SAASqB,EAASrB,GAiBvB,OAhBAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAUF,SAASsB,EAAUtB,EAAKrN,GAE7B,GAAIqN,IAAQrN,EAAG,CACb,IAAI4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRiP,EAAMjP,EAAE,IACZqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,IACXqN,EAAI,GAAKuB,EACTvB,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,IACXqN,EAAI,GAAKwB,EACTxB,EAAI,GAAK0B,EACT1B,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMyB,EACVzB,EAAI,IAAM2B,EACV3B,EAAI,IAAM4B,OAEV5B,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,IACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,IACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IAGd,OAAOqN,EAUF,SAAS6B,EAAO7B,EAAKrN,GAC1B,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRyP,EAAMzP,EAAE,IACR0P,EAAM1P,EAAE,IACR2P,EAAM3P,EAAE,IACR4P,EAAM5P,EAAE,IACR6P,EAAMV,EAAME,EAAMT,EAAMQ,EACxBU,EAAMX,EAAMJ,EAAMF,EAAMO,EACxBW,EAAMZ,EAAMH,EAAMF,EAAMM,EACxBY,EAAMpB,EAAMG,EAAMF,EAAMQ,EACxBY,EAAMrB,EAAMI,EAAMF,EAAMO,EACxBa,EAAMrB,EAAMG,EAAMF,EAAMC,EACxBoB,EAAMb,EAAMI,EAAMH,EAAME,EACxBW,EAAMd,EAAMK,EAAMH,EAAMC,EACxBY,EAAMf,EAAMM,EAAMX,EAAMQ,EACxBa,EAAMf,EAAMI,EAAMH,EAAME,EACxBa,EAAMhB,EAAMK,EAAMX,EAAMS,EACxBc,EAAMhB,EAAMI,EAAMX,EAAMU,EAExBc,EAAMZ,EAAMW,EAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EAE5E,OAAKM,GAILA,EAAM,EAAMA,EACZpD,EAAI,IAAMgC,EAAMmB,EAAMzB,EAAMwB,EAAMvB,EAAMsB,GAAOG,EAC/CpD,EAAI,IAAMwB,EAAM0B,EAAM3B,EAAM4B,EAAM1B,EAAMwB,GAAOG,EAC/CpD,EAAI,IAAMqC,EAAMQ,EAAMP,EAAMM,EAAML,EAAMI,GAAOS,EAC/CpD,EAAI,IAAMmC,EAAMS,EAAMV,EAAMW,EAAMjB,EAAMe,GAAOS,EAC/CpD,EAAI,IAAM0B,EAAMsB,EAAMjB,EAAMoB,EAAMxB,EAAMoB,GAAOK,EAC/CpD,EAAI,IAAM8B,EAAMqB,EAAM3B,EAAMwB,EAAMvB,EAAMsB,GAAOK,EAC/CpD,EAAI,IAAMsC,EAAMI,EAAMN,EAAMS,EAAMN,EAAME,GAAOW,EAC/CpD,EAAI,IAAMiC,EAAMY,EAAMV,EAAMO,EAAMd,EAAMa,GAAOW,EAC/CpD,EAAI,IAAM+B,EAAMmB,EAAMlB,EAAMgB,EAAMrB,EAAMmB,GAAOM,EAC/CpD,EAAI,IAAMuB,EAAMyB,EAAMlB,EAAMoB,EAAMzB,EAAMqB,GAAOM,EAC/CpD,EAAI,KAAOoC,EAAMQ,EAAMP,EAAMK,EAAMH,EAAMC,GAAOY,EAChDpD,EAAI,KAAOkC,EAAMQ,EAAMT,EAAMW,EAAMhB,EAAMY,GAAOY,EAChDpD,EAAI,KAAOgC,EAAMe,EAAMhB,EAAMkB,EAAMvB,EAAMoB,GAAOM,EAChDpD,EAAI,KAAO8B,EAAMmB,EAAM1B,EAAMwB,EAAMvB,EAAMsB,GAAOM,EAChDpD,EAAI,KAAOqC,EAAMI,EAAML,EAAMO,EAAML,EAAME,GAAOY,EAChDpD,EAAI,KAAOiC,EAAMU,EAAMT,EAAMO,EAAMN,EAAMK,GAAOY,EACzCpD,GApBE,KA8BJ,SAASqD,EAAQrD,EAAKrN,GAC3B,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRyP,EAAMzP,EAAE,IACR0P,EAAM1P,EAAE,IACR2P,EAAM3P,EAAE,IACR4P,EAAM5P,EAAE,IAiBZ,OAhBAqN,EAAI,GAAKgC,GAAOG,EAAMI,EAAMX,EAAMU,GAAOJ,GAAOR,EAAMa,EAAMZ,EAAMW,GAAOD,GAAOX,EAAME,EAAMD,EAAMQ,GAClGnC,EAAI,KAAOuB,GAAOY,EAAMI,EAAMX,EAAMU,GAAOJ,GAAOV,EAAMe,EAAMd,EAAMa,GAAOD,GAAOb,EAAMI,EAAMH,EAAMU,IACpGnC,EAAI,GAAKuB,GAAOG,EAAMa,EAAMZ,EAAMW,GAAON,GAAOR,EAAMe,EAAMd,EAAMa,GAAOD,GAAOb,EAAMG,EAAMF,EAAMC,GAClG1B,EAAI,KAAOuB,GAAOG,EAAME,EAAMD,EAAMQ,GAAOH,GAAOR,EAAMI,EAAMH,EAAMU,GAAOD,GAAOV,EAAMG,EAAMF,EAAMC,IACpG1B,EAAI,KAAO+B,GAAOI,EAAMI,EAAMX,EAAMU,GAAOL,GAAOP,EAAMa,EAAMZ,EAAMW,GAAOF,GAAOV,EAAME,EAAMD,EAAMQ,IACpGnC,EAAI,GAAK8B,GAAOK,EAAMI,EAAMX,EAAMU,GAAOL,GAAOT,EAAMe,EAAMd,EAAMa,GAAOF,GAAOZ,EAAMI,EAAMH,EAAMU,GAClGnC,EAAI,KAAO8B,GAAOJ,EAAMa,EAAMZ,EAAMW,GAAOP,GAAOP,EAAMe,EAAMd,EAAMa,GAAOF,GAAOZ,EAAMG,EAAMF,EAAMC,IACpG1B,EAAI,GAAK8B,GAAOJ,EAAME,EAAMD,EAAMQ,GAAOJ,GAAOP,EAAMI,EAAMH,EAAMU,GAAOF,GAAOT,EAAMG,EAAMF,EAAMC,GAClG1B,EAAI,GAAK+B,GAAOG,EAAMK,EAAMX,EAAMS,GAAOJ,GAAOD,EAAMO,EAAMZ,EAAMU,GAAOD,GAAOJ,EAAMJ,EAAMD,EAAMO,GAClGlC,EAAI,KAAO8B,GAAOI,EAAMK,EAAMX,EAAMS,GAAOJ,GAAOV,EAAMgB,EAAMd,EAAMY,GAAOD,GAAOb,EAAMK,EAAMH,EAAMS,IACpGlC,EAAI,IAAM8B,GAAOE,EAAMO,EAAMZ,EAAMU,GAAON,GAAOR,EAAMgB,EAAMd,EAAMY,GAAOD,GAAOb,EAAMI,EAAMF,EAAMO,GACnGhC,EAAI,MAAQ8B,GAAOE,EAAMJ,EAAMD,EAAMO,GAAOH,GAAOR,EAAMK,EAAMH,EAAMS,GAAOD,GAAOV,EAAMI,EAAMF,EAAMO,IACrGhC,EAAI,MAAQ+B,GAAOG,EAAMI,EAAMH,EAAME,GAAOJ,GAAOD,EAAMM,EAAMZ,EAAMW,GAAOD,GAAOJ,EAAMG,EAAMT,EAAMQ,IACrGlC,EAAI,IAAM8B,GAAOI,EAAMI,EAAMH,EAAME,GAAOJ,GAAOV,EAAMe,EAAMd,EAAMa,GAAOD,GAAOb,EAAMY,EAAMX,EAAMU,GACnGlC,EAAI,MAAQ8B,GAAOE,EAAMM,EAAMZ,EAAMW,GAAON,GAAOR,EAAMe,EAAMd,EAAMa,GAAOD,GAAOb,EAAMG,EAAMF,EAAMQ,IACrGhC,EAAI,IAAM8B,GAAOE,EAAMG,EAAMT,EAAMQ,GAAOH,GAAOR,EAAMY,EAAMX,EAAMU,GAAOD,GAAOV,EAAMG,EAAMF,EAAMQ,GAC5FhC,EASF,SAASsD,EAAY3Q,GAC1B,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRyP,EAAMzP,EAAE,IACR0P,EAAM1P,EAAE,IACR2P,EAAM3P,EAAE,IACR4P,EAAM5P,EAAE,IAcZ,OAbUmP,EAAME,EAAMT,EAAMQ,IAWlBI,EAAMI,EAAMX,EAAMU,IAVlBR,EAAMJ,EAAMF,EAAMO,IASlBG,EAAMK,EAAMX,EAAMS,IARlBP,EAAMH,EAAMF,EAAMM,IAOlBG,EAAMI,EAAMH,EAAME,IANlBd,EAAMG,EAAMF,EAAMQ,IAKlBC,EAAMM,EAAMX,EAAMQ,IAJlBb,EAAMI,EAAMF,EAAMO,IAGlBC,EAAMK,EAAMH,EAAMC,IAFlBZ,EAAMG,EAAMF,EAAMC,IAClBO,EAAMI,EAAMH,EAAME,GAkBvB,SAASmB,EAASvD,EAAKrN,EAAGD,GAC/B,IAAIoP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRyP,EAAMzP,EAAE,IACR0P,EAAM1P,EAAE,IACR2P,EAAM3P,EAAE,IACR4P,EAAM5P,EAAE,IAER6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GA6BX,OA5BAsN,EAAI,GAAKwD,EAAK1B,EAAM2B,EAAK1B,EAAM2B,EAAKzB,EAAM0B,EAAKvB,EAC/CpC,EAAI,GAAKwD,EAAKjC,EAAMkC,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/CrC,EAAI,GAAKwD,EAAKhC,EAAMiC,EAAK/B,EAAMgC,EAAKvB,EAAMwB,EAAKrB,EAC/CtC,EAAI,GAAKwD,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAK9B,EAAM+B,EAAKpB,EAC/CiB,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GACPsN,EAAI,GAAKwD,EAAK1B,EAAM2B,EAAK1B,EAAM2B,EAAKzB,EAAM0B,EAAKvB,EAC/CpC,EAAI,GAAKwD,EAAKjC,EAAMkC,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/CrC,EAAI,GAAKwD,EAAKhC,EAAMiC,EAAK/B,EAAMgC,EAAKvB,EAAMwB,EAAKrB,EAC/CtC,EAAI,GAAKwD,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAK9B,EAAM+B,EAAKpB,EAC/CiB,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,IACPiR,EAAKjR,EAAE,IACPsN,EAAI,GAAKwD,EAAK1B,EAAM2B,EAAK1B,EAAM2B,EAAKzB,EAAM0B,EAAKvB,EAC/CpC,EAAI,GAAKwD,EAAKjC,EAAMkC,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/CrC,EAAI,IAAMwD,EAAKhC,EAAMiC,EAAK/B,EAAMgC,EAAKvB,EAAMwB,EAAKrB,EAChDtC,EAAI,IAAMwD,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAK9B,EAAM+B,EAAKpB,EAChDiB,EAAK9Q,EAAE,IACP+Q,EAAK/Q,EAAE,IACPgR,EAAKhR,EAAE,IACPiR,EAAKjR,EAAE,IACPsN,EAAI,IAAMwD,EAAK1B,EAAM2B,EAAK1B,EAAM2B,EAAKzB,EAAM0B,EAAKvB,EAChDpC,EAAI,IAAMwD,EAAKjC,EAAMkC,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAChDrC,EAAI,IAAMwD,EAAKhC,EAAMiC,EAAK/B,EAAMgC,EAAKvB,EAAMwB,EAAKrB,EAChDtC,EAAI,IAAMwD,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAK9B,EAAM+B,EAAKpB,EACzCvC,EAWF,SAAS4D,EAAU5D,EAAKrN,EAAG0I,GAChC,IAGIyG,EAAKP,EAAKC,EAAKC,EACfM,EAAKC,EAAKN,EAAKC,EACfM,EAAKC,EAAKC,EAAKP,EALf9H,EAAIuB,EAAE,GACNrB,EAAIqB,EAAE,GACNwI,EAAIxI,EAAE,GAyCV,OApCI1I,IAAMqN,GACRA,EAAI,IAAMrN,EAAE,GAAKmH,EAAInH,EAAE,GAAKqH,EAAIrH,EAAE,GAAKkR,EAAIlR,EAAE,IAC7CqN,EAAI,IAAMrN,EAAE,GAAKmH,EAAInH,EAAE,GAAKqH,EAAIrH,EAAE,GAAKkR,EAAIlR,EAAE,IAC7CqN,EAAI,IAAMrN,EAAE,GAAKmH,EAAInH,EAAE,GAAKqH,EAAIrH,EAAE,IAAMkR,EAAIlR,EAAE,IAC9CqN,EAAI,IAAMrN,EAAE,GAAKmH,EAAInH,EAAE,GAAKqH,EAAIrH,EAAE,IAAMkR,EAAIlR,EAAE,MAE9CmP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRqN,EAAI,GAAK8B,EACT9B,EAAI,GAAKuB,EACTvB,EAAI,GAAKwB,EACTxB,EAAI,GAAKyB,EACTzB,EAAI,GAAK+B,EACT/B,EAAI,GAAKgC,EACThC,EAAI,GAAK0B,EACT1B,EAAI,GAAK2B,EACT3B,EAAI,GAAKiC,EACTjC,EAAI,GAAKkC,EACTlC,EAAI,IAAMmC,EACVnC,EAAI,IAAM4B,EACV5B,EAAI,IAAM8B,EAAMhI,EAAIiI,EAAM/H,EAAIiI,EAAM4B,EAAIlR,EAAE,IAC1CqN,EAAI,IAAMuB,EAAMzH,EAAIkI,EAAMhI,EAAIkI,EAAM2B,EAAIlR,EAAE,IAC1CqN,EAAI,IAAMwB,EAAM1H,EAAI4H,EAAM1H,EAAImI,EAAM0B,EAAIlR,EAAE,IAC1CqN,EAAI,IAAMyB,EAAM3H,EAAI6H,EAAM3H,EAAI4H,EAAMiC,EAAIlR,EAAE,KAGrCqN,EAWF,SAAS8D,EAAM9D,EAAKrN,EAAG0I,GAC5B,IAAIvB,EAAIuB,EAAE,GACNrB,EAAIqB,EAAE,GACNwI,EAAIxI,EAAE,GAiBV,OAhBA2E,EAAI,GAAKrN,EAAE,GAAKmH,EAChBkG,EAAI,GAAKrN,EAAE,GAAKmH,EAChBkG,EAAI,GAAKrN,EAAE,GAAKmH,EAChBkG,EAAI,GAAKrN,EAAE,GAAKmH,EAChBkG,EAAI,GAAKrN,EAAE,GAAKqH,EAChBgG,EAAI,GAAKrN,EAAE,GAAKqH,EAChBgG,EAAI,GAAKrN,EAAE,GAAKqH,EAChBgG,EAAI,GAAKrN,EAAE,GAAKqH,EAChBgG,EAAI,GAAKrN,EAAE,GAAKkR,EAChB7D,EAAI,GAAKrN,EAAE,GAAKkR,EAChB7D,EAAI,IAAMrN,EAAE,IAAMkR,EAClB7D,EAAI,IAAMrN,EAAE,IAAMkR,EAClB7D,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACLqN,EAYF,SAAS+D,EAAO/D,EAAKrN,EAAGqR,EAAKC,GAClC,IAII9V,EAAG+G,EAAG9G,EACN0T,EAAKP,EAAKC,EAAKC,EACfM,EAAKC,EAAKN,EAAKC,EACfM,EAAKC,EAAKC,EAAKP,EACfY,EAAKC,EAAKC,EACVQ,EAAKC,EAAKe,EACVC,EAAKC,EAAKC,EAVVvK,EAAImK,EAAK,GACTjK,EAAIiK,EAAK,GACTJ,EAAII,EAAK,GACTK,EAAMjQ,KAAKkQ,MAAMzK,EAAGE,EAAG6J,GAS3B,OAAIS,EAAMrE,EACD,MAITnG,GADAwK,EAAM,EAAIA,EAEVtK,GAAKsK,EACLT,GAAKS,EACLnW,EAAIkG,KAAKoI,IAAIuH,GAEb5V,EAAI,GADJ8G,EAAIb,KAAKmI,IAAIwH,IAEblC,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IAER6P,EAAM1I,EAAIA,EAAI1L,EAAI8G,EAClBuN,EAAMzI,EAAIF,EAAI1L,EAAIyV,EAAI1V,EACtBuU,EAAMmB,EAAI/J,EAAI1L,EAAI4L,EAAI7L,EACtB+U,EAAMpJ,EAAIE,EAAI5L,EAAIyV,EAAI1V,EACtBgV,EAAMnJ,EAAIA,EAAI5L,EAAI8G,EAClBgP,EAAML,EAAI7J,EAAI5L,EAAI0L,EAAI3L,EACtBgW,EAAMrK,EAAI+J,EAAIzV,EAAI4L,EAAI7L,EACtBiW,EAAMpK,EAAI6J,EAAIzV,EAAI0L,EAAI3L,EACtBkW,EAAMR,EAAIA,EAAIzV,EAAI8G,EAElB8K,EAAI,GAAK8B,EAAMU,EAAMT,EAAMU,EAAMR,EAAMS,EACvC1C,EAAI,GAAKuB,EAAMiB,EAAMR,EAAMS,EAAMP,EAAMQ,EACvC1C,EAAI,GAAKwB,EAAMgB,EAAMd,EAAMe,EAAMN,EAAMO,EACvC1C,EAAI,GAAKyB,EAAMe,EAAMb,EAAMc,EAAMb,EAAMc,EACvC1C,EAAI,GAAK8B,EAAMoB,EAAMnB,EAAMoB,EAAMlB,EAAMiC,EACvClE,EAAI,GAAKuB,EAAM2B,EAAMlB,EAAMmB,EAAMjB,EAAMgC,EACvClE,EAAI,GAAKwB,EAAM0B,EAAMxB,EAAMyB,EAAMhB,EAAM+B,EACvClE,EAAI,GAAKyB,EAAMyB,EAAMvB,EAAMwB,EAAMvB,EAAMsC,EACvClE,EAAI,GAAK8B,EAAMqC,EAAMpC,EAAMqC,EAAMnC,EAAMoC,EACvCrE,EAAI,GAAKuB,EAAM4C,EAAMnC,EAAMoC,EAAMlC,EAAMmC,EACvCrE,EAAI,IAAMwB,EAAM2C,EAAMzC,EAAM0C,EAAMjC,EAAMkC,EACxCrE,EAAI,IAAMyB,EAAM0C,EAAMxC,EAAMyC,EAAMxC,EAAMyC,EAEpC1R,IAAMqN,IAERA,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,KAGPqN,GAWF,SAASwE,EAAQxE,EAAKrN,EAAGqR,GAC9B,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GACbjC,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IAuBZ,OArBIA,IAAMqN,IAERA,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,KAIdqN,EAAI,GAAK+B,EAAM7M,EAAI+M,EAAM9T,EACzB6R,EAAI,GAAKgC,EAAM9M,EAAIgN,EAAM/T,EACzB6R,EAAI,GAAK0B,EAAMxM,EAAIiN,EAAMhU,EACzB6R,EAAI,GAAK2B,EAAMzM,EAAI0M,EAAMzT,EACzB6R,EAAI,GAAKiC,EAAM/M,EAAI6M,EAAM5T,EACzB6R,EAAI,GAAKkC,EAAMhN,EAAI8M,EAAM7T,EACzB6R,EAAI,IAAMmC,EAAMjN,EAAIwM,EAAMvT,EAC1B6R,EAAI,IAAM4B,EAAM1M,EAAIyM,EAAMxT,EACnB6R,EAWF,SAASyE,EAAQzE,EAAKrN,EAAGqR,GAC9B,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GACblC,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IAuBZ,OArBIA,IAAMqN,IAERA,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,KAIdqN,EAAI,GAAK8B,EAAM5M,EAAI+M,EAAM9T,EACzB6R,EAAI,GAAKuB,EAAMrM,EAAIgN,EAAM/T,EACzB6R,EAAI,GAAKwB,EAAMtM,EAAIiN,EAAMhU,EACzB6R,EAAI,GAAKyB,EAAMvM,EAAI0M,EAAMzT,EACzB6R,EAAI,GAAK8B,EAAM3T,EAAI8T,EAAM/M,EACzB8K,EAAI,GAAKuB,EAAMpT,EAAI+T,EAAMhN,EACzB8K,EAAI,IAAMwB,EAAMrT,EAAIgU,EAAMjN,EAC1B8K,EAAI,IAAMyB,EAAMtT,EAAIyT,EAAM1M,EACnB8K,EAWF,SAAS0E,EAAQ1E,EAAKrN,EAAGqR,GAC9B,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GACblC,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GAuBZ,OArBIA,IAAMqN,IAERA,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,KAIdqN,EAAI,GAAK8B,EAAM5M,EAAI6M,EAAM5T,EACzB6R,EAAI,GAAKuB,EAAMrM,EAAI8M,EAAM7T,EACzB6R,EAAI,GAAKwB,EAAMtM,EAAIwM,EAAMvT,EACzB6R,EAAI,GAAKyB,EAAMvM,EAAIyM,EAAMxT,EACzB6R,EAAI,GAAK+B,EAAM7M,EAAI4M,EAAM3T,EACzB6R,EAAI,GAAKgC,EAAM9M,EAAIqM,EAAMpT,EACzB6R,EAAI,GAAK0B,EAAMxM,EAAIsM,EAAMrT,EACzB6R,EAAI,GAAK2B,EAAMzM,EAAIuM,EAAMtT,EAClB6R,EAcF,SAAS2E,EAAgB3E,EAAK3E,GAiBnC,OAhBA2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM,EACHA,EAcF,SAAS4E,EAAY5E,EAAK3E,GAiB/B,OAhBA2E,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAeF,SAAS6E,EAAa7E,EAAKgE,EAAKC,GACrC,IAII9V,EAAG+G,EAAG9G,EAJN0L,EAAImK,EAAK,GACTjK,EAAIiK,EAAK,GACTJ,EAAII,EAAK,GACTK,EAAMjQ,KAAKkQ,MAAMzK,EAAGE,EAAG6J,GAG3B,OAAIS,EAAMrE,EACD,MAITnG,GADAwK,EAAM,EAAIA,EAEVtK,GAAKsK,EACLT,GAAKS,EACLnW,EAAIkG,KAAKoI,IAAIuH,GAEb5V,EAAI,GADJ8G,EAAIb,KAAKmI,IAAIwH,IAGbhE,EAAI,GAAKlG,EAAIA,EAAI1L,EAAI8G,EACrB8K,EAAI,GAAKhG,EAAIF,EAAI1L,EAAIyV,EAAI1V,EACzB6R,EAAI,GAAK6D,EAAI/J,EAAI1L,EAAI4L,EAAI7L,EACzB6R,EAAI,GAAK,EACTA,EAAI,GAAKlG,EAAIE,EAAI5L,EAAIyV,EAAI1V,EACzB6R,EAAI,GAAKhG,EAAIA,EAAI5L,EAAI8G,EACrB8K,EAAI,GAAK6D,EAAI7J,EAAI5L,EAAI0L,EAAI3L,EACzB6R,EAAI,GAAK,EACTA,EAAI,GAAKlG,EAAI+J,EAAIzV,EAAI4L,EAAI7L,EACzB6R,EAAI,GAAKhG,EAAI6J,EAAIzV,EAAI0L,EAAI3L,EACzB6R,EAAI,IAAM6D,EAAIA,EAAIzV,EAAI8G,EACtB8K,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,GAcF,SAAS8E,EAAc9E,EAAKgE,GACjC,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAkBjB,OAhBAhE,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK9K,EACT8K,EAAI,GAAK7R,EACT6R,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM7R,EACV6R,EAAI,IAAM9K,EACV8K,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAcF,SAAS+E,EAAc/E,EAAKgE,GACjC,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAkBjB,OAhBAhE,EAAI,GAAK9K,EACT8K,EAAI,GAAK,EACTA,EAAI,IAAM7R,EACV6R,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK7R,EACT6R,EAAI,GAAK,EACTA,EAAI,IAAM9K,EACV8K,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAcF,SAASgF,EAAchF,EAAKgE,GACjC,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAkBjB,OAhBAhE,EAAI,GAAK9K,EACT8K,EAAI,GAAK7R,EACT6R,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM7R,EACV6R,EAAI,GAAK9K,EACT8K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAkBF,SAASiF,EAAwBjF,EAAKkF,EAAG7J,GAE9C,IAAIvB,EAAIoL,EAAE,GACNlL,EAAIkL,EAAE,GACNrB,EAAIqB,EAAE,GACNC,EAAID,EAAE,GACNlJ,EAAKlC,EAAIA,EACTsC,EAAKpC,EAAIA,EACToL,EAAKvB,EAAIA,EACTwB,EAAKvL,EAAIkC,EACTsJ,EAAKxL,EAAIsC,EACTmJ,EAAKzL,EAAIsL,EACTI,EAAKxL,EAAIoC,EACTqJ,EAAKzL,EAAIoL,EACTM,EAAK7B,EAAIuB,EACTO,EAAKR,EAAInJ,EACT4J,EAAKT,EAAI/I,EACTyJ,EAAKV,EAAIC,EAiBb,OAhBApF,EAAI,GAAK,GAAKwF,EAAKE,GACnB1F,EAAI,GAAKsF,EAAKO,EACd7F,EAAI,GAAKuF,EAAKK,EACd5F,EAAI,GAAK,EACTA,EAAI,GAAKsF,EAAKO,EACd7F,EAAI,GAAK,GAAKqF,EAAKK,GACnB1F,EAAI,GAAKyF,EAAKE,EACd3F,EAAI,GAAK,EACTA,EAAI,GAAKuF,EAAKK,EACd5F,EAAI,GAAKyF,EAAKE,EACd3F,EAAI,IAAM,GAAKqF,EAAKG,GACpBxF,EAAI,IAAM,EACVA,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM,EACHA,EAUF,SAAS8F,EAAU9F,EAAKrN,GAC7B,IAAIoT,EAAc,IAAI9F,EAAoB,GACtC+F,GAAMrT,EAAE,GACRsT,GAAMtT,EAAE,GACRuT,GAAMvT,EAAE,GACRwT,EAAKxT,EAAE,GACPyT,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACP6T,EAAYR,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EAanD,OAXIK,EAAY,GACdT,EAAY,GAA+C,GAAzCK,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,GAAUO,EAC/DT,EAAY,GAA+C,GAAzCM,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,GAAUM,EAC/DT,EAAY,GAA+C,GAAzCO,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,GAAUQ,IAE/DT,EAAY,GAA+C,GAAzCK,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,GACrDF,EAAY,GAA+C,GAAzCM,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,GACrDH,EAAY,GAA+C,GAAzCO,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,IAGvDf,EAAwBjF,EAAKrN,EAAGoT,GACzB/F,EAYF,SAASyG,EAAezG,EAAK0G,GAIlC,OAHA1G,EAAI,GAAK0G,EAAI,IACb1G,EAAI,GAAK0G,EAAI,IACb1G,EAAI,GAAK0G,EAAI,IACN1G,EAaF,SAAS2G,EAAW3G,EAAK0G,GAC9B,IAAIhG,EAAMgG,EAAI,GACV/F,EAAM+F,EAAI,GACV9F,EAAM8F,EAAI,GACV5F,EAAM4F,EAAI,GACV3F,EAAM2F,EAAI,GACV1F,EAAM0F,EAAI,GACVxF,EAAMwF,EAAI,GACVvF,EAAMuF,EAAI,GACVtF,EAAMsF,EAAI,IAId,OAHA1G,EAAI,GAAK3L,KAAKkQ,MAAM7D,EAAKC,EAAKC,GAC9BZ,EAAI,GAAK3L,KAAKkQ,MAAMzD,EAAKC,EAAKC,GAC9BhB,EAAI,GAAK3L,KAAKkQ,MAAMrD,EAAKC,EAAKC,GACvBpB,EAYF,SAAS4G,EAAY5G,EAAK0G,GAC/B,IAAIG,EAAU,IAAI5G,EAAoB,GACtC0G,EAAWE,EAASH,GACpB,IAAII,EAAM,EAAID,EAAQ,GAClBE,EAAM,EAAIF,EAAQ,GAClBG,EAAM,EAAIH,EAAQ,GAClBI,EAAOP,EAAI,GAAKI,EAChBI,EAAOR,EAAI,GAAKK,EAChBI,EAAOT,EAAI,GAAKM,EAChBI,EAAOV,EAAI,GAAKI,EAChBO,EAAOX,EAAI,GAAKK,EAChBO,EAAOZ,EAAI,GAAKM,EAChBO,EAAOb,EAAI,GAAKI,EAChBU,EAAOd,EAAI,GAAKK,EAChBU,EAAOf,EAAI,IAAMM,EACjBU,EAAQT,EAAOI,EAAOI,EACtBE,EAAI,EA4BR,OA1BID,EAAQ,GACVC,EAA6B,EAAzBtT,KAAKuT,KAAKF,EAAQ,GACtB1H,EAAI,GAAK,IAAO2H,EAChB3H,EAAI,IAAMsH,EAAOE,GAAQG,EACzB3H,EAAI,IAAMuH,EAAOJ,GAAQQ,EACzB3H,EAAI,IAAMkH,EAAOE,GAAQO,GAChBV,EAAOI,GAAQJ,EAAOQ,GAC/BE,EAA0C,EAAtCtT,KAAKuT,KAAK,EAAMX,EAAOI,EAAOI,GAClCzH,EAAI,IAAMsH,EAAOE,GAAQG,EACzB3H,EAAI,GAAK,IAAO2H,EAChB3H,EAAI,IAAMkH,EAAOE,GAAQO,EACzB3H,EAAI,IAAMuH,EAAOJ,GAAQQ,GAChBN,EAAOI,GAChBE,EAA0C,EAAtCtT,KAAKuT,KAAK,EAAMP,EAAOJ,EAAOQ,GAClCzH,EAAI,IAAMuH,EAAOJ,GAAQQ,EACzB3H,EAAI,IAAMkH,EAAOE,GAAQO,EACzB3H,EAAI,GAAK,IAAO2H,EAChB3H,EAAI,IAAMsH,EAAOE,GAAQG,IAEzBA,EAA0C,EAAtCtT,KAAKuT,KAAK,EAAMH,EAAOR,EAAOI,GAClCrH,EAAI,IAAMkH,EAAOE,GAAQO,EACzB3H,EAAI,IAAMuH,EAAOJ,GAAQQ,EACzB3H,EAAI,IAAMsH,EAAOE,GAAQG,EACzB3H,EAAI,GAAK,IAAO2H,GAGX3H,EAoBF,SAAS6H,EAA6B7H,EAAKkF,EAAG7J,EAAGlN,GAEtD,IAAI2L,EAAIoL,EAAE,GACNlL,EAAIkL,EAAE,GACNrB,EAAIqB,EAAE,GACNC,EAAID,EAAE,GACNlJ,EAAKlC,EAAIA,EACTsC,EAAKpC,EAAIA,EACToL,EAAKvB,EAAIA,EACTwB,EAAKvL,EAAIkC,EACTsJ,EAAKxL,EAAIsC,EACTmJ,EAAKzL,EAAIsL,EACTI,EAAKxL,EAAIoC,EACTqJ,EAAKzL,EAAIoL,EACTM,EAAK7B,EAAIuB,EACTO,EAAKR,EAAInJ,EACT4J,EAAKT,EAAI/I,EACTyJ,EAAKV,EAAIC,EACT0C,EAAK3Z,EAAE,GACP4Z,EAAK5Z,EAAE,GACP6Z,EAAK7Z,EAAE,GAiBX,OAhBA6R,EAAI,IAAM,GAAKwF,EAAKE,IAAOoC,EAC3B9H,EAAI,IAAMsF,EAAKO,GAAMiC,EACrB9H,EAAI,IAAMuF,EAAKK,GAAMkC,EACrB9H,EAAI,GAAK,EACTA,EAAI,IAAMsF,EAAKO,GAAMkC,EACrB/H,EAAI,IAAM,GAAKqF,EAAKK,IAAOqC,EAC3B/H,EAAI,IAAMyF,EAAKE,GAAMoC,EACrB/H,EAAI,GAAK,EACTA,EAAI,IAAMuF,EAAKK,GAAMoC,EACrBhI,EAAI,IAAMyF,EAAKE,GAAMqC,EACrBhI,EAAI,KAAO,GAAKqF,EAAKG,IAAOwC,EAC5BhI,EAAI,IAAM,EACVA,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM,EACHA,EAuBF,SAASiI,EAAmCjI,EAAKkF,EAAG7J,EAAGlN,EAAG+Z,GAE/D,IAAIpO,EAAIoL,EAAE,GACNlL,EAAIkL,EAAE,GACNrB,EAAIqB,EAAE,GACNC,EAAID,EAAE,GACNlJ,EAAKlC,EAAIA,EACTsC,EAAKpC,EAAIA,EACToL,EAAKvB,EAAIA,EACTwB,EAAKvL,EAAIkC,EACTsJ,EAAKxL,EAAIsC,EACTmJ,EAAKzL,EAAIsL,EACTI,EAAKxL,EAAIoC,EACTqJ,EAAKzL,EAAIoL,EACTM,EAAK7B,EAAIuB,EACTO,EAAKR,EAAInJ,EACT4J,EAAKT,EAAI/I,EACTyJ,EAAKV,EAAIC,EACT0C,EAAK3Z,EAAE,GACP4Z,EAAK5Z,EAAE,GACP6Z,EAAK7Z,EAAE,GACPga,EAAKD,EAAE,GACPE,EAAKF,EAAE,GACPG,EAAKH,EAAE,GACPI,GAAQ,GAAK9C,EAAKE,IAAOoC,EACzBS,GAAQjD,EAAKO,GAAMiC,EACnBU,GAAQjD,EAAKK,GAAMkC,EACnBW,GAAQnD,EAAKO,GAAMkC,EACnBW,GAAQ,GAAKrD,EAAKK,IAAOqC,EACzBY,GAAQlD,EAAKE,GAAMoC,EACnBa,GAAQrD,EAAKK,GAAMoC,EACnBa,GAAQpD,EAAKE,GAAMqC,EACnBc,GAAS,GAAKzD,EAAKG,IAAOwC,EAiB9B,OAhBAhI,EAAI,GAAKsI,EACTtI,EAAI,GAAKuI,EACTvI,EAAI,GAAKwI,EACTxI,EAAI,GAAK,EACTA,EAAI,GAAKyI,EACTzI,EAAI,GAAK0I,EACT1I,EAAI,GAAK2I,EACT3I,EAAI,GAAK,EACTA,EAAI,GAAK4I,EACT5I,EAAI,GAAK6I,EACT7I,EAAI,IAAM8I,EACV9I,EAAI,IAAM,EACVA,EAAI,IAAM3E,EAAE,GAAK8M,GAAMG,EAAOH,EAAKM,EAAOL,EAAKQ,EAAOP,GACtDrI,EAAI,IAAM3E,EAAE,GAAK+M,GAAMG,EAAOJ,EAAKO,EAAON,EAAKS,EAAOR,GACtDrI,EAAI,IAAM3E,EAAE,GAAKgN,GAAMG,EAAOL,EAAKQ,EAAOP,EAAKU,EAAQT,GACvDrI,EAAI,IAAM,EACHA,EAWF,SAAS+I,EAAS/I,EAAKkF,GAC5B,IAAIpL,EAAIoL,EAAE,GACNlL,EAAIkL,EAAE,GACNrB,EAAIqB,EAAE,GACNC,EAAID,EAAE,GACNlJ,EAAKlC,EAAIA,EACTsC,EAAKpC,EAAIA,EACToL,EAAKvB,EAAIA,EACTwB,EAAKvL,EAAIkC,EACTgN,EAAKhP,EAAIgC,EACTwJ,EAAKxL,EAAIoC,EACT6M,EAAKpF,EAAI7H,EACTkN,EAAKrF,EAAIzH,EACTsJ,EAAK7B,EAAIuB,EACTO,EAAKR,EAAInJ,EACT4J,EAAKT,EAAI/I,EACTyJ,EAAKV,EAAIC,EAiBb,OAhBApF,EAAI,GAAK,EAAIwF,EAAKE,EAClB1F,EAAI,GAAKgJ,EAAKnD,EACd7F,EAAI,GAAKiJ,EAAKrD,EACd5F,EAAI,GAAK,EACTA,EAAI,GAAKgJ,EAAKnD,EACd7F,EAAI,GAAK,EAAIqF,EAAKK,EAClB1F,EAAI,GAAKkJ,EAAKvD,EACd3F,EAAI,GAAK,EACTA,EAAI,GAAKiJ,EAAKrD,EACd5F,EAAI,GAAKkJ,EAAKvD,EACd3F,EAAI,IAAM,EAAIqF,EAAKG,EACnBxF,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAeF,SAASmJ,EAAQnJ,EAAKZ,EAAMgK,EAAOC,EAAQhK,EAAKiK,EAAMC,GAC3D,IAAIC,EAAK,GAAKJ,EAAQhK,GAClBqK,EAAK,GAAKpK,EAAMgK,GAChBK,EAAK,GAAKJ,EAAOC,GAiBrB,OAhBAvJ,EAAI,GAAY,EAAPsJ,EAAWE,EACpBxJ,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAY,EAAPsJ,EAAWG,EACpBzJ,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAMoJ,EAAQhK,GAAQoK,EAC1BxJ,EAAI,IAAMX,EAAMgK,GAAUI,EAC1BzJ,EAAI,KAAOuJ,EAAMD,GAAQI,EACzB1J,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAMuJ,EAAMD,EAAO,EAAII,EAC3B1J,EAAI,IAAM,EACHA,EAcF,SAAS2J,EAAY3J,EAAK4J,EAAMC,EAAQP,EAAMC,GACnD,IACIG,EADArX,EAAI,EAAMgC,KAAKyV,IAAIF,EAAO,GA0B9B,OAxBA5J,EAAI,GAAK3N,EAAIwX,EACb7J,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK3N,EACT2N,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EAEC,MAAPuJ,GAAeA,IAAQQ,KACzBL,EAAK,GAAKJ,EAAOC,GACjBvJ,EAAI,KAAOuJ,EAAMD,GAAQI,EACzB1J,EAAI,IAAM,EAAIuJ,EAAMD,EAAOI,IAE3B1J,EAAI,KAAO,EACXA,EAAI,KAAO,EAAIsJ,GAGVtJ,EAcF,SAASgK,EAA2BhK,EAAKiK,EAAKX,EAAMC,GACzD,IAAIW,EAAQ7V,KAAKyV,IAAIG,EAAIE,UAAY9V,KAAK0L,GAAK,KAC3CqK,EAAU/V,KAAKyV,IAAIG,EAAII,YAAchW,KAAK0L,GAAK,KAC/CuK,EAAUjW,KAAKyV,IAAIG,EAAIM,YAAclW,KAAK0L,GAAK,KAC/CyK,EAAWnW,KAAKyV,IAAIG,EAAIQ,aAAepW,KAAK0L,GAAK,KACjD2K,EAAS,GAAOJ,EAAUE,GAC1BG,EAAS,GAAOT,EAAQE,GAiB5B,OAhBApK,EAAI,GAAK0K,EACT1K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK2K,EACT3K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,KAAQsK,EAAUE,GAAYE,EAAS,GAC3C1K,EAAI,IAAMkK,EAAQE,GAAWO,EAAS,GACtC3K,EAAI,IAAMuJ,GAAOD,EAAOC,GACxBvJ,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAMuJ,EAAMD,GAAQA,EAAOC,GAC/BvJ,EAAI,IAAM,EACHA,EAeF,SAAS4K,EAAM5K,EAAKZ,EAAMgK,EAAOC,EAAQhK,EAAKiK,EAAMC,GACzD,IAAIsB,EAAK,GAAKzL,EAAOgK,GACjB0B,EAAK,GAAKzB,EAAShK,GACnBqK,EAAK,GAAKJ,EAAOC,GAiBrB,OAhBAvJ,EAAI,IAAM,EAAI6K,EACd7K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EAAI8K,EACd9K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EAAI0J,EACd1J,EAAI,IAAM,EACVA,EAAI,KAAOZ,EAAOgK,GAASyB,EAC3B7K,EAAI,KAAOX,EAAMgK,GAAUyB,EAC3B9K,EAAI,KAAOuJ,EAAMD,GAAQI,EACzB1J,EAAI,IAAM,EACHA,EAaF,SAAS+K,EAAO/K,EAAKgL,EAAKC,EAAQC,GACvC,IAAIC,EAAIpP,EAAIC,EAAIoP,EAAIjP,EAAIC,EAAIiP,EAAIC,EAAIlG,EAAId,EACpCiH,EAAOP,EAAI,GACXQ,EAAOR,EAAI,GACXS,EAAOT,EAAI,GACXU,EAAMR,EAAG,GACTS,EAAMT,EAAG,GACTU,EAAMV,EAAG,GACTW,EAAUZ,EAAO,GACjBa,EAAUb,EAAO,GACjBc,EAAUd,EAAO,GAErB,OAAI5W,KAAK2X,IAAIT,EAAOM,GAAW5L,GAAoB5L,KAAK2X,IAAIR,EAAOM,GAAW7L,GAAoB5L,KAAK2X,IAAIP,EAAOM,GAAW9L,EACpHoB,EAASrB,IAGlBqL,EAAKE,EAAOM,EACZP,EAAKE,EAAOM,EACZ1G,EAAKqG,EAAOM,EAKZZ,EAAKQ,GADLvG,GAHAd,EAAM,EAAIjQ,KAAKkQ,MAAM8G,EAAIC,EAAIlG,IAIbwG,GAFhBN,GAAMhH,GAGNvI,EAAK6P,GAJLP,GAAM/G,GAIUoH,EAAMtG,EACtBpJ,EAAK0P,EAAMJ,EAAKK,EAAMN,GACtB/G,EAAMjQ,KAAKkQ,MAAM4G,EAAIpP,EAAIC,KAQvBmP,GADA7G,EAAM,EAAIA,EAEVvI,GAAMuI,EACNtI,GAAMsI,IAPN6G,EAAK,EACLpP,EAAK,EACLC,EAAK,GAQPoP,EAAKE,EAAKtP,EAAKoJ,EAAKrJ,EACpBI,EAAKiJ,EAAK+F,EAAKE,EAAKrP,EACpBI,EAAKiP,EAAKtP,EAAKuP,EAAKH,GACpB7G,EAAMjQ,KAAKkQ,MAAM6G,EAAIjP,EAAIC,KAQvBgP,GADA9G,EAAM,EAAIA,EAEVnI,GAAMmI,EACNlI,GAAMkI,IAPN8G,EAAK,EACLjP,EAAK,EACLC,EAAK,GAQP4D,EAAI,GAAKmL,EACTnL,EAAI,GAAKoL,EACTpL,EAAI,GAAKqL,EACTrL,EAAI,GAAK,EACTA,EAAI,GAAKjE,EACTiE,EAAI,GAAK7D,EACT6D,EAAI,GAAKsL,EACTtL,EAAI,GAAK,EACTA,EAAI,GAAKhE,EACTgE,EAAI,GAAK5D,EACT4D,EAAI,IAAMoF,EACVpF,EAAI,IAAM,EACVA,EAAI,MAAQmL,EAAKI,EAAOxP,EAAKyP,EAAOxP,EAAKyP,GACzCzL,EAAI,MAAQoL,EAAKG,EAAOpP,EAAKqP,EAAOpP,EAAKqP,GACzCzL,EAAI,MAAQqL,EAAKE,EAAOD,EAAKE,EAAOpG,EAAKqG,GACzCzL,EAAI,IAAM,EACHA,GAYF,SAASiM,EAASjM,EAAKgL,EAAK7f,EAAQ+f,GACzC,IAAIK,EAAOP,EAAI,GACXQ,EAAOR,EAAI,GACXS,EAAOT,EAAI,GACXU,EAAMR,EAAG,GACTS,EAAMT,EAAG,GACTU,EAAMV,EAAG,GACTG,EAAKE,EAAOpgB,EAAO,GACnBmgB,EAAKE,EAAOrgB,EAAO,GACnBia,EAAKqG,EAAOtgB,EAAO,GACnBmZ,EAAM+G,EAAKA,EAAKC,EAAKA,EAAKlG,EAAKA,EAE/Bd,EAAM,IAER+G,GADA/G,EAAM,EAAIjQ,KAAKuT,KAAKtD,GAEpBgH,GAAMhH,EACNc,GAAMd,GAGR,IAAI6G,EAAKQ,EAAMvG,EAAKwG,EAAMN,EACtBvP,EAAK6P,EAAMP,EAAKK,EAAMtG,EACtBpJ,EAAK0P,EAAMJ,EAAKK,EAAMN,EA0B1B,OAzBA/G,EAAM6G,EAAKA,EAAKpP,EAAKA,EAAKC,EAAKA,GAErB,IAERmP,GADA7G,EAAM,EAAIjQ,KAAKuT,KAAKtD,GAEpBvI,GAAMuI,EACNtI,GAAMsI,GAGRtE,EAAI,GAAKmL,EACTnL,EAAI,GAAKjE,EACTiE,EAAI,GAAKhE,EACTgE,EAAI,GAAK,EACTA,EAAI,GAAKsL,EAAKtP,EAAKoJ,EAAKrJ,EACxBiE,EAAI,GAAKoF,EAAK+F,EAAKE,EAAKrP,EACxBgE,EAAI,GAAKqL,EAAKtP,EAAKuP,EAAKH,EACxBnL,EAAI,GAAK,EACTA,EAAI,GAAKqL,EACTrL,EAAI,GAAKsL,EACTtL,EAAI,IAAMoF,EACVpF,EAAI,IAAM,EACVA,EAAI,IAAMuL,EACVvL,EAAI,IAAMwL,EACVxL,EAAI,IAAMyL,EACVzL,EAAI,IAAM,EACHA,EAUF,SAASkM,EAAIvZ,GAClB,MAAO,QAAUA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,IAS3O,SAASwZ,EAAKxZ,GACnB,OAAO0B,KAAKkQ,MAAM5R,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAAKA,EAAE,IAAKA,EAAE,IAAKA,EAAE,IAAKA,EAAE,IAAKA,EAAE,KAWxG,SAASyZ,EAAIpM,EAAKrN,EAAGD,GAiB1B,OAhBAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACbsN,EAWF,SAASqM,EAASrM,EAAKrN,EAAGD,GAiB/B,OAhBAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACbsN,EAWF,SAASsM,EAAetM,EAAKrN,EAAGD,GAiBrC,OAhBAsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EACXsN,EAYF,SAASuM,EAAqBvM,EAAKrN,EAAGD,EAAGoR,GAiB9C,OAhBA9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EACnB9D,EAUF,SAASwM,EAAY7Z,EAAGD,GAC7B,OAAOC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,IAUvR,SAAS+Z,EAAO9Z,EAAGD,GACxB,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPma,EAAKna,EAAE,GACPoa,EAAKpa,EAAE,GACPqa,EAAKra,EAAE,GACPsa,EAAKta,EAAE,GACPua,EAAKva,EAAE,GACPwa,EAAKxa,EAAE,GACPoP,EAAMpP,EAAE,IACRqP,EAAMrP,EAAE,IACR+O,EAAM/O,EAAE,IACRgP,EAAMhP,EAAE,IACRya,EAAMza,EAAE,IACR0a,EAAM1a,EAAE,IACR6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GACP4a,EAAK5a,EAAE,GACP6a,EAAK7a,EAAE,GACP8a,EAAK9a,EAAE,GACP+a,EAAK/a,EAAE,GACPgb,EAAKhb,EAAE,GACPib,EAAKjb,EAAE,GACPwQ,EAAMxQ,EAAE,IACRyQ,EAAMzQ,EAAE,IACRwR,EAAMxR,EAAE,IACRkb,EAAMlb,EAAE,IACRmb,EAAMnb,EAAE,IACRob,EAAMpb,EAAE,IACZ,OAAO2B,KAAK2X,IAAIU,EAAKlJ,IAAOvD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIU,GAAKrY,KAAK2X,IAAIxI,KAAQnP,KAAK2X,IAAIW,EAAKlJ,IAAOxD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIW,GAAKtY,KAAK2X,IAAIvI,KAAQpP,KAAK2X,IAAIY,EAAKlJ,IAAOzD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIY,GAAKvY,KAAK2X,IAAItI,KAAQrP,KAAK2X,IAAIa,EAAKlJ,IAAO1D,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIa,GAAKxY,KAAK2X,IAAIrI,KAAQtP,KAAK2X,IAAIc,EAAKQ,IAAOrN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIc,GAAKzY,KAAK2X,IAAIsB,KAAQjZ,KAAK2X,IAAIe,EAAKQ,IAAOtN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIe,GAAK1Y,KAAK2X,IAAIuB,KAAQlZ,KAAK2X,IAAIgB,EAAKQ,IAAOvN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIgB,GAAK3Y,KAAK2X,IAAIwB,KAAQnZ,KAAK2X,IAAIiB,EAAKQ,IAAOxN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIiB,GAAK5Y,KAAK2X,IAAIyB,KAAQpZ,KAAK2X,IAAIkB,EAAKQ,IAAOzN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIkB,GAAK7Y,KAAK2X,IAAI0B,KAAQrZ,KAAK2X,IAAImB,EAAKQ,IAAO1N,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAImB,GAAK9Y,KAAK2X,IAAI2B,KAAQtZ,KAAK2X,IAAIjK,EAAMmB,IAAQjD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIjK,GAAM1N,KAAK2X,IAAI9I,KAAS7O,KAAK2X,IAAIhK,EAAMmB,IAAQlD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIhK,GAAM3N,KAAK2X,IAAI7I,KAAS9O,KAAK2X,IAAItK,EAAMwC,IAAQjE,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAItK,GAAMrN,KAAK2X,IAAI9H,KAAS7P,KAAK2X,IAAIrK,EAAMiM,IAAQ3N,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIrK,GAAMtN,KAAK2X,IAAI4B,KAASvZ,KAAK2X,IAAIoB,EAAMS,IAAQ5N,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIoB,GAAM/Y,KAAK2X,IAAI6B,KAASxZ,KAAK2X,IAAIqB,EAAMS,IAAQ7N,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIqB,GAAMhZ,KAAK2X,IAAI8B,IDjuDn2CzZ,KAAKkQ,QAAOlQ,KAAKkQ,MAAQ,WAI5B,IAHA,IAAIvK,EAAI,EACJjR,EAAIO,UAAUN,OAEXD,KACLiR,GAAK1Q,UAAUP,GAAKO,UAAUP,GAGhC,OAAOsL,KAAKuT,KAAK5N,KCguDZ,IAAI+T,EAAMxK,EAMNyK,EAAM3B,E,OC7vDJ4B,GAAY,SAACjO,EAAKkO,EAAMC,EAASC,EAAOC,EAAOC,EAAWC,GAAe,kBACpEL,EADoE,GAC/EpU,EAD+E,KAC5EE,EAD4E,KACzE6J,EADyE,KAQpF,OANA/J,GAAQsU,EACRpU,EAAIuU,EAAavU,EAAI,EACrBA,GAAQqU,EACRrO,EAAI,GAAK,EAAIlG,EAAIwU,EAAY,EAC7BtO,EAAI,GAAK,EAAIhG,EAAIuU,EAAa,EAC9BvO,EAAI,GAAK,EAAI6D,EAAI,EAhCI,SAAC7D,EAAKkO,EAAMhV,GAAS,kBACxBgV,EADwB,GACnCpU,EADmC,KAChCE,EADgC,KAC7B6J,EAD6B,KAEpC2K,EAAItV,EACJ4I,EAAM0M,EAAE,GACRjN,EAAMiN,EAAE,GACRhN,EAAMgN,EAAE,GACR/M,EAAM+M,EAAE,GACRzM,EAAMyM,EAAE,GACRxM,EAAMwM,EAAE,GACR9M,EAAM8M,EAAE,GACR7M,EAAM6M,EAAE,GACRvM,EAAMuM,EAAE,GACRtM,EAAMsM,EAAE,GACRrM,EAAMqM,EAAE,IACR5M,EAAM4M,EAAE,IACRpM,EAAMoM,EAAE,IACRnM,EAAMmM,EAAE,IACRlM,EAAMkM,EAAE,IAERC,EAAM,GAAK3U,EAAI2H,EAAMzH,EAAI2H,EAAMkC,EAAIjC,EAD7B4M,EAAE,KAKd,OAHAxO,EAAI,IAAMlG,EAAIgI,EAAM9H,EAAI+H,EAAM8B,EAAI5B,EAAMG,GAAOqM,EAC/CzO,EAAI,IAAMlG,EAAIyH,EAAMvH,EAAIgI,EAAM6B,EAAI3B,EAAMG,GAAOoM,EAC/CzO,EAAI,IAAMlG,EAAI0H,EAAMxH,EAAI0H,EAAMmC,EAAI1B,EAAMG,GAAOmM,EACxCzO,EAUA0O,CAAQ1O,EAAKA,EAAKmO,IC/BX,aAAC9iB,EAAOC,EAAQqjB,EAAeC,GAC7C,IAAMC,EAAW3V,EAAK3P,SACtB2P,EAAK0R,MAAMiE,EAAU,EAAGxjB,EAAOC,EAAQ,EAAG,EAAG,GAC7C,IAAMwjB,EAAW5V,EAAK3P,SACtB2P,EAAK2I,OAAOiN,EAAUD,GACtB,IAAME,EAAY7V,EAAK3P,SACjBylB,EAAO,CAAC,EAAG,EAAG,GACdC,EAAS,GACTC,EAAW,GACXC,EAAe,GACfC,EAAe,GACrB,MAAO,CACLP,WAEAQ,UAHK,SAGK3I,GACRxN,EAAKiH,KAAK0O,EAAUnI,GACpBxN,EAAK2I,OAAOiN,EAAUD,IAGxBS,iBARK,SAQYtP,EAAKuP,GACpBP,EAAK,GAAKO,EAAM,GAChBP,EAAK,GAAKO,EAAM,GAChBP,EAAK,GAAK,EACVf,GAAUe,EAAMA,EAAMF,EAAU,EAAG,EAAGH,EAAeC,GACrD5O,EAAI,GAAKgP,EAAK,GACdhP,EAAI,GAAKgP,EAAK,IAGhB3V,OAjBK,SAiBEhO,EAAOC,GACZ4N,EAAK0R,MAAMiE,EAAU,EAAGxjB,EAAOC,EAAQ,EAAG,EAAG,GAC7C4N,EAAK2I,OAAOiN,EAAUD,IAGxBjL,UAtBK,SAsBK9J,EAAGE,GACXoV,EAAapmB,OAAS,EACtBomB,EAAa,GAAKtV,EAClBsV,EAAa,GAAKpV,EAClBoV,EAAa,GAAK,EAClBlW,EAAK0K,UAAUiL,EAAUA,EAAUO,GACnClW,EAAK2I,OAAOiN,EAAUD,IAGxB/K,MA/BK,SA+BCtI,EAASC,EAASqI,GACtBmL,EAAOjmB,OAAS,EAChBimB,EAAO,GAAKzT,EACZyT,EAAO,GAAKxT,EACZwT,EAAO,GAAK,EACZC,EAASlmB,OAAS,EAClBkmB,EAAS,GAAKpL,EACdoL,EAAS,GAAKpL,EACdoL,EAAS,GAAK,EACdC,EAAanmB,OAAS,EACtBmmB,EAAa,IAAM3T,EACnB2T,EAAa,IAAM1T,EACnB0T,EAAa,GAAK,EAClBjW,EAAKmI,SAAS0N,GACd7V,EAAK0K,UAAUmL,EAAWA,EAAWE,GACrC/V,EAAK4K,MAAMiL,EAAWA,EAAWG,GACjChW,EAAK0K,UAAUmL,EAAWA,EAAWI,GACrCjW,EAAK6U,IAAIc,EAAUA,EAAUE,GAC7B7V,EAAK2I,OAAOiN,EAAUD,O,yBCvD5B,IAAIW,EAAW,SAAUxpB,GACvB,aAEA,IAEIoE,EAFAqlB,EAAKppB,OAAOiC,UACZonB,EAASD,EAAGpnB,eAEZsnB,EAA4B,oBAAX/lB,OAAwBA,OAAS,GAClDgmB,EAAiBD,EAAQ9lB,UAAY,aACrCgmB,EAAsBF,EAAQG,eAAiB,kBAC/CC,EAAoBJ,EAAQK,aAAe,gBAE/C,SAASC,EAAKC,EAASC,EAAS3jB,EAAM4jB,GAEpC,IAAIC,EAAiBF,GAAWA,EAAQ7nB,qBAAqBgoB,EAAYH,EAAUG,EAC/EC,EAAYlqB,OAAOkD,OAAO8mB,EAAe/nB,WACzC0C,EAAU,IAAIwlB,EAAQJ,GAAe,IAMzC,OAFAG,EAAUE,QAkMZ,SAA0BP,EAAS1jB,EAAMxB,GACvC,IAAI0lB,EAAQC,EAEZ,OAAO,SAAgBC,EAAQC,GAC7B,GAAIH,IAAUI,EACZ,MAAM,IAAIroB,MAAM,gCAGlB,GAAIioB,IAAUK,EAAmB,CAC/B,GAAe,UAAXH,EACF,MAAMC,EAKR,OAAOG,IAMT,IAHAhmB,EAAQ4lB,OAASA,EACjB5lB,EAAQ6lB,IAAMA,IAED,CACX,IAAII,EAAWjmB,EAAQimB,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUjmB,GACnD,GAAIkmB,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBlmB,EAAQ4lB,OAGV5lB,EAAQqmB,KAAOrmB,EAAQsmB,MAAQtmB,EAAQ6lB,SAElC,GAAuB,UAAnB7lB,EAAQ4lB,OAAoB,CACrC,GAAIF,IAAUC,EAEZ,MADAD,EAAQK,EACF/lB,EAAQ6lB,IAGhB7lB,EAAQumB,kBAAkBvmB,EAAQ6lB,SAEN,WAAnB7lB,EAAQ4lB,QACjB5lB,EAAQwmB,OAAO,SAAUxmB,EAAQ6lB,KAGnCH,EAAQI,EAER,IAAIW,EAASC,EAASxB,EAAS1jB,EAAMxB,GACrC,GAAoB,WAAhBymB,EAAO3iB,KAAmB,CAO5B,GAJA4hB,EAAQ1lB,EAAQR,KACZumB,EACAY,EAEAF,EAAOZ,MAAQO,EACjB,SAGF,MAAO,CACLhrB,MAAOqrB,EAAOZ,IACdrmB,KAAMQ,EAAQR,MAGS,UAAhBinB,EAAO3iB,OAChB4hB,EAAQK,EAGR/lB,EAAQ4lB,OAAS,QACjB5lB,EAAQ6lB,IAAMY,EAAOZ,OA1QPe,CAAiB1B,EAAS1jB,EAAMxB,GAE7CulB,EAcT,SAASmB,EAASG,EAAI3rB,EAAK2qB,GACzB,IACE,MAAO,CAAE/hB,KAAM,SAAU+hB,IAAKgB,EAAG9nB,KAAK7D,EAAK2qB,IAC3C,MAAOnmB,GACP,MAAO,CAAEoE,KAAM,QAAS+hB,IAAKnmB,IAhBjC1E,EAAQiqB,KAAOA,EAoBf,IAAIU,EAAyB,iBACzBgB,EAAyB,iBACzBb,EAAoB,YACpBC,EAAoB,YAIpBK,EAAmB,GAMvB,SAASd,KACT,SAASwB,KACT,SAASC,KAIT,IAAIC,EAAoB,GACxBA,EAAkBpC,GAAkB,WAClC,OAAOvmB,MAGT,IAAI4oB,EAAW5rB,OAAO6rB,eAClBC,EAA0BF,GAAYA,EAASA,EAASG,EAAO,MAC/DD,GACAA,IAA4B1C,GAC5BC,EAAO3lB,KAAKooB,EAAyBvC,KAGvCoC,EAAoBG,GAGtB,IAAIE,EAAKN,EAA2BzpB,UAClCgoB,EAAUhoB,UAAYjC,OAAOkD,OAAOyoB,GAQtC,SAASM,EAAsBhqB,GAC7B,CAAC,OAAQ,QAAS,UAAUiqB,SAAQ,SAAS3B,GAC3CtoB,EAAUsoB,GAAU,SAASC,GAC3B,OAAOxnB,KAAKonB,QAAQG,EAAQC,OAoClC,SAAS2B,EAAcjC,GAgCrB,IAAIkC,EAgCJppB,KAAKonB,QA9BL,SAAiBG,EAAQC,GACvB,SAAS6B,IACP,OAAO,IAAI7rB,SAAQ,SAASC,EAAS6rB,IAnCzC,SAASC,EAAOhC,EAAQC,EAAK/pB,EAAS6rB,GACpC,IAAIlB,EAASC,EAASnB,EAAUK,GAASL,EAAWM,GACpD,GAAoB,UAAhBY,EAAO3iB,KAEJ,CACL,IAAI+jB,EAASpB,EAAOZ,IAChBzqB,EAAQysB,EAAOzsB,MACnB,OAAIA,GACiB,kBAAVA,GACPspB,EAAO3lB,KAAK3D,EAAO,WACdS,QAAQC,QAAQV,EAAM0sB,SAASC,MAAK,SAAS3sB,GAClDwsB,EAAO,OAAQxsB,EAAOU,EAAS6rB,MAC9B,SAASjoB,GACVkoB,EAAO,QAASloB,EAAK5D,EAAS6rB,MAI3B9rB,QAAQC,QAAQV,GAAO2sB,MAAK,SAASC,GAI1CH,EAAOzsB,MAAQ4sB,EACflsB,EAAQ+rB,MACP,SAASxd,GAGV,OAAOud,EAAO,QAASvd,EAAOvO,EAAS6rB,MAvBzCA,EAAOlB,EAAOZ,KAiCZ+B,CAAOhC,EAAQC,EAAK/pB,EAAS6rB,MAIjC,OAAOF,EAaLA,EAAkBA,EAAgBM,KAChCL,EAGAA,GACEA,KA+GV,SAASvB,EAAoBF,EAAUjmB,GACrC,IAAI4lB,EAASK,EAASpnB,SAASmB,EAAQ4lB,QACvC,GAAIA,IAAWxmB,EAAW,CAKxB,GAFAY,EAAQimB,SAAW,KAEI,UAAnBjmB,EAAQ4lB,OAAoB,CAE9B,GAAIK,EAASpnB,SAAT,SAGFmB,EAAQ4lB,OAAS,SACjB5lB,EAAQ6lB,IAAMzmB,EACd+mB,EAAoBF,EAAUjmB,GAEP,UAAnBA,EAAQ4lB,QAGV,OAAOQ,EAIXpmB,EAAQ4lB,OAAS,QACjB5lB,EAAQ6lB,IAAM,IAAIlmB,UAChB,kDAGJ,OAAOymB,EAGT,IAAIK,EAASC,EAASd,EAAQK,EAASpnB,SAAUmB,EAAQ6lB,KAEzD,GAAoB,UAAhBY,EAAO3iB,KAIT,OAHA9D,EAAQ4lB,OAAS,QACjB5lB,EAAQ6lB,IAAMY,EAAOZ,IACrB7lB,EAAQimB,SAAW,KACZG,EAGT,IAAI6B,EAAOxB,EAAOZ,IAElB,OAAMoC,EAOFA,EAAKzoB,MAGPQ,EAAQimB,EAASiC,YAAcD,EAAK7sB,MAGpC4E,EAAQT,KAAO0mB,EAASkC,QAQD,WAAnBnoB,EAAQ4lB,SACV5lB,EAAQ4lB,OAAS,OACjB5lB,EAAQ6lB,IAAMzmB,GAUlBY,EAAQimB,SAAW,KACZG,GANE6B,GA3BPjoB,EAAQ4lB,OAAS,QACjB5lB,EAAQ6lB,IAAM,IAAIlmB,UAAU,oCAC5BK,EAAQimB,SAAW,KACZG,GAoDX,SAASgC,EAAaC,GACpB,IAAIC,EAAQ,CAAEC,OAAQF,EAAK,IAEvB,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxBhqB,KAAKsqB,WAAWlpB,KAAK6oB,GAGvB,SAASM,EAAcN,GACrB,IAAI7B,EAAS6B,EAAMO,YAAc,GACjCpC,EAAO3iB,KAAO,gBACP2iB,EAAOZ,IACdyC,EAAMO,WAAapC,EAGrB,SAASjB,EAAQJ,GAIf/mB,KAAKsqB,WAAa,CAAC,CAAEJ,OAAQ,SAC7BnD,EAAYmC,QAAQa,EAAc/pB,MAClCA,KAAKyqB,OAAM,GA8Bb,SAAS1B,EAAO2B,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAASnE,GAC9B,GAAIoE,EACF,OAAOA,EAAejqB,KAAKgqB,GAG7B,GAA6B,oBAAlBA,EAASxpB,KAClB,OAAOwpB,EAGT,IAAKE,MAAMF,EAAS/qB,QAAS,CAC3B,IAAID,GAAK,EAAGwB,EAAO,SAASA,IAC1B,OAASxB,EAAIgrB,EAAS/qB,QACpB,GAAI0mB,EAAO3lB,KAAKgqB,EAAUhrB,GAGxB,OAFAwB,EAAKnE,MAAQ2tB,EAAShrB,GACtBwB,EAAKC,MAAO,EACLD,EAOX,OAHAA,EAAKnE,MAAQgE,EACbG,EAAKC,MAAO,EAELD,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAMymB,GAIjB,SAASA,IACP,MAAO,CAAE5qB,MAAOgE,EAAWI,MAAM,GA+MnC,OAxmBAsnB,EAAkBxpB,UAAY+pB,EAAG7oB,YAAcuoB,EAC/CA,EAA2BvoB,YAAcsoB,EACzCC,EAA2BhC,GACzB+B,EAAkBoC,YAAc,oBAYlCluB,EAAQmuB,oBAAsB,SAASC,GACrC,IAAIhsB,EAAyB,oBAAXgsB,GAAyBA,EAAO5qB,YAClD,QAAOpB,IACHA,IAAS0pB,GAG2B,uBAAnC1pB,EAAK8rB,aAAe9rB,EAAKqN,QAIhCzP,EAAQquB,KAAO,SAASD,GAUtB,OATI/tB,OAAOwO,eACTxO,OAAOwO,eAAeuf,EAAQrC,IAE9BqC,EAAOtf,UAAYid,EACbhC,KAAqBqE,IACzBA,EAAOrE,GAAqB,sBAGhCqE,EAAO9rB,UAAYjC,OAAOkD,OAAO8oB,GAC1B+B,GAOTpuB,EAAQsuB,MAAQ,SAASzD,GACvB,MAAO,CAAEiC,QAASjC,IAsEpByB,EAAsBE,EAAclqB,WACpCkqB,EAAclqB,UAAUunB,GAAuB,WAC7C,OAAOxmB,MAETrD,EAAQwsB,cAAgBA,EAKxBxsB,EAAQuuB,MAAQ,SAASrE,EAASC,EAAS3jB,EAAM4jB,GAC/C,IAAIoE,EAAO,IAAIhC,EACbvC,EAAKC,EAASC,EAAS3jB,EAAM4jB,IAG/B,OAAOpqB,EAAQmuB,oBAAoBhE,GAC/BqE,EACAA,EAAKjqB,OAAOwoB,MAAK,SAASF,GACxB,OAAOA,EAAOroB,KAAOqoB,EAAOzsB,MAAQouB,EAAKjqB,WAuKjD+nB,EAAsBD,GAEtBA,EAAGtC,GAAqB,YAOxBsC,EAAGzC,GAAkB,WACnB,OAAOvmB,MAGTgpB,EAAGvoB,SAAW,WACZ,MAAO,sBAkCT9D,EAAQyuB,KAAO,SAASC,GACtB,IAAID,EAAO,GACX,IAAK,IAAItuB,KAAOuuB,EACdD,EAAKhqB,KAAKtE,GAMZ,OAJAsuB,EAAKE,UAIE,SAASpqB,IACd,KAAOkqB,EAAKzrB,QAAQ,CAClB,IAAI7C,EAAMsuB,EAAKG,MACf,GAAIzuB,KAAOuuB,EAGT,OAFAnqB,EAAKnE,MAAQD,EACboE,EAAKC,MAAO,EACLD,EAQX,OADAA,EAAKC,MAAO,EACLD,IAsCXvE,EAAQosB,OAASA,EAMjB5B,EAAQloB,UAAY,CAClBkB,YAAagnB,EAEbsD,MAAO,SAASe,GAcd,GAbAxrB,KAAKyrB,KAAO,EACZzrB,KAAKkB,KAAO,EAGZlB,KAAKgoB,KAAOhoB,KAAKioB,MAAQlnB,EACzBf,KAAKmB,MAAO,EACZnB,KAAK4nB,SAAW,KAEhB5nB,KAAKunB,OAAS,OACdvnB,KAAKwnB,IAAMzmB,EAEXf,KAAKsqB,WAAWpB,QAAQqB,IAEnBiB,EACH,IAAK,IAAIpf,KAAQpM,KAEQ,MAAnBoM,EAAKsf,OAAO,IACZrF,EAAO3lB,KAAKV,KAAMoM,KACjBwe,OAAOxe,EAAKuf,MAAM,MACrB3rB,KAAKoM,GAAQrL,IAMrB6qB,KAAM,WACJ5rB,KAAKmB,MAAO,EAEZ,IACI0qB,EADY7rB,KAAKsqB,WAAW,GACLE,WAC3B,GAAwB,UAApBqB,EAAWpmB,KACb,MAAMomB,EAAWrE,IAGnB,OAAOxnB,KAAK8rB,MAGd5D,kBAAmB,SAAS6D,GAC1B,GAAI/rB,KAAKmB,KACP,MAAM4qB,EAGR,IAAIpqB,EAAU3B,KACd,SAASgsB,EAAOjd,EAAKkd,GAYnB,OAXA7D,EAAO3iB,KAAO,QACd2iB,EAAOZ,IAAMuE,EACbpqB,EAAQT,KAAO6N,EAEXkd,IAGFtqB,EAAQ4lB,OAAS,OACjB5lB,EAAQ6lB,IAAMzmB,KAGNkrB,EAGZ,IAAK,IAAIvsB,EAAIM,KAAKsqB,WAAW3qB,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAIuqB,EAAQjqB,KAAKsqB,WAAW5qB,GACxB0oB,EAAS6B,EAAMO,WAEnB,GAAqB,SAAjBP,EAAMC,OAIR,OAAO8B,EAAO,OAGhB,GAAI/B,EAAMC,QAAUlqB,KAAKyrB,KAAM,CAC7B,IAAIS,EAAW7F,EAAO3lB,KAAKupB,EAAO,YAC9BkC,EAAa9F,EAAO3lB,KAAKupB,EAAO,cAEpC,GAAIiC,GAAYC,EAAY,CAC1B,GAAInsB,KAAKyrB,KAAOxB,EAAME,SACpB,OAAO6B,EAAO/B,EAAME,UAAU,GACzB,GAAInqB,KAAKyrB,KAAOxB,EAAMG,WAC3B,OAAO4B,EAAO/B,EAAMG,iBAGjB,GAAI8B,GACT,GAAIlsB,KAAKyrB,KAAOxB,EAAME,SACpB,OAAO6B,EAAO/B,EAAME,UAAU,OAG3B,KAAIgC,EAMT,MAAM,IAAI/sB,MAAM,0CALhB,GAAIY,KAAKyrB,KAAOxB,EAAMG,WACpB,OAAO4B,EAAO/B,EAAMG,gBAU9BjC,OAAQ,SAAS1iB,EAAM+hB,GACrB,IAAK,IAAI9nB,EAAIM,KAAKsqB,WAAW3qB,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAIuqB,EAAQjqB,KAAKsqB,WAAW5qB,GAC5B,GAAIuqB,EAAMC,QAAUlqB,KAAKyrB,MACrBpF,EAAO3lB,KAAKupB,EAAO,eACnBjqB,KAAKyrB,KAAOxB,EAAMG,WAAY,CAChC,IAAIgC,EAAenC,EACnB,OAIAmC,IACU,UAAT3mB,GACS,aAATA,IACD2mB,EAAalC,QAAU1C,GACvBA,GAAO4E,EAAahC,aAGtBgC,EAAe,MAGjB,IAAIhE,EAASgE,EAAeA,EAAa5B,WAAa,GAItD,OAHApC,EAAO3iB,KAAOA,EACd2iB,EAAOZ,IAAMA,EAET4E,GACFpsB,KAAKunB,OAAS,OACdvnB,KAAKkB,KAAOkrB,EAAahC,WAClBrC,GAGF/nB,KAAKqsB,SAASjE,IAGvBiE,SAAU,SAASjE,EAAQiC,GACzB,GAAoB,UAAhBjC,EAAO3iB,KACT,MAAM2iB,EAAOZ,IAcf,MAXoB,UAAhBY,EAAO3iB,MACS,aAAhB2iB,EAAO3iB,KACTzF,KAAKkB,KAAOknB,EAAOZ,IACM,WAAhBY,EAAO3iB,MAChBzF,KAAK8rB,KAAO9rB,KAAKwnB,IAAMY,EAAOZ,IAC9BxnB,KAAKunB,OAAS,SACdvnB,KAAKkB,KAAO,OACa,WAAhBknB,EAAO3iB,MAAqB4kB,IACrCrqB,KAAKkB,KAAOmpB,GAGPtC,GAGTuE,OAAQ,SAASlC,GACf,IAAK,IAAI1qB,EAAIM,KAAKsqB,WAAW3qB,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAIuqB,EAAQjqB,KAAKsqB,WAAW5qB,GAC5B,GAAIuqB,EAAMG,aAAeA,EAGvB,OAFApqB,KAAKqsB,SAASpC,EAAMO,WAAYP,EAAMI,UACtCE,EAAcN,GACPlC,IAKb,MAAS,SAASmC,GAChB,IAAK,IAAIxqB,EAAIM,KAAKsqB,WAAW3qB,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAIuqB,EAAQjqB,KAAKsqB,WAAW5qB,GAC5B,GAAIuqB,EAAMC,SAAWA,EAAQ,CAC3B,IAAI9B,EAAS6B,EAAMO,WACnB,GAAoB,UAAhBpC,EAAO3iB,KAAkB,CAC3B,IAAI8mB,EAASnE,EAAOZ,IACpB+C,EAAcN,GAEhB,OAAOsC,GAMX,MAAM,IAAIntB,MAAM,0BAGlBotB,cAAe,SAAS9B,EAAUb,EAAYC,GAa5C,OAZA9pB,KAAK4nB,SAAW,CACdpnB,SAAUuoB,EAAO2B,GACjBb,WAAYA,EACZC,QAASA,GAGS,SAAhB9pB,KAAKunB,SAGPvnB,KAAKwnB,IAAMzmB,GAGNgnB,IAQJprB,EAvrBM,CA8rBgBD,EAAOC,SAGtC,IACE8vB,mBAAqBtG,EACrB,MAAOuG,GAUPC,SAAS,IAAK,yBAAdA,CAAwCxG,K,8BCpsB1C,IAAIzc,EAAsBnI,EAAQ,IAC9BqrB,EAA0BrrB,EAAQ,IAElCsrB,EAAgBtrB,EAAQ,IACxBurB,EAAYvrB,EAAQ,IAgBpBwrB,EAAoB,WAKtB,SAASA,KA3BX,SAAyBnjB,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIvI,UAAU,qCA4B5GqI,CAAgB3J,KAAM+sB,GAEtB/sB,KAAKgtB,YAAc,IAAIJ,EACvB5sB,KAAKitB,qBAAuB,KA8I9B,OA5HAF,EAAiB9tB,UAAU2W,YAAc,SAAqBsX,EAAW7hB,EAAU1J,GACjF,OAAO3B,KAAKgtB,YAAYG,gBAAgBD,EAAW,IAAIxjB,EAAoB1J,KAAKgtB,YAAa3hB,EAAU1J,KAczGorB,EAAiB9tB,UAAUmuB,KAAO,SAAcF,EAAW7hB,EAAU1J,GACnE,IAAI2S,EAAUtU,KACd,OAAOA,KAAK4V,YAAYsX,GAAW,WACjC5Y,EAAQ+Y,wBACRhiB,EAAStL,MAAM4B,EAAS1B,eAY5B8sB,EAAiB9tB,UAAUquB,mBAAqB,SAA4BJ,GAC1EltB,KAAKgtB,YAAYO,uBAAuBL,IAyB1CH,EAAiB9tB,UAAUouB,sBAAwB,WAC9CrtB,KAAKitB,sBAAgJH,GAAU,GAClK9sB,KAAKgtB,YAAYQ,mBAAmBxtB,KAAKitB,uBAW3CF,EAAiB9tB,UAAUwuB,UAAY,SAAmBP,GACxD,IAAIQ,EAAgB1tB,KAAKgtB,YAAYW,wBAAwBT,GAC7D,OAAOQ,EAAgBA,EAAcE,OAAOf,EAAcgB,iBAAiBC,KAAI,SAAUC,GACvF,OAAOA,EAAa1iB,YACjB,IAkBP0hB,EAAiB9tB,UAAUyV,KAAO,SAAcwY,GAC9C,IAAIQ,EAAgB1tB,KAAKgtB,YAAYW,wBAAwBT,GAC7D,GAAIQ,EAAe,CAEjB,IADA,IAAItC,EAAOpuB,OAAOouB,KAAKsC,GACdM,EAAK,EAAGA,EAAK5C,EAAKzrB,OAAQquB,IAAM,CACvC,IAAIlxB,EAAMsuB,EAAK4C,GACXD,EAAeL,EAAc5wB,GAE7BixB,IACF/tB,KAAKitB,qBAAuBc,EAC5B/tB,KAAKiuB,qBAAqBluB,MAAMC,KAAM,CAAC+tB,GAAcG,OAAO1uB,MAAMP,UAAU0sB,MAAMjrB,KAAKT,cAG3FD,KAAKitB,qBAAuB,OAchCF,EAAiB9tB,UAAUgvB,qBAAuB,SAA8BF,EAAcb,GAC5F,IAAIjhB,EAAOzM,MAAMP,UAAU0sB,MAAMjrB,KAAKT,UAAW,GACjD8tB,EAAa1iB,SAAStL,MAAMguB,EAAapsB,QAASsK,IAG7C8gB,EAvJe,GA0JxBrwB,EAAOC,QAAUowB,G,6BCzKjB,IAAIoB,EAAqB,WAOvB,SAASA,EAAkB/iB,IAT7B,SAAyBxB,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIvI,UAAU,qCAU5GqI,CAAgB3J,KAAMmuB,GAEtBnuB,KAAKoL,WAAaA,EAcpB,OAPA+iB,EAAkBlvB,UAAUmvB,OAAS,WAC/BpuB,KAAKoL,aACPpL,KAAKoL,WAAWoiB,mBAAmBxtB,MACnCA,KAAKoL,WAAa,OAIf+iB,EAxBgB,GA2BzBzxB,EAAOC,QAAUwxB,G,6BChCjB,IAAIrB,EAAYvrB,EAAQ,IAOpBqrB,EAA2B,WAC7B,SAASA,KAVX,SAAyBhjB,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIvI,UAAU,qCAW5GqI,CAAgB3J,KAAM4sB,GAEtB5sB,KAAKquB,sBAAwB,GAC7BruB,KAAKitB,qBAAuB,KAuE9B,OA7DAL,EAAwB3tB,UAAUkuB,gBAAkB,SAAyBD,EAAWa,GACpFA,EAAa3iB,aAAepL,MAA6H8sB,GAAU,GAChK9sB,KAAKquB,sBAAsBnB,KAC9BltB,KAAKquB,sBAAsBnB,GAAa,IAE1C,IAAIpwB,EAAMkD,KAAKquB,sBAAsBnB,GAAWvtB,OAIhD,OAHAK,KAAKquB,sBAAsBnB,GAAW9rB,KAAK2sB,GAC3CA,EAAab,UAAYA,EACzBa,EAAajxB,IAAMA,EACZixB,GAUTnB,EAAwB3tB,UAAUsuB,uBAAyB,SAAgCL,QACvEnsB,IAAdmsB,EACFltB,KAAKquB,sBAAwB,UAEtBruB,KAAKquB,sBAAsBnB,IAWtCN,EAAwB3tB,UAAUuuB,mBAAqB,SAA4BO,GACjF,IAAIb,EAAYa,EAAab,UACzBpwB,EAAMixB,EAAajxB,IAEnBwxB,EAAuBtuB,KAAKquB,sBAAsBnB,GAClDoB,UACKA,EAAqBxxB,IAiBhC8vB,EAAwB3tB,UAAU0uB,wBAA0B,SAAiCT,GAC3F,OAAOltB,KAAKquB,sBAAsBnB,IAG7BN,EA5EsB,GA+E/BlwB,EAAOC,QAAUiwB,G,6BC3FjB,SAAS2B,EAAkB/G,GACzB,OAAO,WACL,OAAOA,GASX,IAAIqF,EAAgB,aAEpBA,EAAc2B,YAAcD,EAC5B1B,EAAc4B,iBAAmBF,GAAkB,GACnD1B,EAAcgB,gBAAkBU,GAAkB,GAClD1B,EAAc6B,gBAAkBH,EAAkB,MAClD1B,EAAc8B,gBAAkB,WAC9B,OAAO3uB,MAET6sB,EAAc+B,oBAAsB,SAAUpH,GAC5C,OAAOA,GAGT9qB,EAAOC,QAAUkwB,G,gBCnCjB,IAEI5kB,EAAmB,IAFX1G,EAAQ,GAEG,CAAU,CAE7B3B,WAAY,SAA0BvC,GAClC2C,KAAK3C,GAAKA,GAGdoF,iBAAkB,SAASsJ,KAC3BlH,oBAAqB,SAASkH,KAE9B/J,MAAO,CACHvD,IAAK,WACD,OAAOuB,KAAK3C,GAAG6W,OAAOlS,OAE1BtD,IAAK,SAASsD,GACVhC,KAAK3C,GAAG6W,OAAOlS,MAAQA,IAI/BC,OAAQ,CACJxD,IAAK,WACD,OAAOuB,KAAK3C,GAAG6W,OAAOjS,QAE1BvD,IAAK,SAASuD,GACVjC,KAAK3C,GAAG6W,OAAOjS,OAASA,MAKpCvF,EAAOC,QAAUsL,G,gBCxBjB,IAAI/I,EAAQqC,EAAQ,GAChBstB,EAAgBttB,EAAQ,IACxB2G,EAAc3G,EAAQ,GAAa2G,YAEnCyH,EAAgB,IAAIzQ,EAAM,CAgB7BU,WAAY,SAAuB+B,EAASmtB,EAAYC,EAAYC,GACnE,IAAKF,IAAeC,EACnB,KAAM,8CACP,IAAKptB,GAA8B,kBAAZA,EACtB,KAAM,kDAEP3B,KAAK2B,QAAUuG,EAAYvG,GAE3B3B,KAAKivB,WAAa,KAClBjvB,KAAKkvB,WAAa,KAClBlvB,KAAKmvB,QAAU,KACfnvB,KAAKkR,IAAM,GAEXlR,KAAKovB,aAAe,KACpBpvB,KAAKqvB,eAAiB,KAEtBrvB,KAAKgvB,mBAAqBA,EAI1BhvB,KAAK8uB,WAAaA,EAAWQ,OAC7BtvB,KAAK+uB,WAAaA,EAAWO,OAI7BtvB,KAAK2B,QAAQc,iBAAiBzC,MAC9BA,KAAKE,UASNA,OAAQ,WACPF,KAAK3C,GAAK2C,KAAK2B,QAAQtE,GACvB2C,KAAKuvB,mBAINA,gBAAiB,WAChB,IAAIlyB,EAAK2C,KAAK3C,GAEVusB,EAAOiF,EAAc,CACxBxxB,GAAIA,EACJmyB,OAAQxvB,KAAK8uB,WACbW,SAAUzvB,KAAK+uB,WACfW,QAAS/f,EAAcggB,gBACvBX,mBAAoBhvB,KAAKgvB,qBAG1BhvB,KAAKkR,IAAM0Y,EAAK1Y,IAChBlR,KAAKmvB,QAAUvF,EAAKuF,QACpBnvB,KAAKivB,WAAarF,EAAK4F,OACvBxvB,KAAKkvB,WAAatF,EAAK6F,SAEnB9f,EAAcggB,iBAAmB3vB,KAAKkR,KACzCC,QAAQC,KAAKpR,KAAKkR,KAEnBlR,KAAK4vB,iBACL5vB,KAAK6vB,oBAGND,eAAgB,WACf,IAAIvyB,EAAK2C,KAAK3C,GAEd2C,KAAKovB,aAAe,GAEpB,IAAInU,EAAM5d,EAAGyyB,oBAAoB9vB,KAAKmvB,QAAS9xB,EAAG0yB,iBAClD,GAAK9U,EAGL,IAAK,IAAIvb,EAAE,EAAGA,EAAEub,EAAKvb,IAAK,CACzB,IAAIkqB,EAAOvsB,EAAG2yB,iBAAiBhwB,KAAKmvB,QAASzvB,GAC7C,GAAa,OAATkqB,EAAJ,CAEA,IAAIxd,EAAOwd,EAAKxd,KACZ4C,EAAW3R,EAAG4yB,mBAAmBjwB,KAAKmvB,QAAS/iB,GAEnDpM,KAAKovB,aAAahjB,GAAQ,CACzB8jB,KAAMtG,EAAKsG,KACXzqB,KAAMmkB,EAAKnkB,KACXuJ,SAAUA,MAKb6gB,iBAAkB,WACjB,IAAIxyB,EAAK2C,KAAK3C,GAEd2C,KAAKqvB,eAAiB,GAEtB,IAAIpU,EAAM5d,EAAGyyB,oBAAoB9vB,KAAKmvB,QAAS9xB,EAAG8yB,mBAClD,GAAKlV,EAGL,IAAK,IAAIvb,EAAE,EAAGA,EAAEub,EAAKvb,IAAK,CACzB,IAAIkqB,EAAOvsB,EAAG+yB,gBAAgBpwB,KAAKmvB,QAASzvB,GAC5C,GAAa,OAATkqB,EAAJ,CAEA,IAAIxd,EAAOwd,EAAKxd,KAGZ4C,EAAW3R,EAAGgzB,kBAAkBrwB,KAAKmvB,QAAS/iB,GAElDpM,KAAKqvB,eAAejjB,GAAQ,CAC3B8jB,KAAMtG,EAAKsG,KACXzqB,KAAMmkB,EAAKnkB,KACXuJ,SAAUA,MAabjL,KAAM,WACL/D,KAAK3C,GAAGizB,WAAWtwB,KAAKmvB,UASzBxqB,QAAS,WAIR,GAHI3E,KAAK2B,SACR3B,KAAK2B,QAAQkD,oBAAoB7E,MAE9BA,KAAK3C,IAAM2C,KAAKmvB,QAAS,CAC5B,IAAI9xB,EAAK2C,KAAK3C,GAEXA,EAAGkzB,aAAavwB,KAAKmvB,QAASnvB,KAAKivB,YACnC5xB,EAAGkzB,aAAavwB,KAAKmvB,QAASnvB,KAAKkvB,YACnC7xB,EAAGmzB,aAAaxwB,KAAKivB,YACrB5xB,EAAGmzB,aAAaxwB,KAAKkvB,YAExB7xB,EAAGozB,cAAczwB,KAAKmvB,SAEvBnvB,KAAKqvB,eAAiB,KACtBrvB,KAAKovB,aAAe,KACpBpvB,KAAKivB,WAAa,KAClBjvB,KAAKkvB,WAAa,KAClBlvB,KAAKmvB,QAAU,KACfnvB,KAAK3C,GAAK,KACV2C,KAAK2B,QAAU,MAgBhB+uB,eAAgB,SAAStkB,GACxB,OAAOpM,KAAKovB,aAAahjB,IAAS,MAgBnCukB,iBAAkB,SAASvkB,GAC1B,OAAOpM,KAAKqvB,eAAejjB,IAAS,MAYrC6C,qBAAsB,SAAS7C,GAC9B,IAAIwd,EAAO5pB,KAAK2wB,iBAAiBvkB,GACjC,OAAOwd,EAAOA,EAAK5a,SAAW,MAY/BihB,mBAAoB,SAAS7jB,GAC5B,IAAIwd,EAAO5pB,KAAK0wB,eAAetkB,GAC/B,OAAOwd,EAAOA,EAAK5a,SAAW,MAY/B4hB,WAAY,SAASxkB,GACpB,OAAqC,OAA9BpM,KAAK0wB,eAAetkB,IAW5BykB,aAAc,SAASzkB,GACtB,OAAuC,OAAhCpM,KAAK2wB,iBAAiBvkB,IAU9B0kB,WAAY,SAAS1kB,GACpB,OAAOpM,KAAK3C,GAAGyzB,WAAW9wB,KAAKmvB,QAASnvB,KAAKiwB,mBAAmB7jB,KAUjE2kB,aAAc,SAAS/hB,GACtB,OAAOhP,KAAK3C,GAAGyzB,WAAW9wB,KAAKmvB,QAASngB,IAezCwC,YAAa,SAASpF,EAAMqE,EAAGE,EAAG6J,EAAGsB,GACpC,aACA,IAAIze,EAAK2C,KAAK3C,GACV0R,EAAM/O,KAAKiwB,mBAAmB7jB,GAClC,GAAY,OAAR2C,EACH,OAAO,EACR,OAAQ9O,UAAUN,QACjB,KAAK,EAAyB,OAAtBtC,EAAG2zB,UAAUjiB,EAAK0B,IAAW,EACrC,KAAK,EAA4B,OAAzBpT,EAAG4zB,UAAUliB,EAAK0B,EAAGE,IAAW,EACxC,KAAK,EAA+B,OAA5BtT,EAAG6zB,UAAUniB,EAAK0B,EAAGE,EAAG6J,IAAW,EAC3C,KAAK,EAAkC,OAA/Bnd,EAAG8zB,UAAUpiB,EAAK0B,EAAGE,EAAG6J,EAAGsB,IAAW,EAC9C,QACC,KAAM,qCAgBTsV,YAAa,SAAShlB,EAAMqE,EAAGE,EAAG6J,EAAGsB,GACpC,aACA,IAAIze,EAAK2C,KAAK3C,GACV0R,EAAM/O,KAAKiwB,mBAAmB7jB,GAClC,GAAY,OAAR2C,EACH,OAAO,EACR,OAAQ9O,UAAUN,QACjB,KAAK,EAAyB,OAAtBtC,EAAGg0B,UAAUtiB,EAAK0B,IAAW,EACrC,KAAK,EAA4B,OAAzBpT,EAAGi0B,UAAUviB,EAAK0B,EAAGE,IAAW,EACxC,KAAK,EAA+B,OAA5BtT,EAAGk0B,UAAUxiB,EAAK0B,EAAGE,EAAG6J,IAAW,EAC3C,KAAK,EAAkC,OAA/Bnd,EAAGm0B,UAAUziB,EAAK0B,EAAGE,EAAG6J,EAAGsB,IAAW,EAC9C,QACC,KAAM,qCAsBT2V,aAAc,SAASrlB,EAAMslB,EAAajjB,GACzC,aACAA,EAAQA,GAASijB,EAAY/xB,OAC7B,IAAItC,EAAK2C,KAAK3C,GACV0R,EAAM/O,KAAKiwB,mBAAmB7jB,GAClC,GAAY,OAAR2C,EACH,OAAO,EACR,OAAQN,GACP,KAAK,EAAoC,OAAjCpR,EAAGs0B,WAAW5iB,EAAK2iB,IAAqB,EAChD,KAAK,EAAoC,OAAjCr0B,EAAGu0B,WAAW7iB,EAAK2iB,IAAqB,EAChD,KAAK,EAAoC,OAAjCr0B,EAAGw0B,WAAW9iB,EAAK2iB,IAAqB,EAChD,KAAK,EAAoC,OAAjCr0B,EAAGy0B,WAAW/iB,EAAK2iB,IAAqB,EAChD,QACC,KAAM,qCAiBTK,aAAc,SAAS3lB,EAAMslB,EAAajjB,GACzC,aACAA,EAAQA,GAASijB,EAAY/xB,OAC7B,IAAItC,EAAK2C,KAAK3C,GACV0R,EAAM/O,KAAKiwB,mBAAmB7jB,GAClC,GAAY,OAAR2C,EACH,OAAO,EACR,OAAQN,GACP,KAAK,EAAoC,OAAjCpR,EAAG20B,WAAWjjB,EAAK2iB,IAAqB,EAChD,KAAK,EAAoC,OAAjCr0B,EAAG40B,WAAWljB,EAAK2iB,IAAqB,EAChD,KAAK,EAAoC,OAAjCr0B,EAAG60B,WAAWnjB,EAAK2iB,IAAqB,EAChD,KAAK,EAAoC,OAAjCr0B,EAAG80B,WAAWpjB,EAAK2iB,IAAqB,EAChD,QACC,KAAM,qCAeTU,kBAAmB,SAAShmB,EAAMiR,EAAKpF,GACtC,aACA,IAAI3X,EAAqB,kBAAR+c,GAAoBA,EAAI7Q,IAAM6Q,EAAI7Q,IAAM6Q,EACzDpF,IAAcA,EAEd,IAAI5a,EAAK2C,KAAK3C,GACV0R,EAAM/O,KAAKiwB,mBAAmB7jB,GAClC,GAAY,OAAR2C,EACH,OAAO,EACR1R,EAAGg1B,iBAAiBtjB,EAAKkJ,EAAW3X,IAcrC+Q,kBAAmB,SAASjF,EAAMiR,EAAKpF,GACtC,aACA,IAAI3X,EAAqB,kBAAR+c,GAAoBA,EAAI7Q,IAAM6Q,EAAI7Q,IAAM6Q,EACzDpF,IAAcA,EAEd,IAAI5a,EAAK2C,KAAK3C,GACV0R,EAAM/O,KAAKiwB,mBAAmB7jB,GAClC,GAAY,OAAR2C,EACH,OAAO,EACR1R,EAAGi1B,iBAAiBvjB,EAAKkJ,EAAW3X,MAOtCqP,EAAcU,mBAAqB,WACnCV,EAAc4iB,iBAAmB,SACjC5iB,EAAcW,gBAAkB,QAChCX,EAAcY,mBAAqB,WAWnCZ,EAAcggB,iBAAkB,EAEhCjzB,EAAOC,QAAUgT,G,gBC7djB,IAAI6iB,EAAQjxB,EAAQ,IAuEpB,SAASkxB,EAAWp1B,EAAIoI,EAAMitB,EAAQhD,GAClC,IAAI7gB,EAASxR,EAAGs1B,aAAaltB,GAC7B,IAAKoJ,EACD,OAAQ,EAEZxR,EAAGu1B,aAAa/jB,EAAQ6jB,GACxBr1B,EAAGwxB,cAAchgB,GAGjB,IAAIgkB,EAAWptB,IAASpI,EAAGy1B,cAAiB,SAAW,WAEnDC,EAAY11B,EAAG21B,iBAAiBnkB,IAAW,GAK/C,IAAKxR,EAAG41B,mBAAmBpkB,EAAQxR,EAAG61B,gBAKlC,MAJIxD,IACAve,QAAQnF,MAAM,kBAAkB+mB,GAChC5hB,QAAQnF,MAAO,eAAe6mB,EAAQ,aAAeM,EAAeT,KAElE,IAAItzB,MAAM,qBAAqByzB,EAAQ,aAAaE,GAE9D,IAAKlkB,EACD,MAAM,IAAIzP,MAAM,kCAAkCyzB,EAAQ,aAAaE,GAC3E,MAAO,CACHlkB,OAAQA,EACRqC,IAAK6hB,GAIb,SAASI,EAAgBC,GAErB,IADA,IAAIC,EAAQD,EAAOE,MAAO,MAChB5zB,EAAI,EAAGA,EAAI2zB,EAAM1zB,OAAQD,IAC/B2zB,EAAO3zB,GAAQA,EAAI,EAAM,KAAO2zB,EAAO3zB,GAE3C,OAAO2zB,EAAMrf,KAAM,MAzGvBtX,EAAOC,QAAU,SAAS42B,GACtB,IAAKA,IAAUA,EAAK/D,SAAW+D,EAAK9D,SAChC,KAAM,8CACV,IAAIX,EAAcyE,EAAK/D,OAAQF,OAC3BP,EAAcwE,EAAK9D,SAAUH,OAG7BjyB,EAAKk2B,EAAKl2B,GACd,IAAKA,KACDA,EAAKm1B,KAED,MAAM,IAAIpzB,MAAM,8CAExB,OAIJ,SAAiB/B,EAAIyxB,EAAYC,EAAYyE,EAAS9D,GAClD,IAAIxe,EAAM,GAENuiB,EAAOhB,EAAWp1B,EAAIA,EAAGy1B,cAAehE,EAAYY,GACpDgE,EAAOjB,EAAWp1B,EAAIA,EAAGs2B,gBAAiB5E,EAAYW,GAEtDT,EAAawE,EAAK5kB,OAClBqgB,EAAawE,EAAK7kB,OAEtBqC,GAAOuiB,EAAKviB,IAAM,KAAOwiB,EAAKxiB,IAE9B,IAAIie,EAAU9xB,EAAGu2B,gBAMjB,GAJAv2B,EAAGw2B,aAAa1E,EAASF,GACzB5xB,EAAGw2B,aAAa1E,EAASD,GAGrBsE,EACA,IAAK,IAAI12B,KAAO02B,EACRA,EAAQx0B,eAAelC,IACvBO,EAAGy2B,mBAAmB3E,EAASnkB,KAAKC,MAAMuoB,EAAQ12B,IAAOA,GASrE,GAJAO,EAAG02B,YAAY5E,GAEfje,GAAO7T,EAAG22B,kBAAkB7E,IAAY,IAEnC9xB,EAAGyyB,oBAAoBX,EAAS9xB,EAAG42B,aAYpC,MAXIvE,IACAve,QAAQnF,MAAM,kBAAkBkF,GAChCC,QAAQnF,MAAM,yCAAyCmnB,EAAerE,GAC7D,yBAAyBqE,EAAepE,KAGrD1xB,EAAGkzB,aAAapB,EAASF,GACzB5xB,EAAGkzB,aAAapB,EAASD,GACzB7xB,EAAGmzB,aAAavB,GAChB5xB,EAAGmzB,aAAatB,GAEV,IAAI9vB,MAAM,sCAAwC8R,GAG5D,MAAO,CACHie,QAASA,EACTK,OAAQP,EACRQ,SAAUP,EACVhe,IAAKA,EAAIoe,QApDN4E,CAAQ72B,EAAIyxB,EAAYC,EAAYwE,EAAKvE,mBAAoBuE,EAAK7D,W,cCf7EhzB,EAAOC,QAAU,SAAS42B,GAEtB,IAAIrf,GADJqf,EAAOA,GAAM,IACKrf,QAAUigB,SAASC,cAAc,UACzB,kBAAfb,EAAKvxB,QACZkS,EAAOlS,MAAQuxB,EAAKvxB,OACG,kBAAhBuxB,EAAKtxB,SACZiS,EAAOjS,OAASsxB,EAAKtxB,QAEzB,IAAIuxB,EAAWD,EAAKc,YAAcd,EAAKC,SAAW,GAClD,IACIn2B,GAAM6W,EAAOogB,WAAW,QAASd,IAAYtf,EAAOogB,WAAW,qBAAsBd,GACvF,MAAOznB,GACL1O,GAAK,KAET,OAAOA,K,gBCPX,IAAI6B,EAAQqC,EAAQ,GAChB+K,EAAO/K,EAAQ,IACfG,EAAaH,EAAQ,GAAaG,WAIlC6yB,GAFehzB,EAAQ,GAAe2H,aAEzB3H,EAAQ,KA8BrBqO,EAAY,IAAI1Q,EAAM,CAEzBkB,OAAQm0B,EAGR30B,WAAY,SAAmB+B,EAASpE,GACvCmE,EAAWhB,KAAKV,KAAM2B,GACtBpE,EAAUA,GAAS,GAEnB,IAAIsR,EAAS7O,KAAK+Q,gBAElB/Q,KAAK2R,IAAM,EAEX3R,KAAKw0B,KAAOx0B,KAAKy0B,YAAYl3B,EAAQ2yB,MAGrCqE,EAAW7zB,KAAKV,KAAMA,KAAK2B,QAAQtE,GAAIwR,IAcxC4lB,YAAa,SAASvE,GAGrB,IAFAA,EAAOA,GAAM,KAEF,MACV,KAAM,iDAAmDA,EAG1D,IAAItjB,EAAkB,EAAPsjB,EAAWlwB,KAAKkQ,gBAE3BrD,EAAoB,EAAPqjB,EACb7yB,EAAK2C,KAAK2B,QAAQtE,GAGtB2C,KAAK+M,SAAW,IAAInE,aAAagE,GAEjC5M,KAAKgN,QAAU,IAAIW,YAAYd,GAE/B,IAAK,IAAInN,EAAE,EAAGg1B,EAAE,EAAGh1B,EAAImN,EAAYnN,GAAK,EAAGg1B,GAAK,EAE/C10B,KAAKgN,QAAQtN,EAAI,GAAKg1B,EAAI,EAC1B10B,KAAKgN,QAAQtN,EAAI,GAAKg1B,EAAI,EAC1B10B,KAAKgN,QAAQtN,EAAI,GAAKg1B,EAAI,EAC1B10B,KAAKgN,QAAQtN,EAAI,GAAKg1B,EAAI,EAC1B10B,KAAKgN,QAAQtN,EAAI,GAAKg1B,EAAI,EAC1B10B,KAAKgN,QAAQtN,EAAI,GAAKg1B,EAAI,EAG3B,IAAIF,EAAO,IAAIloB,EAAKtM,KAAK2B,SAAS,EAC9BiL,EAAUC,EAAY7M,KAAKoQ,2BAM/B,OALAokB,EAAKznB,SAAW/M,KAAK+M,SACrBynB,EAAKxnB,QAAUhN,KAAKgN,QACpBwnB,EAAKpnB,YAAc/P,EAAGmQ,aACtBgnB,EAAKrnB,WAAa9P,EAAGkQ,YACrBinB,EAAKjoB,OAAQ,EACNioB,GAcRzjB,cAAe,WACd,KAAM,iCAcPX,wBAAyB,WACxB,KAAM,2CAaPF,cAAe,WACd,KAAM,iCAWPqB,MAAO,WACN,GAAIvR,KAAKwQ,QACR,KAAM,0CAQP,GAPAxQ,KAAKwQ,SAAU,EAEfxQ,KAAK6O,OAAO9K,OAGZ/D,KAAKw0B,KAAKzwB,KAAK/D,KAAK6O,QAEhB7O,KAAK20B,iBAAkB,CAC1B,IAAIt3B,EAAK2C,KAAK2B,QAAQtE,GACtBA,EAAGu3B,OAAOv3B,EAAGw3B,SAUfnjB,IAAK,WACJ,IAAK1R,KAAKwQ,QACT,KAAM,0CAOP,GANIxQ,KAAK2R,IAAM,GACd3R,KAAK6Q,QACN7Q,KAAKwQ,SAAU,EAEfxQ,KAAKw0B,KAAKllB,OAAOtP,KAAK6O,QAElB7O,KAAK20B,iBAAkB,CAC1B,IAAIt3B,EAAK2C,KAAK2B,QAAQtE,GACtBA,EAAGy3B,QAAQz3B,EAAGw3B,SAUhBvjB,WAAY,aASZT,MAAO,WACN,GAAe,IAAX7Q,KAAK2R,IAAT,CAGA,IAAItU,EAAK2C,KAAK2B,QAAQtE,GAGlB2C,KAAK20B,kBAGJ30B,KAAK+0B,WAAa/0B,KAAKg1B,WAC1B33B,EAAG43B,UAAUj1B,KAAK+0B,UAAW/0B,KAAKg1B,WAGpCh1B,KAAKsR,aAGL,IAAIlC,EAAgBpP,KAAKkQ,gBACrBglB,EAAel1B,KAAK2R,KAAuB,EAAhBvC,GAG/BpP,KAAKw0B,KAAK/nB,eAAgB,EAC1BzM,KAAKw0B,KAAKjmB,KAAKlR,EAAG83B,UAAyB,EAAdD,EAAiB,EAAGl1B,KAAK2R,KAEtD3R,KAAK2R,IAAM,IAYZhN,QAAS,WACR3E,KAAK+M,SAAW,KAChB/M,KAAKgN,QAAU,KACfhN,KAAKo1B,YAAc,EAEfp1B,KAAKq1B,YAAcr1B,KAAKs1B,eAC3Bt1B,KAAKs1B,cAAc3wB,UACpB3E,KAAKs1B,cAAgB,KACrBt1B,KAAKu1B,QAAU,KAEXv1B,KAAKw0B,MACRx0B,KAAKw0B,KAAK7vB,UACX3E,KAAKw0B,KAAO,QAId93B,EAAOC,QAAUiT,G,gBC1QjB,IAAI1G,EAAe3H,EAAQ,GAAe2H,aACtChK,EAAQqC,EAAQ,GAEpB7E,EAAOC,QAAU,IAAIuC,EAAM,CAE1BU,WACA,SAAyBvC,EAAIwR,GAC5B7O,KAAK+0B,UAAY13B,EAAGm4B,IACpBx1B,KAAKg1B,UAAY33B,EAAGo4B,oBACpBz1B,KAAK20B,kBAAmB,EACxB30B,KAAKu1B,QAAU1mB,EAQf7O,KAAKs1B,cAAgBt1B,KAAKu1B,QAc1Bv1B,KAAKq1B,YAAa,EAOlBr1B,KAAKwQ,SAAU,EASfxQ,KAAKkT,MAAQhK,EAAa,IAAK,IAAK,IAAK,KAiBzClJ,KAAK01B,eAAgB,GAUtBC,gBAAiB,CAChBj3B,IAAK,SAAS8N,GACb,IAAIopB,EAAM51B,KAAK20B,iBAQf,GAPI30B,KAAKwQ,SACRxQ,KAAK6Q,QAEN7Q,KAAK20B,iBAAmBnoB,EAIpBxM,KAAKwQ,SAAWolB,GAAOppB,EAAK,CAC/B,IAAInP,EAAK2C,KAAK2B,QAAQtE,GAClBmP,EACHnP,EAAGu3B,OAAOv3B,EAAGw3B,OAEbx3B,EAAGy3B,QAAQz3B,EAAGw3B,SAKjBp2B,IAAK,WACJ,OAAOuB,KAAK20B,mBAcdkB,SAAU,CACTn3B,IAAK,SAAS8N,GACTxM,KAAKwQ,SACRxQ,KAAK6Q,QACN7Q,KAAK+0B,UAAYvoB,GAGlB/N,IAAK,WACJ,OAAOuB,KAAK+0B,YAcde,SAAU,CACTp3B,IAAK,SAAS8N,GACTxM,KAAKwQ,SACRxQ,KAAK6Q,QACN7Q,KAAKg1B,UAAYxoB,GAGlB/N,IAAK,WACJ,OAAOuB,KAAKg1B,YAiBde,iBAAkB,SAASF,EAAUC,GACpC91B,KAAK61B,SAAWA,EAChB71B,KAAK81B,SAAWA,GAejBjnB,OAAQ,CACPnQ,IAAK,SAAS8N,GACb,IAAIwpB,EAAah2B,KAAKwQ,QAElBwlB,GACHh2B,KAAK0R,MAGN1R,KAAKu1B,QAAU/oB,GAAYxM,KAAKs1B,cAE5BU,GACHh2B,KAAKuR,SAIP9S,IAAK,WACJ,OAAOuB,KAAKu1B,UAyBdU,SAAU,SAAS9sB,EAAGC,EAAGC,EAAGC,GAC3B,IAAI4sB,EAAoB,kBAAN/sB,EACd+sB,GACc,kBAAN9sB,GACM,kBAANC,EAEXC,EAAiB,kBAANA,EAAiBA,EAAI,EAEhCH,EAAIC,EAAIC,EAAIC,EAAI4sB,EAAO/sB,EAAI,EAGxBnJ,KAAK01B,gBACRvsB,GAAKG,EACLF,GAAKE,EACLD,GAAKC,GAGNtJ,KAAKkT,MAAQhK,KACL,IAAJC,MACI,IAAJC,MACI,IAAJC,MACI,IAAJC,Q,y+bCtOC,IAAIiN,EAAU,KACVC,EAAqC,qBAAjB5N,aAA+BA,aAAepJ,MAClE22B,EAASnrB,KAAKyL,OAOlB,SAAS2f,EAAmB3wB,GACjC+Q,EAAa/Q,EAGf,IAAI4wB,EAASrrB,KAAK0L,GAAK,IAOhB,SAAS4f,EAAShtB,GACvB,OAAOA,EAAI+sB,EAYN,SAASjT,EAAO9Z,EAAGD,GACxB,OAAO2B,KAAK2X,IAAIrZ,EAAID,IAAMkN,EAAUvL,KAAKE,IAAI,EAAKF,KAAK2X,IAAIrZ,GAAI0B,KAAK2X,IAAItZ,IC5BnE,SAASnJ,IACd,IAAIyW,EAAM,IAAIC,EAAoB,GAOlC,OANIA,GAAuBhO,eACzB+N,EAAI,GAAK,EACTA,EAAI,GAAK,GAEXA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EASF,SAASE,EAAMvN,GACpB,IAAIqN,EAAM,IAAIC,EAAoB,GAKlC,OAJAD,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAUF,SAASG,EAAKH,EAAKrN,GAKxB,OAJAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EASF,SAASqB,EAASrB,GAKvB,OAJAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAYF,SAASI,EAAWC,EAAKC,EAAKG,EAAKC,GACxC,IAAIV,EAAM,IAAIC,EAAoB,GAKlC,OAJAD,EAAI,GAAKK,EACTL,EAAI,GAAKM,EACTN,EAAI,GAAKS,EACTT,EAAI,GAAKU,EACFV,EAaF,SAASjY,EAAIiY,EAAKK,EAAKC,EAAKG,EAAKC,GAKtC,OAJAV,EAAI,GAAKK,EACTL,EAAI,GAAKM,EACTN,EAAI,GAAKS,EACTT,EAAI,GAAKU,EACFV,EAUF,SAASsB,EAAUtB,EAAKrN,GAG7B,GAAIqN,IAAQrN,EAAG,CACb,IAAIga,EAAKha,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAK2M,OAET3M,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GAGb,OAAOqN,EAUF,SAAS6B,EAAO7B,EAAKrN,GAC1B,IAAI+Z,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GAGPyQ,EAAMsJ,EAAKG,EAAKD,EAAKD,EAEzB,OAAKvJ,GAGLA,EAAM,EAAMA,EAEZpD,EAAI,GAAK6M,EAAKzJ,EACdpD,EAAI,IAAM2M,EAAKvJ,EACfpD,EAAI,IAAM4M,EAAKxJ,EACfpD,EAAI,GAAK0M,EAAKtJ,EAEPpD,GATE,KAmBJ,SAASqD,EAAQrD,EAAKrN,GAE3B,IAAI+Z,EAAK/Z,EAAE,GAMX,OALAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,GAAK0M,EAEF1M,EASF,SAASsD,EAAY3Q,GAC1B,OAAOA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAWzB,SAAS4Q,EAASvD,EAAKrN,EAAGD,GAC/B,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACP6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GAKX,OAJAsN,EAAI,GAAK0M,EAAKlJ,EAAKoJ,EAAKnJ,EACxBzD,EAAI,GAAK2M,EAAKnJ,EAAKqJ,EAAKpJ,EACxBzD,EAAI,GAAK0M,EAAKhJ,EAAKkJ,EAAKjJ,EACxB3D,EAAI,GAAK2M,EAAKjJ,EAAKmJ,EAAKlJ,EACjB3D,EAWF,SAAS+D,EAAO/D,EAAKrN,EAAGqR,GAC7B,IAAI0I,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPxE,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAKjB,OAJAhE,EAAI,GAAK0M,EAAKxX,EAAI0X,EAAKze,EACvB6R,EAAI,GAAK2M,EAAKzX,EAAI2X,EAAK1e,EACvB6R,EAAI,GAAK0M,GAAMve,EAAIye,EAAK1X,EACxB8K,EAAI,GAAK2M,GAAMxe,EAAI0e,EAAK3X,EACjB8K,EAWF,SAAS8D,EAAM9D,EAAKrN,EAAG0I,GAC5B,IAAIqR,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPitB,EAAKvkB,EAAE,GACPS,EAAKT,EAAE,GAKX,OAJA2E,EAAI,GAAK0M,EAAKkT,EACd5f,EAAI,GAAK2M,EAAKiT,EACd5f,EAAI,GAAK4M,EAAK9Q,EACdkE,EAAI,GAAK6M,EAAK/Q,EACPkE,EAcF,SAAS6E,EAAa7E,EAAKgE,GAChC,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAKjB,OAJAhE,EAAI,GAAK9K,EACT8K,EAAI,GAAK7R,EACT6R,EAAI,IAAM7R,EACV6R,EAAI,GAAK9K,EACF8K,EAcF,SAAS4E,EAAY5E,EAAK3E,GAK/B,OAJA2E,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK3E,EAAE,GACJ2E,EASF,SAASkM,EAAIvZ,GAClB,MAAO,QAAUA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,IAS7D,SAASwZ,EAAKxZ,GACnB,OAAO0B,KAAKuT,KAAKvT,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,IAWvF,SAASmtB,EAAIC,EAAGC,EAAGC,EAAGttB,GAK3B,OAJAotB,EAAE,GAAKptB,EAAE,GAAKA,EAAE,GAChBstB,EAAE,GAAKttB,EAAE,GACTstB,EAAE,GAAKttB,EAAE,GACTstB,EAAE,GAAKttB,EAAE,GAAKotB,EAAE,GAAKE,EAAE,GAChB,CAACF,EAAGC,EAAGC,GAWT,SAAS7T,EAAIpM,EAAKrN,EAAGD,GAK1B,OAJAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASqM,EAASrM,EAAKrN,EAAGD,GAK/B,OAJAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAUF,SAASwM,EAAY7Z,EAAGD,GAC7B,OAAOC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,GAUhE,SAAS+Z,EAAO9Z,EAAGD,GACxB,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACP6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GACX,OAAO2B,KAAK2X,IAAIU,EAAKlJ,IAAOvD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIU,GAAKrY,KAAK2X,IAAIxI,KAAQnP,KAAK2X,IAAIW,EAAKlJ,IAAOxD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIW,GAAKtY,KAAK2X,IAAIvI,KAAQpP,KAAK2X,IAAIY,EAAKlJ,IAAOzD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIY,GAAKvY,KAAK2X,IAAItI,KAAQrP,KAAK2X,IAAIa,EAAKlJ,IAAO1D,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIa,GAAKxY,KAAK2X,IAAIrI,IAW9U,SAAS2I,EAAetM,EAAKrN,EAAGD,GAKrC,OAJAsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EACTsN,EAYF,SAASuM,EAAqBvM,EAAKrN,EAAGD,EAAGoR,GAK9C,OAJA9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EAChB9D,EAOF,IAAI+N,EAAMxK,EAMNyK,EAAM3B,ECvZV,SAAS9iB,IACd,IAAIyW,EAAM,IAAIC,EAAoB,GASlC,OARIA,GAAuBhO,eACzB+N,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAEXA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EASF,SAASE,EAAMvN,GACpB,IAAIqN,EAAM,IAAIC,EAAoB,GAOlC,OANAD,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAUF,SAASG,EAAKH,EAAKrN,GAOxB,OANAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EASF,SAASqB,EAASrB,GAOvB,OANAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAcF,SAASI,EAAWzN,EAAGD,EAAGwC,EAAGC,EAAG+qB,EAAIC,GACzC,IAAIngB,EAAM,IAAIC,EAAoB,GAOlC,OANAD,EAAI,GAAKrN,EACTqN,EAAI,GAAKtN,EACTsN,EAAI,GAAK9K,EACT8K,EAAI,GAAK7K,EACT6K,EAAI,GAAKkgB,EACTlgB,EAAI,GAAKmgB,EACFngB,EAeF,SAASjY,EAAIiY,EAAKrN,EAAGD,EAAGwC,EAAGC,EAAG+qB,EAAIC,GAOvC,OANAngB,EAAI,GAAKrN,EACTqN,EAAI,GAAKtN,EACTsN,EAAI,GAAK9K,EACT8K,EAAI,GAAK7K,EACT6K,EAAI,GAAKkgB,EACTlgB,EAAI,GAAKmgB,EACFngB,EAUF,SAAS6B,EAAO7B,EAAKrN,GAC1B,IAAIytB,EAAKztB,EAAE,GACP0tB,EAAK1tB,EAAE,GACP2tB,EAAK3tB,EAAE,GACP4tB,EAAK5tB,EAAE,GACP6tB,EAAM7tB,EAAE,GACR8tB,EAAM9tB,EAAE,GAERyQ,EAAMgd,EAAKG,EAAKF,EAAKC,EACzB,OAAKld,GAGLA,EAAM,EAAMA,EAEZpD,EAAI,GAAKugB,EAAKnd,EACdpD,EAAI,IAAMqgB,EAAKjd,EACfpD,EAAI,IAAMsgB,EAAKld,EACfpD,EAAI,GAAKogB,EAAKhd,EACdpD,EAAI,IAAMsgB,EAAKG,EAAMF,EAAKC,GAAOpd,EACjCpD,EAAI,IAAMqgB,EAAKG,EAAMJ,EAAKK,GAAOrd,EAC1BpD,GAVE,KAmBJ,SAASsD,EAAY3Q,GAC1B,OAAOA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAWzB,SAAS4Q,GAASvD,EAAKrN,EAAGD,GAC/B,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPma,EAAKna,EAAE,GACPoa,EAAKpa,EAAE,GACP6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GACP4a,EAAK5a,EAAE,GACP6a,EAAK7a,EAAE,GAOX,OANAsN,EAAI,GAAK0M,EAAKlJ,EAAKoJ,EAAKnJ,EACxBzD,EAAI,GAAK2M,EAAKnJ,EAAKqJ,EAAKpJ,EACxBzD,EAAI,GAAK0M,EAAKhJ,EAAKkJ,EAAKjJ,EACxB3D,EAAI,GAAK2M,EAAKjJ,EAAKmJ,EAAKlJ,EACxB3D,EAAI,GAAK0M,EAAKY,EAAKV,EAAKW,EAAKT,EAC7B9M,EAAI,GAAK2M,EAAKW,EAAKT,EAAKU,EAAKR,EACtB/M,EAWF,SAAS+D,GAAO/D,EAAKrN,EAAGqR,GAC7B,IAAI0I,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPma,EAAKna,EAAE,GACPoa,EAAKpa,EAAE,GACPxE,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAOjB,OANAhE,EAAI,GAAK0M,EAAKxX,EAAI0X,EAAKze,EACvB6R,EAAI,GAAK2M,EAAKzX,EAAI2X,EAAK1e,EACvB6R,EAAI,GAAK0M,GAAMve,EAAIye,EAAK1X,EACxB8K,EAAI,GAAK2M,GAAMxe,EAAI0e,EAAK3X,EACxB8K,EAAI,GAAK8M,EACT9M,EAAI,GAAK+M,EACF/M,EAWF,SAAS8D,GAAM9D,EAAKrN,EAAG0I,GAC5B,IAAIqR,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPma,EAAKna,EAAE,GACPoa,EAAKpa,EAAE,GACPitB,EAAKvkB,EAAE,GACPS,EAAKT,EAAE,GAOX,OANA2E,EAAI,GAAK0M,EAAKkT,EACd5f,EAAI,GAAK2M,EAAKiT,EACd5f,EAAI,GAAK4M,EAAK9Q,EACdkE,EAAI,GAAK6M,EAAK/Q,EACdkE,EAAI,GAAK8M,EACT9M,EAAI,GAAK+M,EACF/M,EAWF,SAAS4D,GAAU5D,EAAKrN,EAAG0I,GAChC,IAAIqR,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPma,EAAKna,EAAE,GACPoa,EAAKpa,EAAE,GACPitB,EAAKvkB,EAAE,GACPS,EAAKT,EAAE,GAOX,OANA2E,EAAI,GAAK0M,EACT1M,EAAI,GAAK2M,EACT3M,EAAI,GAAK4M,EACT5M,EAAI,GAAK6M,EACT7M,EAAI,GAAK0M,EAAKkT,EAAKhT,EAAK9Q,EAAKgR,EAC7B9M,EAAI,GAAK2M,EAAKiT,EAAK/S,EAAK/Q,EAAKiR,EACtB/M,EAcF,SAAS6E,GAAa7E,EAAKgE,GAChC,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAOjB,OANAhE,EAAI,GAAK9K,EACT8K,EAAI,GAAK7R,EACT6R,EAAI,IAAM7R,EACV6R,EAAI,GAAK9K,EACT8K,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAcF,SAAS4E,GAAY5E,EAAK3E,GAO/B,OANA2E,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAcF,SAAS2E,GAAgB3E,EAAK3E,GAOnC,OANA2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK3E,EAAE,GACJ2E,EASF,SAASkM,GAAIvZ,GAClB,MAAO,SAAWA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,IAS1F,SAASwZ,GAAKxZ,GACnB,OAAO0B,KAAKuT,KAAKvT,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK,GAWpI,SAASyZ,GAAIpM,EAAKrN,EAAGD,GAO1B,OANAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASqM,GAASrM,EAAKrN,EAAGD,GAO/B,OANAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASsM,GAAetM,EAAKrN,EAAGD,GAOrC,OANAsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EACTsN,EAYF,SAASuM,GAAqBvM,EAAKrN,EAAGD,EAAGoR,GAO9C,OANA9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EAChB9D,EAUF,SAASwM,GAAY7Z,EAAGD,GAC7B,OAAOC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,GAUlG,SAAS+Z,GAAO9Z,EAAGD,GACxB,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPma,EAAKna,EAAE,GACPoa,EAAKpa,EAAE,GACP6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GACP4a,EAAK5a,EAAE,GACP6a,EAAK7a,EAAE,GACX,OAAO2B,KAAK2X,IAAIU,EAAKlJ,IAAOvD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIU,GAAKrY,KAAK2X,IAAIxI,KAAQnP,KAAK2X,IAAIW,EAAKlJ,IAAOxD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIW,GAAKtY,KAAK2X,IAAIvI,KAAQpP,KAAK2X,IAAIY,EAAKlJ,IAAOzD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIY,GAAKvY,KAAK2X,IAAItI,KAAQrP,KAAK2X,IAAIa,EAAKlJ,IAAO1D,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIa,GAAKxY,KAAK2X,IAAIrI,KAAQtP,KAAK2X,IAAIc,EAAKQ,IAAOrN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIc,GAAKzY,KAAK2X,IAAIsB,KAAQjZ,KAAK2X,IAAIe,EAAKQ,IAAOtN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIe,GAAK1Y,KAAK2X,IAAIuB,IAOxf,IAAIQ,GAAMxK,GAMNyK,GAAM3B,GCvdV,SAAS9iB,KACd,IAAIyW,EAAM,IAAIC,EAAoB,GAYlC,OAXIA,GAAuBhO,eACzB+N,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAEXA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAUF,SAAS0gB,GAAS1gB,EAAKrN,GAU5B,OATAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,IACJqN,EASF,SAASE,GAAMvN,GACpB,IAAIqN,EAAM,IAAIC,EAAoB,GAUlC,OATAD,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAUF,SAASG,GAAKH,EAAKrN,GAUxB,OATAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAiBF,SAASI,GAAWC,EAAKC,EAAKC,EAAKE,EAAKC,EAAKC,EAAKE,EAAKC,EAAKC,GACjE,IAAIf,EAAM,IAAIC,EAAoB,GAUlC,OATAD,EAAI,GAAKK,EACTL,EAAI,GAAKM,EACTN,EAAI,GAAKO,EACTP,EAAI,GAAKS,EACTT,EAAI,GAAKU,EACTV,EAAI,GAAKW,EACTX,EAAI,GAAKa,EACTb,EAAI,GAAKc,EACTd,EAAI,GAAKe,EACFf,EAkBF,SAASjY,GAAIiY,EAAKK,EAAKC,EAAKC,EAAKE,EAAKC,EAAKC,EAAKE,EAAKC,EAAKC,GAU/D,OATAf,EAAI,GAAKK,EACTL,EAAI,GAAKM,EACTN,EAAI,GAAKO,EACTP,EAAI,GAAKS,EACTT,EAAI,GAAKU,EACTV,EAAI,GAAKW,EACTX,EAAI,GAAKa,EACTb,EAAI,GAAKc,EACTd,EAAI,GAAKe,EACFf,EASF,SAASqB,GAASrB,GAUvB,OATAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAUF,SAASsB,GAAUtB,EAAKrN,GAE7B,GAAIqN,IAAQrN,EAAG,CACb,IAAI4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR+O,EAAM/O,EAAE,GACZqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKuB,EACTvB,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKwB,EACTxB,EAAI,GAAK0B,OAET1B,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GAGb,OAAOqN,EAUF,SAAS6B,GAAO7B,EAAKrN,GAC1B,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,GAER8P,EAAMN,EAAMH,EAAMN,EAAMQ,EACxBiB,GAAOhB,EAAMJ,EAAML,EAAMO,EACzBmC,EAAMlC,EAAMH,EAAMC,EAAMC,EAGxBmB,EAAMtB,EAAMW,EAAMlB,EAAM4B,EAAM3B,EAAM4C,EAExC,OAAKhB,GAGLA,EAAM,EAAMA,EAEZpD,EAAI,GAAKyC,EAAMW,EACfpD,EAAI,KAAOmC,EAAMZ,EAAMC,EAAMU,GAAOkB,EACpCpD,EAAI,IAAM0B,EAAMH,EAAMC,EAAMQ,GAAOoB,EACnCpD,EAAI,GAAKmD,EAAMC,EACfpD,EAAI,IAAMmC,EAAML,EAAMN,EAAMS,GAAOmB,EACnCpD,EAAI,KAAO0B,EAAMI,EAAMN,EAAMO,GAAOqB,EACpCpD,EAAI,GAAKoE,EAAMhB,EACfpD,EAAI,KAAOkC,EAAMJ,EAAMP,EAAMU,GAAOmB,EACpCpD,EAAI,IAAMgC,EAAMF,EAAMP,EAAMQ,GAAOqB,EAC5BpD,GAbE,KAuBJ,SAASqD,GAAQrD,EAAKrN,GAC3B,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,GAWZ,OATAqN,EAAI,GAAKgC,EAAMG,EAAMT,EAAMQ,EAC3BlC,EAAI,GAAKwB,EAAMU,EAAMX,EAAMY,EAC3BnC,EAAI,GAAKuB,EAAMG,EAAMF,EAAMQ,EAC3BhC,EAAI,GAAK0B,EAAMO,EAAMF,EAAMI,EAC3BnC,EAAI,GAAK8B,EAAMK,EAAMX,EAAMS,EAC3BjC,EAAI,GAAKwB,EAAMO,EAAMD,EAAMJ,EAC3B1B,EAAI,GAAK+B,EAAMG,EAAMF,EAAMC,EAC3BjC,EAAI,GAAKuB,EAAMU,EAAMH,EAAMI,EAC3BlC,EAAI,GAAK8B,EAAME,EAAMT,EAAMQ,EACpB/B,EASF,SAASsD,GAAY3Q,GAC1B,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,GAEZ,OAAOmP,GAAOK,EAAMH,EAAMN,EAAMQ,GAAOX,IAAQY,EAAMJ,EAAML,EAAMO,GAAOT,GAAOU,EAAMH,EAAMC,EAAMC,GAW5F,SAASsB,GAASvD,EAAKrN,EAAGD,GAC/B,IAAIoP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,GAER6P,EAAM9P,EAAE,GACR+P,EAAM/P,EAAE,GACRgQ,EAAMhQ,EAAE,GACRwQ,EAAMxQ,EAAE,GACRyQ,EAAMzQ,EAAE,GACRwR,EAAMxR,EAAE,GACRyR,EAAMzR,EAAE,GACR0R,EAAM1R,EAAE,GACR2R,EAAM3R,EAAE,GAaZ,OAXAsN,EAAI,GAAKwC,EAAMV,EAAMW,EAAMV,EAAMW,EAAMT,EACvCjC,EAAI,GAAKwC,EAAMjB,EAAMkB,EAAMT,EAAMU,EAAMR,EACvClC,EAAI,GAAKwC,EAAMhB,EAAMiB,EAAMf,EAAMgB,EAAMP,EAEvCnC,EAAI,GAAKkD,EAAMpB,EAAMqB,EAAMpB,EAAMmC,EAAMjC,EACvCjC,EAAI,GAAKkD,EAAM3B,EAAM4B,EAAMnB,EAAMkC,EAAMhC,EACvClC,EAAI,GAAKkD,EAAM1B,EAAM2B,EAAMzB,EAAMwC,EAAM/B,EAEvCnC,EAAI,GAAKmE,EAAMrC,EAAMsC,EAAMrC,EAAMsC,EAAMpC,EACvCjC,EAAI,GAAKmE,EAAM5C,EAAM6C,EAAMpC,EAAMqC,EAAMnC,EACvClC,EAAI,GAAKmE,EAAM3C,EAAM4C,EAAM1C,EAAM2C,EAAMlC,EAChCnC,EAWF,SAAS4D,GAAU5D,EAAKrN,EAAG0I,GAChC,IAAIyG,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,GACRmH,EAAIuB,EAAE,GACNrB,EAAIqB,EAAE,GAaV,OAXA2E,EAAI,GAAK8B,EACT9B,EAAI,GAAKuB,EACTvB,EAAI,GAAKwB,EAETxB,EAAI,GAAK+B,EACT/B,EAAI,GAAKgC,EACThC,EAAI,GAAK0B,EAET1B,EAAI,GAAKlG,EAAIgI,EAAM9H,EAAI+H,EAAME,EAC7BjC,EAAI,GAAKlG,EAAIyH,EAAMvH,EAAIgI,EAAME,EAC7BlC,EAAI,GAAKlG,EAAI0H,EAAMxH,EAAI0H,EAAMS,EACtBnC,EAWF,SAAS+D,GAAO/D,EAAKrN,EAAGqR,GAC7B,IAAIlC,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,GACRxE,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAajB,OAXAhE,EAAI,GAAK9K,EAAI4M,EAAM3T,EAAI4T,EACvB/B,EAAI,GAAK9K,EAAIqM,EAAMpT,EAAI6T,EACvBhC,EAAI,GAAK9K,EAAIsM,EAAMrT,EAAIuT,EAEvB1B,EAAI,GAAK9K,EAAI6M,EAAM5T,EAAI2T,EACvB9B,EAAI,GAAK9K,EAAI8M,EAAM7T,EAAIoT,EACvBvB,EAAI,GAAK9K,EAAIwM,EAAMvT,EAAIqT,EAEvBxB,EAAI,GAAKiC,EACTjC,EAAI,GAAKkC,EACTlC,EAAI,GAAKmC,EACFnC,EAWF,SAAS8D,GAAM9D,EAAKrN,EAAG0I,GAC5B,IAAIvB,EAAIuB,EAAE,GACNrB,EAAIqB,EAAE,GAaV,OAXA2E,EAAI,GAAKlG,EAAInH,EAAE,GACfqN,EAAI,GAAKlG,EAAInH,EAAE,GACfqN,EAAI,GAAKlG,EAAInH,EAAE,GAEfqN,EAAI,GAAKhG,EAAIrH,EAAE,GACfqN,EAAI,GAAKhG,EAAIrH,EAAE,GACfqN,EAAI,GAAKhG,EAAIrH,EAAE,GAEfqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAcF,SAAS2E,GAAgB3E,EAAK3E,GAUnC,OATA2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EACFA,EAcF,SAAS6E,GAAa7E,EAAKgE,GAChC,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAajB,OAXAhE,EAAI,GAAK9K,EACT8K,EAAI,GAAK7R,EACT6R,EAAI,GAAK,EAETA,EAAI,IAAM7R,EACV6R,EAAI,GAAK9K,EACT8K,EAAI,GAAK,EAETA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAcF,SAAS4E,GAAY5E,EAAK3E,GAY/B,OAXA2E,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EACTA,EAAI,GAAK,EAETA,EAAI,GAAK,EACTA,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EAETA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAUF,SAAS2gB,GAAU3gB,EAAKrN,GAY7B,OAXAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAK,EAETA,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAK,EAETA,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAK,EACFA,EAWF,SAAS+I,GAAS/I,EAAKkF,GAC5B,IAAIpL,EAAIoL,EAAE,GACNlL,EAAIkL,EAAE,GACNrB,EAAIqB,EAAE,GACNC,EAAID,EAAE,GACNlJ,EAAKlC,EAAIA,EACTsC,EAAKpC,EAAIA,EACToL,EAAKvB,EAAIA,EAETwB,EAAKvL,EAAIkC,EACTgN,EAAKhP,EAAIgC,EACTwJ,EAAKxL,EAAIoC,EACT6M,EAAKpF,EAAI7H,EACTkN,EAAKrF,EAAIzH,EACTsJ,EAAK7B,EAAIuB,EACTO,EAAKR,EAAInJ,EACT4J,EAAKT,EAAI/I,EACTyJ,EAAKV,EAAIC,EAcb,OAZApF,EAAI,GAAK,EAAIwF,EAAKE,EAClB1F,EAAI,GAAKgJ,EAAKnD,EACd7F,EAAI,GAAKiJ,EAAKrD,EAEd5F,EAAI,GAAKgJ,EAAKnD,EACd7F,EAAI,GAAK,EAAIqF,EAAKK,EAClB1F,EAAI,GAAKkJ,EAAKvD,EAEd3F,EAAI,GAAKiJ,EAAKrD,EACd5F,EAAI,GAAKkJ,EAAKvD,EACd3F,EAAI,GAAK,EAAIqF,EAAKG,EAEXxF,EAWF,SAAS4gB,GAAe5gB,EAAKrN,GAClC,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRyP,EAAMzP,EAAE,IACR0P,EAAM1P,EAAE,IACR2P,EAAM3P,EAAE,IACR4P,EAAM5P,EAAE,IAER6P,EAAMV,EAAME,EAAMT,EAAMQ,EACxBU,EAAMX,EAAMJ,EAAMF,EAAMO,EACxBW,EAAMZ,EAAMH,EAAMF,EAAMM,EACxBY,EAAMpB,EAAMG,EAAMF,EAAMQ,EACxBY,EAAMrB,EAAMI,EAAMF,EAAMO,EACxBa,EAAMrB,EAAMG,EAAMF,EAAMC,EACxBoB,EAAMb,EAAMI,EAAMH,EAAME,EACxBW,EAAMd,EAAMK,EAAMH,EAAMC,EACxBY,EAAMf,EAAMM,EAAMX,EAAMQ,EACxBa,EAAMf,EAAMI,EAAMH,EAAME,EACxBa,EAAMhB,EAAMK,EAAMX,EAAMS,EACxBc,EAAMhB,EAAMI,EAAMX,EAAMU,EAGxBc,EAAMZ,EAAMW,EAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EAE5E,OAAKM,GAGLA,EAAM,EAAMA,EAEZpD,EAAI,IAAMgC,EAAMmB,EAAMzB,EAAMwB,EAAMvB,EAAMsB,GAAOG,EAC/CpD,EAAI,IAAM0B,EAAMsB,EAAMjB,EAAMoB,EAAMxB,EAAMoB,GAAOK,EAC/CpD,EAAI,IAAM+B,EAAMmB,EAAMlB,EAAMgB,EAAMrB,EAAMmB,GAAOM,EAE/CpD,EAAI,IAAMwB,EAAM0B,EAAM3B,EAAM4B,EAAM1B,EAAMwB,GAAOG,EAC/CpD,EAAI,IAAM8B,EAAMqB,EAAM3B,EAAMwB,EAAMvB,EAAMsB,GAAOK,EAC/CpD,EAAI,IAAMuB,EAAMyB,EAAMlB,EAAMoB,EAAMzB,EAAMqB,GAAOM,EAE/CpD,EAAI,IAAMqC,EAAMQ,EAAMP,EAAMM,EAAML,EAAMI,GAAOS,EAC/CpD,EAAI,IAAMsC,EAAMI,EAAMN,EAAMS,EAAMN,EAAME,GAAOW,EAC/CpD,EAAI,IAAMoC,EAAMQ,EAAMP,EAAMK,EAAMH,EAAMC,GAAOY,EAExCpD,GAhBE,KA2BJ,SAAS5G,GAAW4G,EAAK3U,EAAOC,GAUrC,OATA0U,EAAI,GAAK,EAAI3U,EACb2U,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EAAI1U,EACd0U,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EASF,SAASkM,GAAIvZ,GAClB,MAAO,QAAUA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,IASnI,SAASwZ,GAAKxZ,GACnB,OAAO0B,KAAKuT,KAAKvT,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,IAW3L,SAASyZ,GAAIpM,EAAKrN,EAAGD,GAU1B,OATAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASqM,GAASrM,EAAKrN,EAAGD,GAU/B,OATAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASsM,GAAetM,EAAKrN,EAAGD,GAUrC,OATAsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EACTsN,EAYF,SAASuM,GAAqBvM,EAAKrN,EAAGD,EAAGoR,GAU9C,OATA9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EAChB9D,EAUF,SAASwM,GAAY7Z,EAAGD,GAC7B,OAAOC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,GAUrJ,SAAS+Z,GAAO9Z,EAAGD,GACxB,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPma,EAAKna,EAAE,GACPoa,EAAKpa,EAAE,GACPqa,EAAKra,EAAE,GACPsa,EAAKta,EAAE,GACPua,EAAKva,EAAE,GACP6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GACP4a,EAAK5a,EAAE,GACP6a,EAAK7a,EAAE,GACP8a,EAAK9a,EAAE,GACP+a,EAAK/a,EAAE,GACPgb,EAAKhb,EAAE,GACX,OAAO2B,KAAK2X,IAAIU,EAAKlJ,IAAOvD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIU,GAAKrY,KAAK2X,IAAIxI,KAAQnP,KAAK2X,IAAIW,EAAKlJ,IAAOxD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIW,GAAKtY,KAAK2X,IAAIvI,KAAQpP,KAAK2X,IAAIY,EAAKlJ,IAAOzD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIY,GAAKvY,KAAK2X,IAAItI,KAAQrP,KAAK2X,IAAIa,EAAKlJ,IAAO1D,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIa,GAAKxY,KAAK2X,IAAIrI,KAAQtP,KAAK2X,IAAIc,EAAKQ,IAAOrN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIc,GAAKzY,KAAK2X,IAAIsB,KAAQjZ,KAAK2X,IAAIe,EAAKQ,IAAOtN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIe,GAAK1Y,KAAK2X,IAAIuB,KAAQlZ,KAAK2X,IAAIgB,EAAKQ,IAAOvN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIgB,GAAK3Y,KAAK2X,IAAIwB,KAAQnZ,KAAK2X,IAAIiB,EAAKQ,IAAOxN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIiB,GAAK5Y,KAAK2X,IAAIyB,KAAQpZ,KAAK2X,IAAIkB,EAAKQ,IAAOzN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIkB,GAAK7Y,KAAK2X,IAAI0B,IAOvvB,IAAIK,GAAMxK,GAMNyK,GAAM3B,GC7xBV,SAAS9iB,KACd,IAAIyW,EAAM,IAAIC,EAAoB,IAmBlC,OAlBIA,GAAuBhO,eACzB+N,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,GAEZA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EASF,SAASE,GAAMvN,GACpB,IAAIqN,EAAM,IAAIC,EAAoB,IAiBlC,OAhBAD,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACLqN,EAUF,SAASG,GAAKH,EAAKrN,GAiBxB,OAhBAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACLqN,EAwBF,SAASI,GAAWC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACpG,IAAIpB,EAAM,IAAIC,EAAoB,IAiBlC,OAhBAD,EAAI,GAAKK,EACTL,EAAI,GAAKM,EACTN,EAAI,GAAKO,EACTP,EAAI,GAAKQ,EACTR,EAAI,GAAKS,EACTT,EAAI,GAAKU,EACTV,EAAI,GAAKW,EACTX,EAAI,GAAKY,EACTZ,EAAI,GAAKa,EACTb,EAAI,GAAKc,EACTd,EAAI,IAAMe,EACVf,EAAI,IAAMgB,EACVhB,EAAI,IAAMiB,EACVjB,EAAI,IAAMkB,EACVlB,EAAI,IAAMmB,EACVnB,EAAI,IAAMoB,EACHpB,EAyBF,SAASjY,GAAIiY,EAAKK,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAiBlG,OAhBApB,EAAI,GAAKK,EACTL,EAAI,GAAKM,EACTN,EAAI,GAAKO,EACTP,EAAI,GAAKQ,EACTR,EAAI,GAAKS,EACTT,EAAI,GAAKU,EACTV,EAAI,GAAKW,EACTX,EAAI,GAAKY,EACTZ,EAAI,GAAKa,EACTb,EAAI,GAAKc,EACTd,EAAI,IAAMe,EACVf,EAAI,IAAMgB,EACVhB,EAAI,IAAMiB,EACVjB,EAAI,IAAMkB,EACVlB,EAAI,IAAMmB,EACVnB,EAAI,IAAMoB,EACHpB,EASF,SAASqB,GAASrB,GAiBvB,OAhBAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAUF,SAASsB,GAAUtB,EAAKrN,GAE7B,GAAIqN,IAAQrN,EAAG,CACb,IAAI4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRiP,EAAMjP,EAAE,IAEZqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,IACXqN,EAAI,GAAKuB,EACTvB,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,IACXqN,EAAI,GAAKwB,EACTxB,EAAI,GAAK0B,EACT1B,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMyB,EACVzB,EAAI,IAAM2B,EACV3B,EAAI,IAAM4B,OAEV5B,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,IACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,IACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IAGd,OAAOqN,EAUF,SAAS6B,GAAO7B,EAAKrN,GAC1B,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRyP,EAAMzP,EAAE,IACR0P,EAAM1P,EAAE,IACR2P,EAAM3P,EAAE,IACR4P,EAAM5P,EAAE,IAER6P,EAAMV,EAAME,EAAMT,EAAMQ,EACxBU,EAAMX,EAAMJ,EAAMF,EAAMO,EACxBW,EAAMZ,EAAMH,EAAMF,EAAMM,EACxBY,EAAMpB,EAAMG,EAAMF,EAAMQ,EACxBY,EAAMrB,EAAMI,EAAMF,EAAMO,EACxBa,EAAMrB,EAAMG,EAAMF,EAAMC,EACxBoB,EAAMb,EAAMI,EAAMH,EAAME,EACxBW,EAAMd,EAAMK,EAAMH,EAAMC,EACxBY,EAAMf,EAAMM,EAAMX,EAAMQ,EACxBa,EAAMf,EAAMI,EAAMH,EAAME,EACxBa,EAAMhB,EAAMK,EAAMX,EAAMS,EACxBc,EAAMhB,EAAMI,EAAMX,EAAMU,EAGxBc,EAAMZ,EAAMW,EAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EAE5E,OAAKM,GAGLA,EAAM,EAAMA,EAEZpD,EAAI,IAAMgC,EAAMmB,EAAMzB,EAAMwB,EAAMvB,EAAMsB,GAAOG,EAC/CpD,EAAI,IAAMwB,EAAM0B,EAAM3B,EAAM4B,EAAM1B,EAAMwB,GAAOG,EAC/CpD,EAAI,IAAMqC,EAAMQ,EAAMP,EAAMM,EAAML,EAAMI,GAAOS,EAC/CpD,EAAI,IAAMmC,EAAMS,EAAMV,EAAMW,EAAMjB,EAAMe,GAAOS,EAC/CpD,EAAI,IAAM0B,EAAMsB,EAAMjB,EAAMoB,EAAMxB,EAAMoB,GAAOK,EAC/CpD,EAAI,IAAM8B,EAAMqB,EAAM3B,EAAMwB,EAAMvB,EAAMsB,GAAOK,EAC/CpD,EAAI,IAAMsC,EAAMI,EAAMN,EAAMS,EAAMN,EAAME,GAAOW,EAC/CpD,EAAI,IAAMiC,EAAMY,EAAMV,EAAMO,EAAMd,EAAMa,GAAOW,EAC/CpD,EAAI,IAAM+B,EAAMmB,EAAMlB,EAAMgB,EAAMrB,EAAMmB,GAAOM,EAC/CpD,EAAI,IAAMuB,EAAMyB,EAAMlB,EAAMoB,EAAMzB,EAAMqB,GAAOM,EAC/CpD,EAAI,KAAOoC,EAAMQ,EAAMP,EAAMK,EAAMH,EAAMC,GAAOY,EAChDpD,EAAI,KAAOkC,EAAMQ,EAAMT,EAAMW,EAAMhB,EAAMY,GAAOY,EAChDpD,EAAI,KAAOgC,EAAMe,EAAMhB,EAAMkB,EAAMvB,EAAMoB,GAAOM,EAChDpD,EAAI,KAAO8B,EAAMmB,EAAM1B,EAAMwB,EAAMvB,EAAMsB,GAAOM,EAChDpD,EAAI,KAAOqC,EAAMI,EAAML,EAAMO,EAAML,EAAME,GAAOY,EAChDpD,EAAI,KAAOiC,EAAMU,EAAMT,EAAMO,EAAMN,EAAMK,GAAOY,EAEzCpD,GArBE,KA+BJ,SAASqD,GAAQrD,EAAKrN,GAC3B,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRyP,EAAMzP,EAAE,IACR0P,EAAM1P,EAAE,IACR2P,EAAM3P,EAAE,IACR4P,EAAM5P,EAAE,IAkBZ,OAhBAqN,EAAI,GAAKgC,GAAOG,EAAMI,EAAMX,EAAMU,GAAOJ,GAAOR,EAAMa,EAAMZ,EAAMW,GAAOD,GAAOX,EAAME,EAAMD,EAAMQ,GAClGnC,EAAI,KAAOuB,GAAOY,EAAMI,EAAMX,EAAMU,GAAOJ,GAAOV,EAAMe,EAAMd,EAAMa,GAAOD,GAAOb,EAAMI,EAAMH,EAAMU,IACpGnC,EAAI,GAAKuB,GAAOG,EAAMa,EAAMZ,EAAMW,GAAON,GAAOR,EAAMe,EAAMd,EAAMa,GAAOD,GAAOb,EAAMG,EAAMF,EAAMC,GAClG1B,EAAI,KAAOuB,GAAOG,EAAME,EAAMD,EAAMQ,GAAOH,GAAOR,EAAMI,EAAMH,EAAMU,GAAOD,GAAOV,EAAMG,EAAMF,EAAMC,IACpG1B,EAAI,KAAO+B,GAAOI,EAAMI,EAAMX,EAAMU,GAAOL,GAAOP,EAAMa,EAAMZ,EAAMW,GAAOF,GAAOV,EAAME,EAAMD,EAAMQ,IACpGnC,EAAI,GAAK8B,GAAOK,EAAMI,EAAMX,EAAMU,GAAOL,GAAOT,EAAMe,EAAMd,EAAMa,GAAOF,GAAOZ,EAAMI,EAAMH,EAAMU,GAClGnC,EAAI,KAAO8B,GAAOJ,EAAMa,EAAMZ,EAAMW,GAAOP,GAAOP,EAAMe,EAAMd,EAAMa,GAAOF,GAAOZ,EAAMG,EAAMF,EAAMC,IACpG1B,EAAI,GAAK8B,GAAOJ,EAAME,EAAMD,EAAMQ,GAAOJ,GAAOP,EAAMI,EAAMH,EAAMU,GAAOF,GAAOT,EAAMG,EAAMF,EAAMC,GAClG1B,EAAI,GAAK+B,GAAOG,EAAMK,EAAMX,EAAMS,GAAOJ,GAAOD,EAAMO,EAAMZ,EAAMU,GAAOD,GAAOJ,EAAMJ,EAAMD,EAAMO,GAClGlC,EAAI,KAAO8B,GAAOI,EAAMK,EAAMX,EAAMS,GAAOJ,GAAOV,EAAMgB,EAAMd,EAAMY,GAAOD,GAAOb,EAAMK,EAAMH,EAAMS,IACpGlC,EAAI,IAAM8B,GAAOE,EAAMO,EAAMZ,EAAMU,GAAON,GAAOR,EAAMgB,EAAMd,EAAMY,GAAOD,GAAOb,EAAMI,EAAMF,EAAMO,GACnGhC,EAAI,MAAQ8B,GAAOE,EAAMJ,EAAMD,EAAMO,GAAOH,GAAOR,EAAMK,EAAMH,EAAMS,GAAOD,GAAOV,EAAMI,EAAMF,EAAMO,IACrGhC,EAAI,MAAQ+B,GAAOG,EAAMI,EAAMH,EAAME,GAAOJ,GAAOD,EAAMM,EAAMZ,EAAMW,GAAOD,GAAOJ,EAAMG,EAAMT,EAAMQ,IACrGlC,EAAI,IAAM8B,GAAOI,EAAMI,EAAMH,EAAME,GAAOJ,GAAOV,EAAMe,EAAMd,EAAMa,GAAOD,GAAOb,EAAMY,EAAMX,EAAMU,GACnGlC,EAAI,MAAQ8B,GAAOE,EAAMM,EAAMZ,EAAMW,GAAON,GAAOR,EAAMe,EAAMd,EAAMa,GAAOD,GAAOb,EAAMG,EAAMF,EAAMQ,IACrGhC,EAAI,IAAM8B,GAAOE,EAAMG,EAAMT,EAAMQ,GAAOH,GAAOR,EAAMY,EAAMX,EAAMU,GAAOD,GAAOV,EAAMG,EAAMF,EAAMQ,GAC5FhC,EASF,SAASsD,GAAY3Q,GAC1B,IAAImP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRyP,EAAMzP,EAAE,IACR0P,EAAM1P,EAAE,IACR2P,EAAM3P,EAAE,IACR4P,EAAM5P,EAAE,IAgBZ,OAdUmP,EAAME,EAAMT,EAAMQ,IAWlBI,EAAMI,EAAMX,EAAMU,IAVlBR,EAAMJ,EAAMF,EAAMO,IASlBG,EAAMK,EAAMX,EAAMS,IARlBP,EAAMH,EAAMF,EAAMM,IAOlBG,EAAMI,EAAMH,EAAME,IANlBd,EAAMG,EAAMF,EAAMQ,IAKlBC,EAAMM,EAAMX,EAAMQ,IAJlBb,EAAMI,EAAMF,EAAMO,IAGlBC,EAAMK,EAAMH,EAAMC,IAFlBZ,EAAMG,EAAMF,EAAMC,IAClBO,EAAMI,EAAMH,EAAME,GAmBvB,SAASmB,GAASvD,EAAKrN,EAAGD,GAC/B,IAAIoP,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IACRyP,EAAMzP,EAAE,IACR0P,EAAM1P,EAAE,IACR2P,EAAM3P,EAAE,IACR4P,EAAM5P,EAAE,IAGR6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GAuBX,OAtBAsN,EAAI,GAAKwD,EAAK1B,EAAM2B,EAAK1B,EAAM2B,EAAKzB,EAAM0B,EAAKvB,EAC/CpC,EAAI,GAAKwD,EAAKjC,EAAMkC,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/CrC,EAAI,GAAKwD,EAAKhC,EAAMiC,EAAK/B,EAAMgC,EAAKvB,EAAMwB,EAAKrB,EAC/CtC,EAAI,GAAKwD,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAK9B,EAAM+B,EAAKpB,EAE/CiB,EAAK9Q,EAAE,GAAG+Q,EAAK/Q,EAAE,GAAGgR,EAAKhR,EAAE,GAAGiR,EAAKjR,EAAE,GACrCsN,EAAI,GAAKwD,EAAK1B,EAAM2B,EAAK1B,EAAM2B,EAAKzB,EAAM0B,EAAKvB,EAC/CpC,EAAI,GAAKwD,EAAKjC,EAAMkC,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/CrC,EAAI,GAAKwD,EAAKhC,EAAMiC,EAAK/B,EAAMgC,EAAKvB,EAAMwB,EAAKrB,EAC/CtC,EAAI,GAAKwD,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAK9B,EAAM+B,EAAKpB,EAE/CiB,EAAK9Q,EAAE,GAAG+Q,EAAK/Q,EAAE,GAAGgR,EAAKhR,EAAE,IAAIiR,EAAKjR,EAAE,IACtCsN,EAAI,GAAKwD,EAAK1B,EAAM2B,EAAK1B,EAAM2B,EAAKzB,EAAM0B,EAAKvB,EAC/CpC,EAAI,GAAKwD,EAAKjC,EAAMkC,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/CrC,EAAI,IAAMwD,EAAKhC,EAAMiC,EAAK/B,EAAMgC,EAAKvB,EAAMwB,EAAKrB,EAChDtC,EAAI,IAAMwD,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAK9B,EAAM+B,EAAKpB,EAEhDiB,EAAK9Q,EAAE,IAAI+Q,EAAK/Q,EAAE,IAAIgR,EAAKhR,EAAE,IAAIiR,EAAKjR,EAAE,IACxCsN,EAAI,IAAMwD,EAAK1B,EAAM2B,EAAK1B,EAAM2B,EAAKzB,EAAM0B,EAAKvB,EAChDpC,EAAI,IAAMwD,EAAKjC,EAAMkC,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAChDrC,EAAI,IAAMwD,EAAKhC,EAAMiC,EAAK/B,EAAMgC,EAAKvB,EAAMwB,EAAKrB,EAChDtC,EAAI,IAAMwD,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAK9B,EAAM+B,EAAKpB,EACzCvC,EAWF,SAAS4D,GAAU5D,EAAKrN,EAAG0I,GAChC,IAAIvB,EAAIuB,EAAE,GACNrB,EAAIqB,EAAE,GACNwI,EAAIxI,EAAE,GACNyG,OAAM,EACNP,OAAM,EACNC,OAAM,EACNC,OAAM,EACNM,OAAM,EACNC,OAAM,EACNN,OAAM,EACNC,OAAM,EACNM,OAAM,EACNC,OAAM,EACNC,OAAM,EACNP,OAAM,EAsBV,OApBIjP,IAAMqN,GACRA,EAAI,IAAMrN,EAAE,GAAKmH,EAAInH,EAAE,GAAKqH,EAAIrH,EAAE,GAAKkR,EAAIlR,EAAE,IAC7CqN,EAAI,IAAMrN,EAAE,GAAKmH,EAAInH,EAAE,GAAKqH,EAAIrH,EAAE,GAAKkR,EAAIlR,EAAE,IAC7CqN,EAAI,IAAMrN,EAAE,GAAKmH,EAAInH,EAAE,GAAKqH,EAAIrH,EAAE,IAAMkR,EAAIlR,EAAE,IAC9CqN,EAAI,IAAMrN,EAAE,GAAKmH,EAAInH,EAAE,GAAKqH,EAAIrH,EAAE,IAAMkR,EAAIlR,EAAE,MAE9CmP,EAAMnP,EAAE,GAAG4O,EAAM5O,EAAE,GAAG6O,EAAM7O,EAAE,GAAG8O,EAAM9O,EAAE,GACzCoP,EAAMpP,EAAE,GAAGqP,EAAMrP,EAAE,GAAG+O,EAAM/O,EAAE,GAAGgP,EAAMhP,EAAE,GACzCsP,EAAMtP,EAAE,GAAGuP,EAAMvP,EAAE,GAAGwP,EAAMxP,EAAE,IAAIiP,EAAMjP,EAAE,IAE1CqN,EAAI,GAAK8B,EAAI9B,EAAI,GAAKuB,EAAIvB,EAAI,GAAKwB,EAAIxB,EAAI,GAAKyB,EAChDzB,EAAI,GAAK+B,EAAI/B,EAAI,GAAKgC,EAAIhC,EAAI,GAAK0B,EAAI1B,EAAI,GAAK2B,EAChD3B,EAAI,GAAKiC,EAAIjC,EAAI,GAAKkC,EAAIlC,EAAI,IAAMmC,EAAInC,EAAI,IAAM4B,EAElD5B,EAAI,IAAM8B,EAAMhI,EAAIiI,EAAM/H,EAAIiI,EAAM4B,EAAIlR,EAAE,IAC1CqN,EAAI,IAAMuB,EAAMzH,EAAIkI,EAAMhI,EAAIkI,EAAM2B,EAAIlR,EAAE,IAC1CqN,EAAI,IAAMwB,EAAM1H,EAAI4H,EAAM1H,EAAImI,EAAM0B,EAAIlR,EAAE,IAC1CqN,EAAI,IAAMyB,EAAM3H,EAAI6H,EAAM3H,EAAI4H,EAAMiC,EAAIlR,EAAE,KAGrCqN,EAWF,SAAS8D,GAAM9D,EAAKrN,EAAG0I,GAC5B,IAAIvB,EAAIuB,EAAE,GACNrB,EAAIqB,EAAE,GACNwI,EAAIxI,EAAE,GAkBV,OAhBA2E,EAAI,GAAKrN,EAAE,GAAKmH,EAChBkG,EAAI,GAAKrN,EAAE,GAAKmH,EAChBkG,EAAI,GAAKrN,EAAE,GAAKmH,EAChBkG,EAAI,GAAKrN,EAAE,GAAKmH,EAChBkG,EAAI,GAAKrN,EAAE,GAAKqH,EAChBgG,EAAI,GAAKrN,EAAE,GAAKqH,EAChBgG,EAAI,GAAKrN,EAAE,GAAKqH,EAChBgG,EAAI,GAAKrN,EAAE,GAAKqH,EAChBgG,EAAI,GAAKrN,EAAE,GAAKkR,EAChB7D,EAAI,GAAKrN,EAAE,GAAKkR,EAChB7D,EAAI,IAAMrN,EAAE,IAAMkR,EAClB7D,EAAI,IAAMrN,EAAE,IAAMkR,EAClB7D,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACLqN,EAYF,SAAS+D,GAAO/D,EAAKrN,EAAGqR,EAAKC,GAClC,IAII9V,EACA+G,EACA9G,EACA0T,EACAP,EACAC,EACAC,EACAM,EACAC,EACAN,EACAC,EACAM,EACAC,EACAC,EACAP,EACAY,EACAC,EACAC,EACAQ,EACAC,EACAe,EACAC,EACAC,EACAC,EA3BAvK,EAAImK,EAAK,GACTjK,EAAIiK,EAAK,GACTJ,EAAII,EAAK,GACTK,EAAMjQ,KAAKuT,KAAK9N,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,GA0BxC,OAAIS,EAAMrE,EACD,MAITnG,GADAwK,EAAM,EAAIA,EAEVtK,GAAKsK,EACLT,GAAKS,EAELnW,EAAIkG,KAAKoI,IAAIuH,GAEb5V,EAAI,GADJ8G,EAAIb,KAAKmI,IAAIwH,IAGblC,EAAMnP,EAAE,GAAG4O,EAAM5O,EAAE,GAAG6O,EAAM7O,EAAE,GAAG8O,EAAM9O,EAAE,GACzCoP,EAAMpP,EAAE,GAAGqP,EAAMrP,EAAE,GAAG+O,EAAM/O,EAAE,GAAGgP,EAAMhP,EAAE,GACzCsP,EAAMtP,EAAE,GAAGuP,EAAMvP,EAAE,GAAGwP,EAAMxP,EAAE,IAAIiP,EAAMjP,EAAE,IAG1C6P,EAAM1I,EAAIA,EAAI1L,EAAI8G,EAAEuN,EAAMzI,EAAIF,EAAI1L,EAAIyV,EAAI1V,EAAEuU,EAAMmB,EAAI/J,EAAI1L,EAAI4L,EAAI7L,EAClE+U,EAAMpJ,EAAIE,EAAI5L,EAAIyV,EAAI1V,EAAEgV,EAAMnJ,EAAIA,EAAI5L,EAAI8G,EAAEgP,EAAML,EAAI7J,EAAI5L,EAAI0L,EAAI3L,EAClEgW,EAAMrK,EAAI+J,EAAIzV,EAAI4L,EAAI7L,EAAEiW,EAAMpK,EAAI6J,EAAIzV,EAAI0L,EAAI3L,EAAEkW,EAAMR,EAAIA,EAAIzV,EAAI8G,EAGlE8K,EAAI,GAAK8B,EAAMU,EAAMT,EAAMU,EAAMR,EAAMS,EACvC1C,EAAI,GAAKuB,EAAMiB,EAAMR,EAAMS,EAAMP,EAAMQ,EACvC1C,EAAI,GAAKwB,EAAMgB,EAAMd,EAAMe,EAAMN,EAAMO,EACvC1C,EAAI,GAAKyB,EAAMe,EAAMb,EAAMc,EAAMb,EAAMc,EACvC1C,EAAI,GAAK8B,EAAMoB,EAAMnB,EAAMoB,EAAMlB,EAAMiC,EACvClE,EAAI,GAAKuB,EAAM2B,EAAMlB,EAAMmB,EAAMjB,EAAMgC,EACvClE,EAAI,GAAKwB,EAAM0B,EAAMxB,EAAMyB,EAAMhB,EAAM+B,EACvClE,EAAI,GAAKyB,EAAMyB,EAAMvB,EAAMwB,EAAMvB,EAAMsC,EACvClE,EAAI,GAAK8B,EAAMqC,EAAMpC,EAAMqC,EAAMnC,EAAMoC,EACvCrE,EAAI,GAAKuB,EAAM4C,EAAMnC,EAAMoC,EAAMlC,EAAMmC,EACvCrE,EAAI,IAAMwB,EAAM2C,EAAMzC,EAAM0C,EAAMjC,EAAMkC,EACxCrE,EAAI,IAAMyB,EAAM0C,EAAMxC,EAAMyC,EAAMxC,EAAMyC,EAEpC1R,IAAMqN,IAERA,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,KAEPqN,GAWF,SAASwE,GAAQxE,EAAKrN,EAAGqR,GAC9B,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GACbjC,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IAuBZ,OArBIA,IAAMqN,IAERA,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,KAIdqN,EAAI,GAAK+B,EAAM7M,EAAI+M,EAAM9T,EACzB6R,EAAI,GAAKgC,EAAM9M,EAAIgN,EAAM/T,EACzB6R,EAAI,GAAK0B,EAAMxM,EAAIiN,EAAMhU,EACzB6R,EAAI,GAAK2B,EAAMzM,EAAI0M,EAAMzT,EACzB6R,EAAI,GAAKiC,EAAM/M,EAAI6M,EAAM5T,EACzB6R,EAAI,GAAKkC,EAAMhN,EAAI8M,EAAM7T,EACzB6R,EAAI,IAAMmC,EAAMjN,EAAIwM,EAAMvT,EAC1B6R,EAAI,IAAM4B,EAAM1M,EAAIyM,EAAMxT,EACnB6R,EAWF,SAASyE,GAAQzE,EAAKrN,EAAGqR,GAC9B,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GACblC,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRsP,EAAMtP,EAAE,GACRuP,EAAMvP,EAAE,GACRwP,EAAMxP,EAAE,IACRiP,EAAMjP,EAAE,IAuBZ,OArBIA,IAAMqN,IAERA,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,KAIdqN,EAAI,GAAK8B,EAAM5M,EAAI+M,EAAM9T,EACzB6R,EAAI,GAAKuB,EAAMrM,EAAIgN,EAAM/T,EACzB6R,EAAI,GAAKwB,EAAMtM,EAAIiN,EAAMhU,EACzB6R,EAAI,GAAKyB,EAAMvM,EAAI0M,EAAMzT,EACzB6R,EAAI,GAAK8B,EAAM3T,EAAI8T,EAAM/M,EACzB8K,EAAI,GAAKuB,EAAMpT,EAAI+T,EAAMhN,EACzB8K,EAAI,IAAMwB,EAAMrT,EAAIgU,EAAMjN,EAC1B8K,EAAI,IAAMyB,EAAMtT,EAAIyT,EAAM1M,EACnB8K,EAWF,SAAS0E,GAAQ1E,EAAKrN,EAAGqR,GAC9B,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GACblC,EAAMnP,EAAE,GACR4O,EAAM5O,EAAE,GACR6O,EAAM7O,EAAE,GACR8O,EAAM9O,EAAE,GACRoP,EAAMpP,EAAE,GACRqP,EAAMrP,EAAE,GACR+O,EAAM/O,EAAE,GACRgP,EAAMhP,EAAE,GAuBZ,OArBIA,IAAMqN,IAERA,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,IACZqN,EAAI,IAAMrN,EAAE,KAIdqN,EAAI,GAAK8B,EAAM5M,EAAI6M,EAAM5T,EACzB6R,EAAI,GAAKuB,EAAMrM,EAAI8M,EAAM7T,EACzB6R,EAAI,GAAKwB,EAAMtM,EAAIwM,EAAMvT,EACzB6R,EAAI,GAAKyB,EAAMvM,EAAIyM,EAAMxT,EACzB6R,EAAI,GAAK+B,EAAM7M,EAAI4M,EAAM3T,EACzB6R,EAAI,GAAKgC,EAAM9M,EAAIqM,EAAMpT,EACzB6R,EAAI,GAAK0B,EAAMxM,EAAIsM,EAAMrT,EACzB6R,EAAI,GAAK2B,EAAMzM,EAAIuM,EAAMtT,EAClB6R,EAcF,SAAS2E,GAAgB3E,EAAK3E,GAiBnC,OAhBA2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM,EACHA,EAcF,SAAS4E,GAAY5E,EAAK3E,GAiB/B,OAhBA2E,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK3E,EAAE,GACX2E,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAeF,SAAS6E,GAAa7E,EAAKgE,EAAKC,GACrC,IAII9V,EACA+G,EACA9G,EANA0L,EAAImK,EAAK,GACTjK,EAAIiK,EAAK,GACTJ,EAAII,EAAK,GACTK,EAAMjQ,KAAKuT,KAAK9N,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,GAKxC,OAAIS,EAAMrE,EACD,MAITnG,GADAwK,EAAM,EAAIA,EAEVtK,GAAKsK,EACLT,GAAKS,EAELnW,EAAIkG,KAAKoI,IAAIuH,GAEb5V,EAAI,GADJ8G,EAAIb,KAAKmI,IAAIwH,IAIbhE,EAAI,GAAKlG,EAAIA,EAAI1L,EAAI8G,EACrB8K,EAAI,GAAKhG,EAAIF,EAAI1L,EAAIyV,EAAI1V,EACzB6R,EAAI,GAAK6D,EAAI/J,EAAI1L,EAAI4L,EAAI7L,EACzB6R,EAAI,GAAK,EACTA,EAAI,GAAKlG,EAAIE,EAAI5L,EAAIyV,EAAI1V,EACzB6R,EAAI,GAAKhG,EAAIA,EAAI5L,EAAI8G,EACrB8K,EAAI,GAAK6D,EAAI7J,EAAI5L,EAAI0L,EAAI3L,EACzB6R,EAAI,GAAK,EACTA,EAAI,GAAKlG,EAAI+J,EAAIzV,EAAI4L,EAAI7L,EACzB6R,EAAI,GAAKhG,EAAI6J,EAAIzV,EAAI0L,EAAI3L,EACzB6R,EAAI,IAAM6D,EAAIA,EAAIzV,EAAI8G,EACtB8K,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,GAcF,SAAS8E,GAAc9E,EAAKgE,GACjC,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAmBjB,OAhBAhE,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK9K,EACT8K,EAAI,GAAK7R,EACT6R,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM7R,EACV6R,EAAI,IAAM9K,EACV8K,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAcF,SAAS+E,GAAc/E,EAAKgE,GACjC,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAmBjB,OAhBAhE,EAAI,GAAK9K,EACT8K,EAAI,GAAK,EACTA,EAAI,IAAM7R,EACV6R,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK7R,EACT6R,EAAI,GAAK,EACTA,EAAI,IAAM9K,EACV8K,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAcF,SAASgF,GAAchF,EAAKgE,GACjC,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACb9O,EAAIb,KAAKmI,IAAIwH,GAmBjB,OAhBAhE,EAAI,GAAK9K,EACT8K,EAAI,GAAK7R,EACT6R,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM7R,EACV6R,EAAI,GAAK9K,EACT8K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAkBF,SAASiF,GAAwBjF,EAAKkF,EAAG7J,GAE9C,IAAIvB,EAAIoL,EAAE,GACNlL,EAAIkL,EAAE,GACNrB,EAAIqB,EAAE,GACNC,EAAID,EAAE,GACNlJ,EAAKlC,EAAIA,EACTsC,EAAKpC,EAAIA,EACToL,EAAKvB,EAAIA,EAETwB,EAAKvL,EAAIkC,EACTsJ,EAAKxL,EAAIsC,EACTmJ,EAAKzL,EAAIsL,EACTI,EAAKxL,EAAIoC,EACTqJ,EAAKzL,EAAIoL,EACTM,EAAK7B,EAAIuB,EACTO,EAAKR,EAAInJ,EACT4J,EAAKT,EAAI/I,EACTyJ,EAAKV,EAAIC,EAmBb,OAjBApF,EAAI,GAAK,GAAKwF,EAAKE,GACnB1F,EAAI,GAAKsF,EAAKO,EACd7F,EAAI,GAAKuF,EAAKK,EACd5F,EAAI,GAAK,EACTA,EAAI,GAAKsF,EAAKO,EACd7F,EAAI,GAAK,GAAKqF,EAAKK,GACnB1F,EAAI,GAAKyF,EAAKE,EACd3F,EAAI,GAAK,EACTA,EAAI,GAAKuF,EAAKK,EACd5F,EAAI,GAAKyF,EAAKE,EACd3F,EAAI,IAAM,GAAKqF,EAAKG,GACpBxF,EAAI,IAAM,EACVA,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM,EAEHA,EAUF,SAAS8F,GAAU9F,EAAKrN,GAC7B,IAAIoT,EAAc,IAAI9F,EAAoB,GACtC+F,GAAMrT,EAAE,GACRsT,GAAMtT,EAAE,GACRuT,GAAMvT,EAAE,GACRwT,EAAKxT,EAAE,GACPyT,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GAEP6T,EAAYR,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EAYnD,OAVIK,EAAY,GACdT,EAAY,GAA+C,GAAzCK,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,GAAUO,EAC/DT,EAAY,GAA+C,GAAzCM,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,GAAUM,EAC/DT,EAAY,GAA+C,GAAzCO,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,GAAUQ,IAE/DT,EAAY,GAA+C,GAAzCK,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,GACrDF,EAAY,GAA+C,GAAzCM,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,GACrDH,EAAY,GAA+C,GAAzCO,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,IAEvDf,GAAwBjF,EAAKrN,EAAGoT,GACzB/F,EAYF,SAASyG,GAAezG,EAAK0G,GAKlC,OAJA1G,EAAI,GAAK0G,EAAI,IACb1G,EAAI,GAAK0G,EAAI,IACb1G,EAAI,GAAK0G,EAAI,IAEN1G,EAaF,SAAS2G,GAAW3G,EAAK0G,GAC9B,IAAIhG,EAAMgG,EAAI,GACV/F,EAAM+F,EAAI,GACV9F,EAAM8F,EAAI,GACV5F,EAAM4F,EAAI,GACV3F,EAAM2F,EAAI,GACV1F,EAAM0F,EAAI,GACVxF,EAAMwF,EAAI,GACVvF,EAAMuF,EAAI,GACVtF,EAAMsF,EAAI,IAMd,OAJA1G,EAAI,GAAK3L,KAAKuT,KAAKlH,EAAMA,EAAMC,EAAMA,EAAMC,EAAMA,GACjDZ,EAAI,GAAK3L,KAAKuT,KAAK9G,EAAMA,EAAMC,EAAMA,EAAMC,EAAMA,GACjDhB,EAAI,GAAK3L,KAAKuT,KAAK1G,EAAMA,EAAMC,EAAMA,EAAMC,EAAMA,GAE1CpB,EAYF,SAAS4G,GAAY5G,EAAK0G,GAE/B,IAAIgB,EAAQhB,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAC9BiB,EAAI,EA4BR,OA1BID,EAAQ,GACVC,EAA6B,EAAzBtT,KAAKuT,KAAKF,EAAQ,GACtB1H,EAAI,GAAK,IAAO2H,EAChB3H,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,EAC7B3H,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,EAC7B3H,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,GACpBjB,EAAI,GAAKA,EAAI,IAAMA,EAAI,GAAKA,EAAI,KACzCiB,EAAiD,EAA7CtT,KAAKuT,KAAK,EAAMlB,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAC1C1G,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,EAC7B3H,EAAI,GAAK,IAAO2H,EAChB3H,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,EAC7B3H,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,GACpBjB,EAAI,GAAKA,EAAI,KACtBiB,EAAiD,EAA7CtT,KAAKuT,KAAK,EAAMlB,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAC1C1G,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,EAC7B3H,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,EAC7B3H,EAAI,GAAK,IAAO2H,EAChB3H,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,IAE7BA,EAAiD,EAA7CtT,KAAKuT,KAAK,EAAMlB,EAAI,IAAMA,EAAI,GAAKA,EAAI,IAC3C1G,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,EAC7B3H,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,EAC7B3H,EAAI,IAAM0G,EAAI,GAAKA,EAAI,IAAMiB,EAC7B3H,EAAI,GAAK,IAAO2H,GAGX3H,EAoBF,SAAS6H,GAA6B7H,EAAKkF,EAAG7J,EAAGlN,GAEtD,IAAI2L,EAAIoL,EAAE,GACNlL,EAAIkL,EAAE,GACNrB,EAAIqB,EAAE,GACNC,EAAID,EAAE,GACNlJ,EAAKlC,EAAIA,EACTsC,EAAKpC,EAAIA,EACToL,EAAKvB,EAAIA,EAETwB,EAAKvL,EAAIkC,EACTsJ,EAAKxL,EAAIsC,EACTmJ,EAAKzL,EAAIsL,EACTI,EAAKxL,EAAIoC,EACTqJ,EAAKzL,EAAIoL,EACTM,EAAK7B,EAAIuB,EACTO,EAAKR,EAAInJ,EACT4J,EAAKT,EAAI/I,EACTyJ,EAAKV,EAAIC,EACT0C,EAAK3Z,EAAE,GACP4Z,EAAK5Z,EAAE,GACP6Z,EAAK7Z,EAAE,GAmBX,OAjBA6R,EAAI,IAAM,GAAKwF,EAAKE,IAAOoC,EAC3B9H,EAAI,IAAMsF,EAAKO,GAAMiC,EACrB9H,EAAI,IAAMuF,EAAKK,GAAMkC,EACrB9H,EAAI,GAAK,EACTA,EAAI,IAAMsF,EAAKO,GAAMkC,EACrB/H,EAAI,IAAM,GAAKqF,EAAKK,IAAOqC,EAC3B/H,EAAI,IAAMyF,EAAKE,GAAMoC,EACrB/H,EAAI,GAAK,EACTA,EAAI,IAAMuF,EAAKK,GAAMoC,EACrBhI,EAAI,IAAMyF,EAAKE,GAAMqC,EACrBhI,EAAI,KAAO,GAAKqF,EAAKG,IAAOwC,EAC5BhI,EAAI,IAAM,EACVA,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM3E,EAAE,GACZ2E,EAAI,IAAM,EAEHA,EAuBF,SAASiI,GAAmCjI,EAAKkF,EAAG7J,EAAGlN,EAAG+Z,GAE/D,IAAIpO,EAAIoL,EAAE,GACNlL,EAAIkL,EAAE,GACNrB,EAAIqB,EAAE,GACNC,EAAID,EAAE,GACNlJ,EAAKlC,EAAIA,EACTsC,EAAKpC,EAAIA,EACToL,EAAKvB,EAAIA,EAETwB,EAAKvL,EAAIkC,EACTsJ,EAAKxL,EAAIsC,EACTmJ,EAAKzL,EAAIsL,EACTI,EAAKxL,EAAIoC,EACTqJ,EAAKzL,EAAIoL,EACTM,EAAK7B,EAAIuB,EACTO,EAAKR,EAAInJ,EACT4J,EAAKT,EAAI/I,EACTyJ,EAAKV,EAAIC,EAET0C,EAAK3Z,EAAE,GACP4Z,EAAK5Z,EAAE,GACP6Z,EAAK7Z,EAAE,GAEPga,EAAKD,EAAE,GACPE,EAAKF,EAAE,GACPG,EAAKH,EAAE,GAEPI,GAAQ,GAAK9C,EAAKE,IAAOoC,EACzBS,GAAQjD,EAAKO,GAAMiC,EACnBU,GAAQjD,EAAKK,GAAMkC,EACnBW,GAAQnD,EAAKO,GAAMkC,EACnBW,GAAQ,GAAKrD,EAAKK,IAAOqC,EACzBY,GAAQlD,EAAKE,GAAMoC,EACnBa,GAAQrD,EAAKK,GAAMoC,EACnBa,GAAQpD,EAAKE,GAAMqC,EACnBc,GAAS,GAAKzD,EAAKG,IAAOwC,EAmB9B,OAjBAhI,EAAI,GAAKsI,EACTtI,EAAI,GAAKuI,EACTvI,EAAI,GAAKwI,EACTxI,EAAI,GAAK,EACTA,EAAI,GAAKyI,EACTzI,EAAI,GAAK0I,EACT1I,EAAI,GAAK2I,EACT3I,EAAI,GAAK,EACTA,EAAI,GAAK4I,EACT5I,EAAI,GAAK6I,EACT7I,EAAI,IAAM8I,EACV9I,EAAI,IAAM,EACVA,EAAI,IAAM3E,EAAE,GAAK8M,GAAMG,EAAOH,EAAKM,EAAOL,EAAKQ,EAAOP,GACtDrI,EAAI,IAAM3E,EAAE,GAAK+M,GAAMG,EAAOJ,EAAKO,EAAON,EAAKS,EAAOR,GACtDrI,EAAI,IAAM3E,EAAE,GAAKgN,GAAMG,EAAOL,EAAKQ,EAAOP,EAAKU,EAAQT,GACvDrI,EAAI,IAAM,EAEHA,EAWF,SAAS+I,GAAS/I,EAAKkF,GAC5B,IAAIpL,EAAIoL,EAAE,GACNlL,EAAIkL,EAAE,GACNrB,EAAIqB,EAAE,GACNC,EAAID,EAAE,GACNlJ,EAAKlC,EAAIA,EACTsC,EAAKpC,EAAIA,EACToL,EAAKvB,EAAIA,EAETwB,EAAKvL,EAAIkC,EACTgN,EAAKhP,EAAIgC,EACTwJ,EAAKxL,EAAIoC,EACT6M,EAAKpF,EAAI7H,EACTkN,EAAKrF,EAAIzH,EACTsJ,EAAK7B,EAAIuB,EACTO,EAAKR,EAAInJ,EACT4J,EAAKT,EAAI/I,EACTyJ,EAAKV,EAAIC,EAsBb,OApBApF,EAAI,GAAK,EAAIwF,EAAKE,EAClB1F,EAAI,GAAKgJ,EAAKnD,EACd7F,EAAI,GAAKiJ,EAAKrD,EACd5F,EAAI,GAAK,EAETA,EAAI,GAAKgJ,EAAKnD,EACd7F,EAAI,GAAK,EAAIqF,EAAKK,EAClB1F,EAAI,GAAKkJ,EAAKvD,EACd3F,EAAI,GAAK,EAETA,EAAI,GAAKiJ,EAAKrD,EACd5F,EAAI,GAAKkJ,EAAKvD,EACd3F,EAAI,IAAM,EAAIqF,EAAKG,EACnBxF,EAAI,IAAM,EAEVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EAEHA,EAeF,SAASmJ,GAAQnJ,EAAKZ,EAAMgK,EAAOC,EAAQhK,EAAKiK,EAAMC,GAC3D,IAAIC,EAAK,GAAKJ,EAAQhK,GAClBqK,EAAK,GAAKpK,EAAMgK,GAChBK,EAAK,GAAKJ,EAAOC,GAiBrB,OAhBAvJ,EAAI,GAAY,EAAPsJ,EAAWE,EACpBxJ,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAY,EAAPsJ,EAAWG,EACpBzJ,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAMoJ,EAAQhK,GAAQoK,EAC1BxJ,EAAI,IAAMX,EAAMgK,GAAUI,EAC1BzJ,EAAI,KAAOuJ,EAAMD,GAAQI,EACzB1J,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAMuJ,EAAMD,EAAO,EAAII,EAC3B1J,EAAI,IAAM,EACHA,EAcF,SAAS2J,GAAY3J,EAAK4J,EAAMC,EAAQP,EAAMC,GACnD,IAAIlX,EAAI,EAAMgC,KAAKyV,IAAIF,EAAO,GAC1BF,OAAK,EAuBT,OAtBA1J,EAAI,GAAK3N,EAAIwX,EACb7J,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK3N,EACT2N,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACC,MAAPuJ,GAAeA,IAAQQ,KACzBL,EAAK,GAAKJ,EAAOC,GACjBvJ,EAAI,KAAOuJ,EAAMD,GAAQI,EACzB1J,EAAI,IAAM,EAAIuJ,EAAMD,EAAOI,IAE3B1J,EAAI,KAAO,EACXA,EAAI,KAAO,EAAIsJ,GAEVtJ,EAcF,SAASgK,GAA2BhK,EAAKiK,EAAKX,EAAMC,GACzD,IAAIW,EAAQ7V,KAAKyV,IAAIG,EAAIE,UAAY9V,KAAK0L,GAAK,KAC3CqK,EAAU/V,KAAKyV,IAAIG,EAAII,YAAchW,KAAK0L,GAAK,KAC/CuK,EAAUjW,KAAKyV,IAAIG,EAAIM,YAAclW,KAAK0L,GAAK,KAC/CyK,EAAWnW,KAAKyV,IAAIG,EAAIQ,aAAepW,KAAK0L,GAAK,KACjD2K,EAAS,GAAOJ,EAAUE,GAC1BG,EAAS,GAAOT,EAAQE,GAkB5B,OAhBApK,EAAI,GAAK0K,EACT1K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK2K,EACT3K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,KAAQsK,EAAUE,GAAYE,EAAS,GAC3C1K,EAAI,IAAMkK,EAAQE,GAAWO,EAAS,GACtC3K,EAAI,IAAMuJ,GAAOD,EAAOC,GACxBvJ,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAMuJ,EAAMD,GAAQA,EAAOC,GAC/BvJ,EAAI,IAAM,EACHA,EAeF,SAAS4K,GAAM5K,EAAKZ,EAAMgK,EAAOC,EAAQhK,EAAKiK,EAAMC,GACzD,IAAIsB,EAAK,GAAKzL,EAAOgK,GACjB0B,EAAK,GAAKzB,EAAShK,GACnBqK,EAAK,GAAKJ,EAAOC,GAiBrB,OAhBAvJ,EAAI,IAAM,EAAI6K,EACd7K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EAAI8K,EACd9K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EAAI0J,EACd1J,EAAI,IAAM,EACVA,EAAI,KAAOZ,EAAOgK,GAASyB,EAC3B7K,EAAI,KAAOX,EAAMgK,GAAUyB,EAC3B9K,EAAI,KAAOuJ,EAAMD,GAAQI,EACzB1J,EAAI,IAAM,EACHA,EAaF,SAAS+K,GAAO/K,EAAKgL,EAAKC,EAAQC,GACvC,IAAIC,OAAK,EACLpP,OAAK,EACLC,OAAK,EACLoP,OAAK,EACLjP,OAAK,EACLC,OAAK,EACLiP,OAAK,EACLC,OAAK,EACLlG,OAAK,EACLd,OAAM,EACNiH,EAAOP,EAAI,GACXQ,EAAOR,EAAI,GACXS,EAAOT,EAAI,GACXU,EAAMR,EAAG,GACTS,EAAMT,EAAG,GACTU,EAAMV,EAAG,GACTW,EAAUZ,EAAO,GACjBa,EAAUb,EAAO,GACjBc,EAAUd,EAAO,GAErB,OAAI5W,KAAK2X,IAAIT,EAAOM,GAAW5L,GAAoB5L,KAAK2X,IAAIR,EAAOM,GAAW7L,GAAoB5L,KAAK2X,IAAIP,EAAOM,GAAW9L,EACpHoB,GAASrB,IAGlBqL,EAAKE,EAAOM,EACZP,EAAKE,EAAOM,EACZ1G,EAAKqG,EAAOM,EAOZZ,EAAKQ,GAFLvG,GAHAd,EAAM,EAAIjQ,KAAKuT,KAAKyD,EAAKA,EAAKC,EAAKA,EAAKlG,EAAKA,IAK7BwG,GAHhBN,GAAMhH,GAINvI,EAAK6P,GALLP,GAAM/G,GAKUoH,EAAMtG,EACtBpJ,EAAK0P,EAAMJ,EAAKK,EAAMN,GACtB/G,EAAMjQ,KAAKuT,KAAKuD,EAAKA,EAAKpP,EAAKA,EAAKC,EAAKA,KAOvCmP,GADA7G,EAAM,EAAIA,EAEVvI,GAAMuI,EACNtI,GAAMsI,IAPN6G,EAAK,EACLpP,EAAK,EACLC,EAAK,GAQPoP,EAAKE,EAAKtP,EAAKoJ,EAAKrJ,EACpBI,EAAKiJ,EAAK+F,EAAKE,EAAKrP,EACpBI,EAAKiP,EAAKtP,EAAKuP,EAAKH,GAEpB7G,EAAMjQ,KAAKuT,KAAKwD,EAAKA,EAAKjP,EAAKA,EAAKC,EAAKA,KAOvCgP,GADA9G,EAAM,EAAIA,EAEVnI,GAAMmI,EACNlI,GAAMkI,IAPN8G,EAAK,EACLjP,EAAK,EACLC,EAAK,GAQP4D,EAAI,GAAKmL,EACTnL,EAAI,GAAKoL,EACTpL,EAAI,GAAKqL,EACTrL,EAAI,GAAK,EACTA,EAAI,GAAKjE,EACTiE,EAAI,GAAK7D,EACT6D,EAAI,GAAKsL,EACTtL,EAAI,GAAK,EACTA,EAAI,GAAKhE,EACTgE,EAAI,GAAK5D,EACT4D,EAAI,IAAMoF,EACVpF,EAAI,IAAM,EACVA,EAAI,MAAQmL,EAAKI,EAAOxP,EAAKyP,EAAOxP,EAAKyP,GACzCzL,EAAI,MAAQoL,EAAKG,EAAOpP,EAAKqP,EAAOpP,EAAKqP,GACzCzL,EAAI,MAAQqL,EAAKE,EAAOD,EAAKE,EAAOpG,EAAKqG,GACzCzL,EAAI,IAAM,EAEHA,GAYF,SAASiM,GAASjM,EAAKgL,EAAK7f,EAAQ+f,GACzC,IAAIK,EAAOP,EAAI,GACXQ,EAAOR,EAAI,GACXS,EAAOT,EAAI,GACXU,EAAMR,EAAG,GACTS,EAAMT,EAAG,GACTU,EAAMV,EAAG,GAETG,EAAKE,EAAOpgB,EAAO,GACnBmgB,EAAKE,EAAOrgB,EAAO,GACnBia,EAAKqG,EAAOtgB,EAAO,GAEnBmZ,EAAM+G,EAAKA,EAAKC,EAAKA,EAAKlG,EAAKA,EAC/Bd,EAAM,IAER+G,GADA/G,EAAM,EAAIjQ,KAAKuT,KAAKtD,GAEpBgH,GAAMhH,EACNc,GAAMd,GAGR,IAAI6G,EAAKQ,EAAMvG,EAAKwG,EAAMN,EACtBvP,EAAK6P,EAAMP,EAAKK,EAAMtG,EACtBpJ,EAAK0P,EAAMJ,EAAKK,EAAMN,EA0B1B,OAxBA/G,EAAM6G,EAAKA,EAAKpP,EAAKA,EAAKC,EAAKA,GACrB,IAERmP,GADA7G,EAAM,EAAIjQ,KAAKuT,KAAKtD,GAEpBvI,GAAMuI,EACNtI,GAAMsI,GAGRtE,EAAI,GAAKmL,EACTnL,EAAI,GAAKjE,EACTiE,EAAI,GAAKhE,EACTgE,EAAI,GAAK,EACTA,EAAI,GAAKsL,EAAKtP,EAAKoJ,EAAKrJ,EACxBiE,EAAI,GAAKoF,EAAK+F,EAAKE,EAAKrP,EACxBgE,EAAI,GAAKqL,EAAKtP,EAAKuP,EAAKH,EACxBnL,EAAI,GAAK,EACTA,EAAI,GAAKqL,EACTrL,EAAI,GAAKsL,EACTtL,EAAI,IAAMoF,EACVpF,EAAI,IAAM,EACVA,EAAI,IAAMuL,EACVvL,EAAI,IAAMwL,EACVxL,EAAI,IAAMyL,EACVzL,EAAI,IAAM,EACHA,EASF,SAASkM,GAAIvZ,GAClB,MAAO,QAAUA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAM,IAS3O,SAASwZ,GAAKxZ,GACnB,OAAO0B,KAAKuT,KAAKvT,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,GAAI,GAAK0B,KAAKwrB,IAAIltB,EAAE,IAAK,GAAK0B,KAAKwrB,IAAIltB,EAAE,IAAK,GAAK0B,KAAKwrB,IAAIltB,EAAE,IAAK,GAAK0B,KAAKwrB,IAAIltB,EAAE,IAAK,GAAK0B,KAAKwrB,IAAIltB,EAAE,IAAK,GAAK0B,KAAKwrB,IAAIltB,EAAE,IAAK,IAW7U,SAASyZ,GAAIpM,EAAKrN,EAAGD,GAiB1B,OAhBAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACbsN,EAWF,SAASqM,GAASrM,EAAKrN,EAAGD,GAiB/B,OAhBAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACpBsN,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IACbsN,EAWF,SAASsM,GAAetM,EAAKrN,EAAGD,GAiBrC,OAhBAsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EAClBsN,EAAI,IAAMrN,EAAE,IAAMD,EACXsN,EAYF,SAASuM,GAAqBvM,EAAKrN,EAAGD,EAAGoR,GAiB9C,OAhBA9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EAC1B9D,EAAI,IAAMrN,EAAE,IAAMD,EAAE,IAAMoR,EACnB9D,EAUF,SAASwM,GAAY7Z,EAAGD,GAC7B,OAAOC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,KAAOC,EAAE,MAAQD,EAAE,IAUvR,SAAS+Z,GAAO9Z,EAAGD,GACxB,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPma,EAAKna,EAAE,GACPoa,EAAKpa,EAAE,GACPqa,EAAKra,EAAE,GACPsa,EAAKta,EAAE,GACPua,EAAKva,EAAE,GACPwa,EAAKxa,EAAE,GACPoP,EAAMpP,EAAE,IACRqP,EAAMrP,EAAE,IACR+O,EAAM/O,EAAE,IACRgP,EAAMhP,EAAE,IACRya,EAAMza,EAAE,IACR0a,EAAM1a,EAAE,IAER6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GACP4a,EAAK5a,EAAE,GACP6a,EAAK7a,EAAE,GACP8a,EAAK9a,EAAE,GACP+a,EAAK/a,EAAE,GACPgb,EAAKhb,EAAE,GACPib,EAAKjb,EAAE,GACPwQ,EAAMxQ,EAAE,IACRyQ,EAAMzQ,EAAE,IACRwR,EAAMxR,EAAE,IACRkb,EAAMlb,EAAE,IACRmb,EAAMnb,EAAE,IACRob,EAAMpb,EAAE,IAEZ,OAAO2B,KAAK2X,IAAIU,EAAKlJ,IAAOvD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIU,GAAKrY,KAAK2X,IAAIxI,KAAQnP,KAAK2X,IAAIW,EAAKlJ,IAAOxD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIW,GAAKtY,KAAK2X,IAAIvI,KAAQpP,KAAK2X,IAAIY,EAAKlJ,IAAOzD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIY,GAAKvY,KAAK2X,IAAItI,KAAQrP,KAAK2X,IAAIa,EAAKlJ,IAAO1D,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIa,GAAKxY,KAAK2X,IAAIrI,KAAQtP,KAAK2X,IAAIc,EAAKQ,IAAOrN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIc,GAAKzY,KAAK2X,IAAIsB,KAAQjZ,KAAK2X,IAAIe,EAAKQ,IAAOtN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIe,GAAK1Y,KAAK2X,IAAIuB,KAAQlZ,KAAK2X,IAAIgB,EAAKQ,IAAOvN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIgB,GAAK3Y,KAAK2X,IAAIwB,KAAQnZ,KAAK2X,IAAIiB,EAAKQ,IAAOxN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIiB,GAAK5Y,KAAK2X,IAAIyB,KAAQpZ,KAAK2X,IAAIkB,EAAKQ,IAAOzN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIkB,GAAK7Y,KAAK2X,IAAI0B,KAAQrZ,KAAK2X,IAAImB,EAAKQ,IAAO1N,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAImB,GAAK9Y,KAAK2X,IAAI2B,KAAQtZ,KAAK2X,IAAIjK,EAAMmB,IAAQjD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIjK,GAAM1N,KAAK2X,IAAI9I,KAAS7O,KAAK2X,IAAIhK,EAAMmB,IAAQlD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIhK,GAAM3N,KAAK2X,IAAI7I,KAAS9O,KAAK2X,IAAItK,EAAMwC,IAAQjE,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAItK,GAAMrN,KAAK2X,IAAI9H,KAAS7P,KAAK2X,IAAIrK,EAAMiM,IAAQ3N,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIrK,GAAMtN,KAAK2X,IAAI4B,KAASvZ,KAAK2X,IAAIoB,EAAMS,IAAQ5N,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIoB,GAAM/Y,KAAK2X,IAAI6B,KAASxZ,KAAK2X,IAAIqB,EAAMS,IAAQ7N,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIqB,GAAMhZ,KAAK2X,IAAI8B,IAOj2C,IAAIC,GAAMxK,GAMNyK,GAAM3B,GCpyDV,SAAS9iB,KACd,IAAIyW,EAAM,IAAIC,EAAoB,GAMlC,OALIA,GAAuBhO,eACzB+N,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAEJA,EASF,SAASE,GAAMvN,GACpB,IAAIqN,EAAM,IAAIC,EAAoB,GAIlC,OAHAD,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EASF,SAAShX,GAAO2J,GACrB,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GACV,OAAO0B,KAAKuT,KAAK9N,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,GAWhC,SAASzD,GAAWtG,EAAGE,EAAG6J,GAC/B,IAAI7D,EAAM,IAAIC,EAAoB,GAIlC,OAHAD,EAAI,GAAKlG,EACTkG,EAAI,GAAKhG,EACTgG,EAAI,GAAK6D,EACF7D,EAUF,SAASG,GAAKH,EAAKrN,GAIxB,OAHAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAYF,SAASjY,GAAIiY,EAAKlG,EAAGE,EAAG6J,GAI7B,OAHA7D,EAAI,GAAKlG,EACTkG,EAAI,GAAKhG,EACTgG,EAAI,GAAK6D,EACF7D,EAWF,SAASoM,GAAIpM,EAAKrN,EAAGD,GAI1B,OAHAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASqM,GAASrM,EAAKrN,EAAGD,GAI/B,OAHAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASuD,GAASvD,EAAKrN,EAAGD,GAI/B,OAHAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAAS6gB,GAAO7gB,EAAKrN,EAAGD,GAI7B,OAHAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAUF,SAAS8gB,GAAK9gB,EAAKrN,GAIxB,OAHAqN,EAAI,GAAK3L,KAAKysB,KAAKnuB,EAAE,IACrBqN,EAAI,GAAK3L,KAAKysB,KAAKnuB,EAAE,IACrBqN,EAAI,GAAK3L,KAAKysB,KAAKnuB,EAAE,IACdqN,EAUF,SAAS1L,GAAM0L,EAAKrN,GAIzB,OAHAqN,EAAI,GAAK3L,KAAKC,MAAM3B,EAAE,IACtBqN,EAAI,GAAK3L,KAAKC,MAAM3B,EAAE,IACtBqN,EAAI,GAAK3L,KAAKC,MAAM3B,EAAE,IACfqN,EAWF,SAAStR,GAAIsR,EAAKrN,EAAGD,GAI1B,OAHAsN,EAAI,GAAK3L,KAAK3F,IAAIiE,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAK3F,IAAIiE,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAK3F,IAAIiE,EAAE,GAAID,EAAE,IACnBsN,EAWF,SAASzL,GAAIyL,EAAKrN,EAAGD,GAI1B,OAHAsN,EAAI,GAAK3L,KAAKE,IAAI5B,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAKE,IAAI5B,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAKE,IAAI5B,EAAE,GAAID,EAAE,IACnBsN,EAUF,SAAS+gB,GAAM/gB,EAAKrN,GAIzB,OAHAqN,EAAI,GAAK3L,KAAK0sB,MAAMpuB,EAAE,IACtBqN,EAAI,GAAK3L,KAAK0sB,MAAMpuB,EAAE,IACtBqN,EAAI,GAAK3L,KAAK0sB,MAAMpuB,EAAE,IACfqN,EAWF,SAAS8D,GAAM9D,EAAKrN,EAAGD,GAI5B,OAHAsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EACTsN,EAYF,SAASghB,GAAYhhB,EAAKrN,EAAGD,EAAGoR,GAIrC,OAHA9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EAChB9D,EAUF,SAASihB,GAAStuB,EAAGD,GAC1B,IAAIoH,EAAIpH,EAAE,GAAKC,EAAE,GACbqH,EAAItH,EAAE,GAAKC,EAAE,GACbkR,EAAInR,EAAE,GAAKC,EAAE,GACjB,OAAO0B,KAAKuT,KAAK9N,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,GAUhC,SAASqd,GAAgBvuB,EAAGD,GACjC,IAAIoH,EAAIpH,EAAE,GAAKC,EAAE,GACbqH,EAAItH,EAAE,GAAKC,EAAE,GACbkR,EAAInR,EAAE,GAAKC,EAAE,GACjB,OAAOmH,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,EAStB,SAASsd,GAAcxuB,GAC5B,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GACV,OAAOmH,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,EAUtB,SAASud,GAAOphB,EAAKrN,GAI1B,OAHAqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACLqN,EAUF,SAASqhB,GAAQrhB,EAAKrN,GAI3B,OAHAqN,EAAI,GAAK,EAAMrN,EAAE,GACjBqN,EAAI,GAAK,EAAMrN,EAAE,GACjBqN,EAAI,GAAK,EAAMrN,EAAE,GACVqN,EAUF,SAAStH,GAAUsH,EAAKrN,GAC7B,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GACN2R,EAAMxK,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,EAQ9B,OAPIS,EAAM,IAERA,EAAM,EAAIjQ,KAAKuT,KAAKtD,GACpBtE,EAAI,GAAKrN,EAAE,GAAK2R,EAChBtE,EAAI,GAAKrN,EAAE,GAAK2R,EAChBtE,EAAI,GAAKrN,EAAE,GAAK2R,GAEXtE,EAUF,SAASshB,GAAI3uB,EAAGD,GACrB,OAAOC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAWvC,SAAS6uB,GAAMvhB,EAAKrN,EAAGD,GAC5B,IAAI0T,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACPqT,EAAKtT,EAAE,GACPuT,EAAKvT,EAAE,GACPwT,EAAKxT,EAAE,GAKX,OAHAsN,EAAI,GAAKqG,EAAKH,EAAKI,EAAKL,EACxBjG,EAAI,GAAKsG,EAAKN,EAAKI,EAAKF,EACxBlG,EAAI,GAAKoG,EAAKH,EAAKI,EAAKL,EACjBhG,EAYF,SAASwhB,GAAKxhB,EAAKrN,EAAGD,EAAGtE,GAC9B,IAAIgY,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GAIX,OAHAqN,EAAI,GAAKoG,EAAKhY,GAAKsE,EAAE,GAAK0T,GAC1BpG,EAAI,GAAKqG,EAAKjY,GAAKsE,EAAE,GAAK2T,GAC1BrG,EAAI,GAAKsG,EAAKlY,GAAKsE,EAAE,GAAK4T,GACnBtG,EAcF,SAASyhB,GAAQzhB,EAAKrN,EAAGD,EAAGwC,EAAGC,EAAG/G,GACvC,IAAIszB,EAAetzB,EAAIA,EACnBuzB,EAAUD,GAAgB,EAAItzB,EAAI,GAAK,EACvCwzB,EAAUF,GAAgBtzB,EAAI,GAAKA,EACnCyzB,EAAUH,GAAgBtzB,EAAI,GAC9B0zB,EAAUJ,GAAgB,EAAI,EAAItzB,GAMtC,OAJA4R,EAAI,GAAKrN,EAAE,GAAKgvB,EAAUjvB,EAAE,GAAKkvB,EAAU1sB,EAAE,GAAK2sB,EAAU1sB,EAAE,GAAK2sB,EACnE9hB,EAAI,GAAKrN,EAAE,GAAKgvB,EAAUjvB,EAAE,GAAKkvB,EAAU1sB,EAAE,GAAK2sB,EAAU1sB,EAAE,GAAK2sB,EACnE9hB,EAAI,GAAKrN,EAAE,GAAKgvB,EAAUjvB,EAAE,GAAKkvB,EAAU1sB,EAAE,GAAK2sB,EAAU1sB,EAAE,GAAK2sB,EAE5D9hB,EAcF,SAAS+hB,GAAO/hB,EAAKrN,EAAGD,EAAGwC,EAAGC,EAAG/G,GACtC,IAAI4zB,EAAgB,EAAI5zB,EACpB6zB,EAAwBD,EAAgBA,EACxCN,EAAetzB,EAAIA,EACnBuzB,EAAUM,EAAwBD,EAClCJ,EAAU,EAAIxzB,EAAI6zB,EAClBJ,EAAU,EAAIH,EAAeM,EAC7BF,EAAUJ,EAAetzB,EAM7B,OAJA4R,EAAI,GAAKrN,EAAE,GAAKgvB,EAAUjvB,EAAE,GAAKkvB,EAAU1sB,EAAE,GAAK2sB,EAAU1sB,EAAE,GAAK2sB,EACnE9hB,EAAI,GAAKrN,EAAE,GAAKgvB,EAAUjvB,EAAE,GAAKkvB,EAAU1sB,EAAE,GAAK2sB,EAAU1sB,EAAE,GAAK2sB,EACnE9hB,EAAI,GAAKrN,EAAE,GAAKgvB,EAAUjvB,EAAE,GAAKkvB,EAAU1sB,EAAE,GAAK2sB,EAAU1sB,EAAE,GAAK2sB,EAE5D9hB,EAUF,SAASF,GAAOE,EAAK8D,GAC1BA,EAAQA,GAAS,EAEjB,IAAItR,EAAwB,EAApByN,IAA0B5L,KAAK0L,GACnC8D,EAAwB,EAApB5D,IAA0B,EAC9BiiB,EAAS7tB,KAAKuT,KAAK,EAAM/D,EAAIA,GAAKC,EAKtC,OAHA9D,EAAI,GAAK3L,KAAKmI,IAAIhK,GAAK0vB,EACvBliB,EAAI,GAAK3L,KAAKoI,IAAIjK,GAAK0vB,EACvBliB,EAAI,GAAK6D,EAAIC,EACN9D,EAYF,SAASmiB,GAAcniB,EAAKrN,EAAG6b,GACpC,IAAI1U,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GACNwS,EAAIqJ,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,IAAM3K,EAAI2K,EAAE,IAK5C,OAJArJ,EAAIA,GAAK,EACTnF,EAAI,IAAMwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GAAK3K,EAAI2K,EAAE,KAAOrJ,EACpDnF,EAAI,IAAMwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GAAK3K,EAAI2K,EAAE,KAAOrJ,EACpDnF,EAAI,IAAMwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,IAAM3K,EAAI2K,EAAE,KAAOrJ,EAC9CnF,EAWF,SAASoiB,GAAcpiB,EAAKrN,EAAG6b,GACpC,IAAI1U,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GAIV,OAHAqN,EAAI,GAAKlG,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GAAK3K,EAAI2K,EAAE,GACrCxO,EAAI,GAAKlG,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GAAK3K,EAAI2K,EAAE,GACrCxO,EAAI,GAAKlG,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GAAK3K,EAAI2K,EAAE,GAC9BxO,EAYF,SAASqiB,GAAcriB,EAAKrN,EAAGuS,GAEpC,IAAIod,EAAKpd,EAAE,GACPqd,EAAKrd,EAAE,GACPsd,EAAKtd,EAAE,GACPud,EAAKvd,EAAE,GACPpL,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GAGN+vB,EAAMH,EAAK1e,EAAI2e,EAAKxoB,EACpB2oB,EAAMH,EAAK1oB,EAAIwoB,EAAKze,EACpB+e,EAAMN,EAAKtoB,EAAIuoB,EAAKzoB,EAEpB+oB,EAAON,EAAKK,EAAMJ,EAAKG,EACvBG,EAAON,EAAKE,EAAMJ,EAAKM,EACvBG,EAAOT,EAAKK,EAAMJ,EAAKG,EAEvBM,EAAU,EAALP,EAYT,OAXAC,GAAOM,EACPL,GAAOK,EACPJ,GAAOI,EAEPH,GAAQ,EACRC,GAAQ,EACRC,GAAQ,EAER/iB,EAAI,GAAKlG,EAAI4oB,EAAMG,EACnB7iB,EAAI,GAAKhG,EAAI2oB,EAAMG,EACnB9iB,EAAI,GAAK6D,EAAI+e,EAAMG,EACZ/iB,EAWF,SAASwE,GAAQxE,EAAKrN,EAAGD,EAAGwC,GACjC,IAAI+tB,EAAI,GACJzwB,EAAI,GAgBR,OAdAywB,EAAE,GAAKtwB,EAAE,GAAKD,EAAE,GAChBuwB,EAAE,GAAKtwB,EAAE,GAAKD,EAAE,GAChBuwB,EAAE,GAAKtwB,EAAE,GAAKD,EAAE,GAGhBF,EAAE,GAAKywB,EAAE,GACTzwB,EAAE,GAAKywB,EAAE,GAAK5uB,KAAKmI,IAAItH,GAAK+tB,EAAE,GAAK5uB,KAAKoI,IAAIvH,GAC5C1C,EAAE,GAAKywB,EAAE,GAAK5uB,KAAKoI,IAAIvH,GAAK+tB,EAAE,GAAK5uB,KAAKmI,IAAItH,GAG5C8K,EAAI,GAAKxN,EAAE,GAAKE,EAAE,GAClBsN,EAAI,GAAKxN,EAAE,GAAKE,EAAE,GAClBsN,EAAI,GAAKxN,EAAE,GAAKE,EAAE,GAEXsN,EAWF,SAASyE,GAAQzE,EAAKrN,EAAGD,EAAGwC,GACjC,IAAI+tB,EAAI,GACJzwB,EAAI,GAgBR,OAdAywB,EAAE,GAAKtwB,EAAE,GAAKD,EAAE,GAChBuwB,EAAE,GAAKtwB,EAAE,GAAKD,EAAE,GAChBuwB,EAAE,GAAKtwB,EAAE,GAAKD,EAAE,GAGhBF,EAAE,GAAKywB,EAAE,GAAK5uB,KAAKoI,IAAIvH,GAAK+tB,EAAE,GAAK5uB,KAAKmI,IAAItH,GAC5C1C,EAAE,GAAKywB,EAAE,GACTzwB,EAAE,GAAKywB,EAAE,GAAK5uB,KAAKmI,IAAItH,GAAK+tB,EAAE,GAAK5uB,KAAKoI,IAAIvH,GAG5C8K,EAAI,GAAKxN,EAAE,GAAKE,EAAE,GAClBsN,EAAI,GAAKxN,EAAE,GAAKE,EAAE,GAClBsN,EAAI,GAAKxN,EAAE,GAAKE,EAAE,GAEXsN,EAWF,SAAS0E,GAAQ1E,EAAKrN,EAAGD,EAAGwC,GACjC,IAAI+tB,EAAI,GACJzwB,EAAI,GAgBR,OAdAywB,EAAE,GAAKtwB,EAAE,GAAKD,EAAE,GAChBuwB,EAAE,GAAKtwB,EAAE,GAAKD,EAAE,GAChBuwB,EAAE,GAAKtwB,EAAE,GAAKD,EAAE,GAGhBF,EAAE,GAAKywB,EAAE,GAAK5uB,KAAKmI,IAAItH,GAAK+tB,EAAE,GAAK5uB,KAAKoI,IAAIvH,GAC5C1C,EAAE,GAAKywB,EAAE,GAAK5uB,KAAKoI,IAAIvH,GAAK+tB,EAAE,GAAK5uB,KAAKmI,IAAItH,GAC5C1C,EAAE,GAAKywB,EAAE,GAGTjjB,EAAI,GAAKxN,EAAE,GAAKE,EAAE,GAClBsN,EAAI,GAAKxN,EAAE,GAAKE,EAAE,GAClBsN,EAAI,GAAKxN,EAAE,GAAKE,EAAE,GAEXsN,EASF,SAASkjB,GAAMvwB,EAAGD,GACvB,IAAIywB,EAAQ/iB,GAAWzN,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACjCywB,EAAQhjB,GAAW1N,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAErCgG,GAAUyqB,EAAOA,GACjBzqB,GAAU0qB,EAAOA,GAEjB,IAAIC,EAAS/B,GAAI6B,EAAOC,GAExB,OAAIC,EAAS,EACJ,EACEA,GAAU,EACZhvB,KAAK0L,GAEL1L,KAAKivB,KAAKD,GAUd,SAASnX,GAAIvZ,GAClB,MAAO,QAAUA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,IAU/C,SAAS6Z,GAAY7Z,EAAGD,GAC7B,OAAOC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,GAU/C,SAAS+Z,GAAO9Z,EAAGD,GACxB,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACP6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACX,OAAO2B,KAAK2X,IAAIU,EAAKlJ,IAAOvD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIU,GAAKrY,KAAK2X,IAAIxI,KAAQnP,KAAK2X,IAAIW,EAAKlJ,IAAOxD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIW,GAAKtY,KAAK2X,IAAIvI,KAAQpP,KAAK2X,IAAIY,EAAKlJ,IAAOzD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIY,GAAKvY,KAAK2X,IAAItI,IAOzP,IAAIsK,GAAM3B,GAMN0B,GAAMxK,GAMNggB,GAAM1C,GAMN2C,GAAOvC,GAMPwC,GAAUvC,GAMV5c,GAAMtb,GAMN06B,GAASvC,GAcT5O,GAAU,WACnB,IAAIoR,EAAMp6B,KAEV,OAAO,SAAUoJ,EAAGwF,EAAQJ,EAAQD,EAAO+Z,EAAIhB,GAC7C,IAAI9nB,OAAI,EACJ66B,OAAI,EAeR,IAdKzrB,IACHA,EAAS,GAGNJ,IACHA,EAAS,GAIT6rB,EADE9rB,EACEzD,KAAK3F,IAAIoJ,EAAQK,EAASJ,EAAQpF,EAAE3J,QAEpC2J,EAAE3J,OAGHD,EAAIgP,EAAQhP,EAAI66B,EAAG76B,GAAKoP,EAC3BwrB,EAAI,GAAKhxB,EAAE5J,GAAG46B,EAAI,GAAKhxB,EAAE5J,EAAI,GAAG46B,EAAI,GAAKhxB,EAAE5J,EAAI,GAC/C8oB,EAAG8R,EAAKA,EAAK9S,GACble,EAAE5J,GAAK46B,EAAI,GAAGhxB,EAAE5J,EAAI,GAAK46B,EAAI,GAAGhxB,EAAE5J,EAAI,GAAK46B,EAAI,GAGjD,OAAOhxB,GA1BU,GC1uBd,SAASpJ,KACd,IAAIyW,EAAM,IAAIC,EAAoB,GAOlC,OANIA,GAAuBhO,eACzB+N,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAEJA,EASF,SAASE,GAAMvN,GACpB,IAAIqN,EAAM,IAAIC,EAAoB,GAKlC,OAJAD,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAYF,SAASI,GAAWtG,EAAGE,EAAG6J,EAAGsB,GAClC,IAAInF,EAAM,IAAIC,EAAoB,GAKlC,OAJAD,EAAI,GAAKlG,EACTkG,EAAI,GAAKhG,EACTgG,EAAI,GAAK6D,EACT7D,EAAI,GAAKmF,EACFnF,EAUF,SAASG,GAAKH,EAAKrN,GAKxB,OAJAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAaF,SAASjY,GAAIiY,EAAKlG,EAAGE,EAAG6J,EAAGsB,GAKhC,OAJAnF,EAAI,GAAKlG,EACTkG,EAAI,GAAKhG,EACTgG,EAAI,GAAK6D,EACT7D,EAAI,GAAKmF,EACFnF,EAWF,SAASoM,GAAIpM,EAAKrN,EAAGD,GAK1B,OAJAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASqM,GAASrM,EAAKrN,EAAGD,GAK/B,OAJAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASuD,GAASvD,EAAKrN,EAAGD,GAK/B,OAJAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAAS6gB,GAAO7gB,EAAKrN,EAAGD,GAK7B,OAJAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAUF,SAAS8gB,GAAK9gB,EAAKrN,GAKxB,OAJAqN,EAAI,GAAK3L,KAAKysB,KAAKnuB,EAAE,IACrBqN,EAAI,GAAK3L,KAAKysB,KAAKnuB,EAAE,IACrBqN,EAAI,GAAK3L,KAAKysB,KAAKnuB,EAAE,IACrBqN,EAAI,GAAK3L,KAAKysB,KAAKnuB,EAAE,IACdqN,EAUF,SAAS1L,GAAM0L,EAAKrN,GAKzB,OAJAqN,EAAI,GAAK3L,KAAKC,MAAM3B,EAAE,IACtBqN,EAAI,GAAK3L,KAAKC,MAAM3B,EAAE,IACtBqN,EAAI,GAAK3L,KAAKC,MAAM3B,EAAE,IACtBqN,EAAI,GAAK3L,KAAKC,MAAM3B,EAAE,IACfqN,EAWF,SAAStR,GAAIsR,EAAKrN,EAAGD,GAK1B,OAJAsN,EAAI,GAAK3L,KAAK3F,IAAIiE,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAK3F,IAAIiE,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAK3F,IAAIiE,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAK3F,IAAIiE,EAAE,GAAID,EAAE,IACnBsN,EAWF,SAASzL,GAAIyL,EAAKrN,EAAGD,GAK1B,OAJAsN,EAAI,GAAK3L,KAAKE,IAAI5B,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAKE,IAAI5B,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAKE,IAAI5B,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAKE,IAAI5B,EAAE,GAAID,EAAE,IACnBsN,EAUF,SAAS+gB,GAAM/gB,EAAKrN,GAKzB,OAJAqN,EAAI,GAAK3L,KAAK0sB,MAAMpuB,EAAE,IACtBqN,EAAI,GAAK3L,KAAK0sB,MAAMpuB,EAAE,IACtBqN,EAAI,GAAK3L,KAAK0sB,MAAMpuB,EAAE,IACtBqN,EAAI,GAAK3L,KAAK0sB,MAAMpuB,EAAE,IACfqN,EAWF,SAAS8D,GAAM9D,EAAKrN,EAAGD,GAK5B,OAJAsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EACTsN,EAYF,SAASghB,GAAYhhB,EAAKrN,EAAGD,EAAGoR,GAKrC,OAJA9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EAChB9D,EAUF,SAASihB,GAAStuB,EAAGD,GAC1B,IAAIoH,EAAIpH,EAAE,GAAKC,EAAE,GACbqH,EAAItH,EAAE,GAAKC,EAAE,GACbkR,EAAInR,EAAE,GAAKC,EAAE,GACbwS,EAAIzS,EAAE,GAAKC,EAAE,GACjB,OAAO0B,KAAKuT,KAAK9N,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,EAAIsB,EAAIA,GAUxC,SAAS+b,GAAgBvuB,EAAGD,GACjC,IAAIoH,EAAIpH,EAAE,GAAKC,EAAE,GACbqH,EAAItH,EAAE,GAAKC,EAAE,GACbkR,EAAInR,EAAE,GAAKC,EAAE,GACbwS,EAAIzS,EAAE,GAAKC,EAAE,GACjB,OAAOmH,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,EAAIsB,EAAIA,EAS9B,SAASnc,GAAO2J,GACrB,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GACNwS,EAAIxS,EAAE,GACV,OAAO0B,KAAKuT,KAAK9N,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,EAAIsB,EAAIA,GASxC,SAASgc,GAAcxuB,GAC5B,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GACNwS,EAAIxS,EAAE,GACV,OAAOmH,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,EAAIsB,EAAIA,EAU9B,SAASic,GAAOphB,EAAKrN,GAK1B,OAJAqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACLqN,EAUF,SAASqhB,GAAQrhB,EAAKrN,GAK3B,OAJAqN,EAAI,GAAK,EAAMrN,EAAE,GACjBqN,EAAI,GAAK,EAAMrN,EAAE,GACjBqN,EAAI,GAAK,EAAMrN,EAAE,GACjBqN,EAAI,GAAK,EAAMrN,EAAE,GACVqN,EAUF,SAAStH,GAAUsH,EAAKrN,GAC7B,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GACNwS,EAAIxS,EAAE,GACN2R,EAAMxK,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,EAAIsB,EAAIA,EAQtC,OAPIb,EAAM,IACRA,EAAM,EAAIjQ,KAAKuT,KAAKtD,GACpBtE,EAAI,GAAKlG,EAAIwK,EACbtE,EAAI,GAAKhG,EAAIsK,EACbtE,EAAI,GAAK6D,EAAIS,EACbtE,EAAI,GAAKmF,EAAIb,GAERtE,EAUF,SAASshB,GAAI3uB,EAAGD,GACrB,OAAOC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAYrD,SAAS8uB,GAAKxhB,EAAKrN,EAAGD,EAAGtE,GAC9B,IAAIgY,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GAKX,OAJAqN,EAAI,GAAKoG,EAAKhY,GAAKsE,EAAE,GAAK0T,GAC1BpG,EAAI,GAAKqG,EAAKjY,GAAKsE,EAAE,GAAK2T,GAC1BrG,EAAI,GAAKsG,EAAKlY,GAAKsE,EAAE,GAAK4T,GAC1BtG,EAAI,GAAKuG,EAAKnY,GAAKsE,EAAE,GAAK6T,GACnBvG,EAUF,SAASF,GAAOE,EAAK8D,GAM1B,IAAIhI,EAAIP,EAAIsoB,EAAIC,EACZC,EAAIC,EANRlgB,EAAQA,GAAS,EAOjB,GAGEigB,GAFAjoB,EAAyB,EAApBmE,IAAwB,GAEnBnE,GADVP,EAAyB,EAApB0E,IAAwB,GACT1E,QACbwoB,GAAM,GACf,GAGEC,GAFAH,EAAyB,EAApB5jB,IAAwB,GAEnB4jB,GADVC,EAAyB,EAApB7jB,IAAwB,GACT6jB,QACbE,GAAM,GAEf,IAAI7uB,EAAId,KAAKuT,MAAM,EAAImc,GAAMC,GAK7B,OAJAhkB,EAAI,GAAK8D,EAAQhI,EACjBkE,EAAI,GAAK8D,EAAQvI,EACjByE,EAAI,GAAK8D,EAAQ+f,EAAK1uB,EACtB6K,EAAI,GAAK8D,EAAQggB,EAAK3uB,EACf6K,EAWF,SAASmiB,GAAcniB,EAAKrN,EAAG6b,GACpC,IAAI1U,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GACNwS,EAAIxS,EAAE,GAKV,OAJAqN,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GAAK3K,EAAI2K,EAAE,IAAMrJ,EAClDnF,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GAAK3K,EAAI2K,EAAE,IAAMrJ,EAClDnF,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,IAAM3K,EAAI2K,EAAE,IAAMrJ,EACnDnF,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,IAAM3K,EAAI2K,EAAE,IAAMrJ,EAC5CnF,EAWF,SAASqiB,GAAcriB,EAAKrN,EAAGuS,GACpC,IAAIpL,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GACN2vB,EAAKpd,EAAE,GACPqd,EAAKrd,EAAE,GACPsd,EAAKtd,EAAE,GACPud,EAAKvd,EAAE,GAGP+e,EAAKxB,EAAK3oB,EAAIyoB,EAAK1e,EAAI2e,EAAKxoB,EAC5BkqB,EAAKzB,EAAKzoB,EAAIwoB,EAAK1oB,EAAIwoB,EAAKze,EAC5BsgB,EAAK1B,EAAK5e,EAAIye,EAAKtoB,EAAIuoB,EAAKzoB,EAC5BsqB,GAAM9B,EAAKxoB,EAAIyoB,EAAKvoB,EAAIwoB,EAAK3e,EAOjC,OAJA7D,EAAI,GAAKikB,EAAKxB,EAAK2B,GAAM9B,EAAK4B,GAAM1B,EAAK2B,GAAM5B,EAC/CviB,EAAI,GAAKkkB,EAAKzB,EAAK2B,GAAM7B,EAAK4B,GAAM7B,EAAK2B,GAAMzB,EAC/CxiB,EAAI,GAAKmkB,EAAK1B,EAAK2B,GAAM5B,EAAKyB,GAAM1B,EAAK2B,GAAM5B,EAC/CtiB,EAAI,GAAKrN,EAAE,GACJqN,EASF,SAASkM,GAAIvZ,GAClB,MAAO,QAAUA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,IAU7D,SAAS6Z,GAAY7Z,EAAGD,GAC7B,OAAOC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,GAUhE,SAAS+Z,GAAO9Z,EAAGD,GACxB,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACP6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GACX,OAAO2B,KAAK2X,IAAIU,EAAKlJ,IAAOvD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIU,GAAKrY,KAAK2X,IAAIxI,KAAQnP,KAAK2X,IAAIW,EAAKlJ,IAAOxD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIW,GAAKtY,KAAK2X,IAAIvI,KAAQpP,KAAK2X,IAAIY,EAAKlJ,IAAOzD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIY,GAAKvY,KAAK2X,IAAItI,KAAQrP,KAAK2X,IAAIa,EAAKlJ,IAAO1D,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIa,GAAKxY,KAAK2X,IAAIrI,IAO9U,IAAIqK,GAAM3B,GAMN0B,GAAMxK,GAMNggB,GAAM1C,GAMN2C,GAAOvC,GAMPwC,GAAUvC,GAMV5c,GAAMtb,GAMN06B,GAASvC,GAcT5O,GAAU,WACnB,IAAIoR,EAAMp6B,KAEV,OAAO,SAAUoJ,EAAGwF,EAAQJ,EAAQD,EAAO+Z,EAAIhB,GAC7C,IAAI9nB,OAAI,EACJ66B,OAAI,EAeR,IAdKzrB,IACHA,EAAS,GAGNJ,IACHA,EAAS,GAIT6rB,EADE9rB,EACEzD,KAAK3F,IAAIoJ,EAAQK,EAASJ,EAAQpF,EAAE3J,QAEpC2J,EAAE3J,OAGHD,EAAIgP,EAAQhP,EAAI66B,EAAG76B,GAAKoP,EAC3BwrB,EAAI,GAAKhxB,EAAE5J,GAAG46B,EAAI,GAAKhxB,EAAE5J,EAAI,GAAG46B,EAAI,GAAKhxB,EAAE5J,EAAI,GAAG46B,EAAI,GAAKhxB,EAAE5J,EAAI,GACjE8oB,EAAG8R,EAAKA,EAAK9S,GACble,EAAE5J,GAAK46B,EAAI,GAAGhxB,EAAE5J,EAAI,GAAK46B,EAAI,GAAGhxB,EAAE5J,EAAI,GAAK46B,EAAI,GAAGhxB,EAAE5J,EAAI,GAAK46B,EAAI,GAGnE,OAAOhxB,GA1BU,GC1jBd,SAASpJ,KACd,IAAIyW,EAAM,IAAIC,EAAoB,GAOlC,OANIA,GAAuBhO,eACzB+N,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAEXA,EAAI,GAAK,EACFA,EASF,SAASqB,GAASrB,GAKvB,OAJAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAYF,SAASqkB,GAAarkB,EAAKiE,EAAMD,GACtCA,GAAY,GACZ,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GAKjB,OAJAhE,EAAI,GAAK7R,EAAI8V,EAAK,GAClBjE,EAAI,GAAK7R,EAAI8V,EAAK,GAClBjE,EAAI,GAAK7R,EAAI8V,EAAK,GAClBjE,EAAI,GAAK3L,KAAKmI,IAAIwH,GACXhE,EAgBF,SAASskB,GAAaC,EAAUrf,GACrC,IAAIlB,EAAwB,EAAlB3P,KAAKivB,KAAKpe,EAAE,IAClB/W,EAAIkG,KAAKoI,IAAIuH,EAAM,GAWvB,OAVI7V,EAAI8R,GACNskB,EAAS,GAAKrf,EAAE,GAAK/W,EACrBo2B,EAAS,GAAKrf,EAAE,GAAK/W,EACrBo2B,EAAS,GAAKrf,EAAE,GAAK/W,IAGrBo2B,EAAS,GAAK,EACdA,EAAS,GAAK,EACdA,EAAS,GAAK,GAETvgB,EAWF,SAAST,GAASvD,EAAKrN,EAAGD,GAC/B,IAAI0T,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPqT,EAAKtT,EAAE,GACPuT,EAAKvT,EAAE,GACPwT,EAAKxT,EAAE,GACPyT,EAAKzT,EAAE,GAMX,OAJAsN,EAAI,GAAKoG,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,EAC5CjG,EAAI,GAAKqG,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,EAC5ClG,EAAI,GAAKsG,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,EAC5ChG,EAAI,GAAKuG,EAAKJ,EAAKC,EAAKJ,EAAKK,EAAKJ,EAAKK,EAAKJ,EACrClG,EAWF,SAASwE,GAAQxE,EAAKrN,EAAGqR,GAC9BA,GAAO,GAEP,IAAIoC,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPqT,EAAK3R,KAAKoI,IAAIuH,GACdmC,EAAK9R,KAAKmI,IAAIwH,GAMlB,OAJAhE,EAAI,GAAKoG,EAAKD,EAAKI,EAAKP,EACxBhG,EAAI,GAAKqG,EAAKF,EAAKG,EAAKN,EACxBhG,EAAI,GAAKsG,EAAKH,EAAKE,EAAKL,EACxBhG,EAAI,GAAKuG,EAAKJ,EAAKC,EAAKJ,EACjBhG,EAWF,SAASyE,GAAQzE,EAAKrN,EAAGqR,GAC9BA,GAAO,GAEP,IAAIoC,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPsT,EAAK5R,KAAKoI,IAAIuH,GACdmC,EAAK9R,KAAKmI,IAAIwH,GAMlB,OAJAhE,EAAI,GAAKoG,EAAKD,EAAKG,EAAKL,EACxBjG,EAAI,GAAKqG,EAAKF,EAAKI,EAAKN,EACxBjG,EAAI,GAAKsG,EAAKH,EAAKC,EAAKH,EACxBjG,EAAI,GAAKuG,EAAKJ,EAAKE,EAAKJ,EACjBjG,EAWF,SAAS0E,GAAQ1E,EAAKrN,EAAGqR,GAC9BA,GAAO,GAEP,IAAIoC,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPuT,EAAK7R,KAAKoI,IAAIuH,GACdmC,EAAK9R,KAAKmI,IAAIwH,GAMlB,OAJAhE,EAAI,GAAKoG,EAAKD,EAAKE,EAAKH,EACxBlG,EAAI,GAAKqG,EAAKF,EAAKC,EAAKF,EACxBlG,EAAI,GAAKsG,EAAKH,EAAKI,EAAKL,EACxBlG,EAAI,GAAKuG,EAAKJ,EAAKG,EAAKJ,EACjBlG,EAYF,SAASwkB,GAAWxkB,EAAKrN,GAC9B,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACNkR,EAAIlR,EAAE,GAMV,OAJAqN,EAAI,GAAKlG,EACTkG,EAAI,GAAKhG,EACTgG,EAAI,GAAK6D,EACT7D,EAAI,GAAK3L,KAAKuT,KAAKvT,KAAK2X,IAAI,EAAMlS,EAAIA,EAAIE,EAAIA,EAAI6J,EAAIA,IAC/C7D,EAYF,SAASykB,GAAMzkB,EAAKrN,EAAGD,EAAGtE,GAG/B,IAAIgY,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPqT,EAAKtT,EAAE,GACPuT,EAAKvT,EAAE,GACPwT,EAAKxT,EAAE,GACPyT,EAAKzT,EAAE,GAEPgyB,OAAQ,EACRC,OAAQ,EACRC,OAAQ,EACRC,OAAS,EACTC,OAAS,EA+Bb,OA5BAH,EAAQve,EAAKJ,EAAKK,EAAKJ,EAAKK,EAAKJ,EAAKK,EAAKJ,GAE/B,IACVwe,GAASA,EACT3e,GAAMA,EACNC,GAAMA,EACNC,GAAMA,EACNC,GAAMA,GAGJ,EAAMwe,EAAQ1kB,GAEhBykB,EAAQrwB,KAAKivB,KAAKqB,GAClBC,EAAQvwB,KAAKoI,IAAIioB,GACjBG,EAASxwB,KAAKoI,KAAK,EAAMrO,GAAKs2B,GAASE,EACvCE,EAASzwB,KAAKoI,IAAIrO,EAAIs2B,GAASE,IAI/BC,EAAS,EAAMz2B,EACf02B,EAAS12B,GAGX4R,EAAI,GAAK6kB,EAASze,EAAK0e,EAAS9e,EAChChG,EAAI,GAAK6kB,EAASxe,EAAKye,EAAS7e,EAChCjG,EAAI,GAAK6kB,EAASve,EAAKwe,EAAS5e,EAChClG,EAAI,GAAK6kB,EAASte,EAAKue,EAAS3e,EAEzBnG,EASF,SAASF,GAAOE,GAGrB,IAAInE,EAAKoE,IACL3E,EAAK2E,IACL8kB,EAAK9kB,IAEL+kB,EAAe3wB,KAAKuT,KAAK,EAAI/L,GAC7BopB,EAAS5wB,KAAKuT,KAAK/L,GAMvB,OAJAmE,EAAI,GAAKglB,EAAe3wB,KAAKoI,IAAI,EAAMpI,KAAK0L,GAAKzE,GACjD0E,EAAI,GAAKglB,EAAe3wB,KAAKmI,IAAI,EAAMnI,KAAK0L,GAAKzE,GACjD0E,EAAI,GAAKilB,EAAS5wB,KAAKoI,IAAI,EAAMpI,KAAK0L,GAAKglB,GAC3C/kB,EAAI,GAAKilB,EAAS5wB,KAAKmI,IAAI,EAAMnI,KAAK0L,GAAKglB,GACpC/kB,EAUF,SAAS6B,GAAO7B,EAAKrN,GAC1B,IAAI+Z,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACP2uB,EAAM5U,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EACzCqY,EAAS5D,EAAM,EAAMA,EAAM,EAQ/B,OAJAthB,EAAI,IAAM0M,EAAKwY,EACfllB,EAAI,IAAM2M,EAAKuY,EACfllB,EAAI,IAAM4M,EAAKsY,EACfllB,EAAI,GAAK6M,EAAKqY,EACPllB,EAWF,SAASmlB,GAAUnlB,EAAKrN,GAK7B,OAJAqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,GAAKrN,EAAE,GACJqN,EAcF,SAASolB,GAASplB,EAAKwO,GAG5B,IAAI6W,EAAS7W,EAAE,GAAKA,EAAE,GAAKA,EAAE,GACzB8W,OAAQ,EAEZ,GAAID,EAAS,EAEXC,EAAQjxB,KAAKuT,KAAKyd,EAAS,GAC3BrlB,EAAI,GAAK,GAAMslB,EACfA,EAAQ,GAAMA,EACdtlB,EAAI,IAAMwO,EAAE,GAAKA,EAAE,IAAM8W,EACzBtlB,EAAI,IAAMwO,EAAE,GAAKA,EAAE,IAAM8W,EACzBtlB,EAAI,IAAMwO,EAAE,GAAKA,EAAE,IAAM8W,MACpB,CAEL,IAAIv8B,EAAI,EACJylB,EAAE,GAAKA,EAAE,KAAIzlB,EAAI,GACjBylB,EAAE,GAAKA,EAAM,EAAJzlB,EAAQA,KAAIA,EAAI,GAC7B,IAAIg1B,GAAKh1B,EAAI,GAAK,EACdrB,GAAKqB,EAAI,GAAK,EAElBu8B,EAAQjxB,KAAKuT,KAAK4G,EAAM,EAAJzlB,EAAQA,GAAKylB,EAAM,EAAJuP,EAAQA,GAAKvP,EAAM,EAAJ9mB,EAAQA,GAAK,GAC/DsY,EAAIjX,GAAK,GAAMu8B,EACfA,EAAQ,GAAMA,EACdtlB,EAAI,IAAMwO,EAAM,EAAJuP,EAAQr2B,GAAK8mB,EAAM,EAAJ9mB,EAAQq2B,IAAMuH,EACzCtlB,EAAI+d,IAAMvP,EAAM,EAAJuP,EAAQh1B,GAAKylB,EAAM,EAAJzlB,EAAQg1B,IAAMuH,EACzCtlB,EAAItY,IAAM8mB,EAAM,EAAJ9mB,EAAQqB,GAAKylB,EAAM,EAAJzlB,EAAQrB,IAAM49B,EAG3C,OAAOtlB,EAaF,SAASulB,GAAUvlB,EAAKlG,EAAGE,EAAG6J,GACnC,IAAI2hB,EAAY,GAAMnxB,KAAK0L,GAAK,IAChCjG,GAAK0rB,EACLxrB,GAAKwrB,EACL3hB,GAAK2hB,EAEL,IAAI1d,EAAKzT,KAAKoI,IAAI3C,GACd2rB,EAAKpxB,KAAKmI,IAAI1C,GACdiO,EAAK1T,KAAKoI,IAAIzC,GACd0rB,EAAKrxB,KAAKmI,IAAIxC,GACdgO,EAAK3T,KAAKoI,IAAIoH,GACd8hB,EAAKtxB,KAAKmI,IAAIqH,GAOlB,OALA7D,EAAI,GAAK8H,EAAK4d,EAAKC,EAAKF,EAAK1d,EAAKC,EAClChI,EAAI,GAAKylB,EAAK1d,EAAK4d,EAAK7d,EAAK4d,EAAK1d,EAClChI,EAAI,GAAKylB,EAAKC,EAAK1d,EAAKF,EAAKC,EAAK4d,EAClC3lB,EAAI,GAAKylB,EAAKC,EAAKC,EAAK7d,EAAKC,EAAKC,EAE3BhI,EASF,SAASkM,GAAIvZ,GAClB,MAAO,QAAUA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,IAU7D,IAAIuN,GAAQ0lB,GAYRxlB,GAAawlB,GAUbzlB,GAAOylB,GAaP79B,GAAM69B,GAWNxZ,GAAMwZ,GAMN7X,GAAMxK,GAWNO,GAAQ8hB,GAURtE,GAAMsE,GAYNpE,GAAOoE,GAQP58B,GAAS48B,GAMTthB,GAAMtb,GASNm4B,GAAgByE,GAMhBlC,GAASvC,GAUTzoB,GAAYktB,GASZpZ,GAAcoZ,GASdnZ,GAASmZ,GAaTC,GAAa,WACtB,IAAIC,EAAU5X,KACV6X,EAAY7X,GAAgB,EAAG,EAAG,GAClC8X,EAAY9X,GAAgB,EAAG,EAAG,GAEtC,OAAO,SAAUlO,EAAKrN,EAAGD,GACvB,IAAI4uB,EAAMpT,GAASvb,EAAGD,GACtB,OAAI4uB,GAAO,SACTpT,GAAW4X,EAASC,EAAWpzB,GAC3Bub,GAAS4X,GAAW,MAAU5X,GAAW4X,EAASE,EAAWrzB,GACjEub,GAAe4X,EAASA,GACxBzB,GAAarkB,EAAK8lB,EAASzxB,KAAK0L,IACzBC,GACEshB,EAAM,SACfthB,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,IAEPkO,GAAW4X,EAASnzB,EAAGD,GACvBsN,EAAI,GAAK8lB,EAAQ,GACjB9lB,EAAI,GAAK8lB,EAAQ,GACjB9lB,EAAI,GAAK8lB,EAAQ,GACjB9lB,EAAI,GAAK,EAAIshB,EACN5oB,GAAUsH,EAAKA,KAzBJ,GAyCbimB,GAAS,WAClB,IAAIC,EAAQ38B,KACR48B,EAAQ58B,KAEZ,OAAO,SAAUyW,EAAKrN,EAAGD,EAAGwC,EAAGC,EAAG/G,GAKhC,OAJAq2B,GAAMyB,EAAOvzB,EAAGwC,EAAG/G,GACnBq2B,GAAM0B,EAAOzzB,EAAGwC,EAAG9G,GACnBq2B,GAAMzkB,EAAKkmB,EAAOC,EAAO,EAAI/3B,GAAK,EAAIA,IAE/B4R,GATS,GAuBTomB,GAAU,WACnB,IAAIC,EAAOC,KAEX,OAAO,SAAUtmB,EAAKvI,EAAM2R,EAAO8B,GAajC,OAZAmb,EAAK,GAAKjd,EAAM,GAChBid,EAAK,GAAKjd,EAAM,GAChBid,EAAK,GAAKjd,EAAM,GAEhBid,EAAK,GAAKnb,EAAG,GACbmb,EAAK,GAAKnb,EAAG,GACbmb,EAAK,GAAKnb,EAAG,GAEbmb,EAAK,IAAM5uB,EAAK,GAChB4uB,EAAK,IAAM5uB,EAAK,GAChB4uB,EAAK,IAAM5uB,EAAK,GAETiB,GAAUsH,EAAKolB,GAASplB,EAAKqmB,KAhBnB,GCjnBd,SAAS98B,KACd,IAAIg9B,EAAK,IAAItmB,EAAoB,GAWjC,OAVIA,GAAuBhO,eACzBs0B,EAAG,GAAK,EACRA,EAAG,GAAK,EACRA,EAAG,GAAK,EACRA,EAAG,GAAK,EACRA,EAAG,GAAK,EACRA,EAAG,GAAK,EACRA,EAAG,GAAK,GAEVA,EAAG,GAAK,EACDA,EAUF,SAASrmB,GAAMvN,GACpB,IAAI4zB,EAAK,IAAItmB,EAAoB,GASjC,OARAsmB,EAAG,GAAK5zB,EAAE,GACV4zB,EAAG,GAAK5zB,EAAE,GACV4zB,EAAG,GAAK5zB,EAAE,GACV4zB,EAAG,GAAK5zB,EAAE,GACV4zB,EAAG,GAAK5zB,EAAE,GACV4zB,EAAG,GAAK5zB,EAAE,GACV4zB,EAAG,GAAK5zB,EAAE,GACV4zB,EAAG,GAAK5zB,EAAE,GACH4zB,EAiBF,SAASnmB,GAAWrE,EAAII,EAAImP,EAAIkb,EAAIxqB,EAAII,EAAIgJ,EAAI4d,GACrD,IAAIuD,EAAK,IAAItmB,EAAoB,GASjC,OARAsmB,EAAG,GAAKxqB,EACRwqB,EAAG,GAAKpqB,EACRoqB,EAAG,GAAKjb,EACRib,EAAG,GAAKC,EACRD,EAAG,GAAKvqB,EACRuqB,EAAG,GAAKnqB,EACRmqB,EAAG,GAAKnhB,EACRmhB,EAAG,GAAKvD,EACDuD,EAgBF,SAASE,GAA8B1qB,EAAII,EAAImP,EAAIkb,EAAIxqB,EAAII,EAAIgJ,GACpE,IAAImhB,EAAK,IAAItmB,EAAoB,GACjCsmB,EAAG,GAAKxqB,EACRwqB,EAAG,GAAKpqB,EACRoqB,EAAG,GAAKjb,EACRib,EAAG,GAAKC,EACR,IAAIpgB,EAAU,GAALpK,EACLqK,EAAU,GAALjK,EACLkK,EAAU,GAALlB,EAKT,OAJAmhB,EAAG,GAAKngB,EAAKogB,EAAKngB,EAAKiF,EAAKhF,EAAKnK,EACjCoqB,EAAG,GAAKlgB,EAAKmgB,EAAKlgB,EAAKvK,EAAKqK,EAAKkF,EACjCib,EAAG,GAAKjgB,EAAKkgB,EAAKpgB,EAAKjK,EAAKkK,EAAKtK,EACjCwqB,EAAG,IAAMngB,EAAKrK,EAAKsK,EAAKlK,EAAKmK,EAAKgF,EAC3Bib,EAYF,SAASthB,GAAwBjF,EAAKkF,EAAG9W,GAC9C,IAAIgY,EAAY,GAAPhY,EAAE,GACPiY,EAAY,GAAPjY,EAAE,GACPkY,EAAY,GAAPlY,EAAE,GACP4X,EAAKd,EAAE,GACPe,EAAKf,EAAE,GACPgB,EAAKhB,EAAE,GACPiB,EAAKjB,EAAE,GASX,OARAlF,EAAI,GAAKgG,EACThG,EAAI,GAAKiG,EACTjG,EAAI,GAAKkG,EACTlG,EAAI,GAAKmG,EACTnG,EAAI,GAAKoG,EAAKD,EAAKE,EAAKH,EAAKI,EAAKL,EAClCjG,EAAI,GAAKqG,EAAKF,EAAKG,EAAKN,EAAKI,EAAKF,EAClClG,EAAI,GAAKsG,EAAKH,EAAKC,EAAKH,EAAKI,EAAKL,EAClChG,EAAI,IAAMoG,EAAKJ,EAAKK,EAAKJ,EAAKK,EAAKJ,EAC5BlG,EAWF,SAAS2E,GAAgB3E,EAAK5R,GASnC,OARA4R,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAY,GAAP5R,EAAE,GACX4R,EAAI,GAAY,GAAP5R,EAAE,GACX4R,EAAI,GAAY,GAAP5R,EAAE,GACX4R,EAAI,GAAK,EACFA,EAWF,SAAS6E,GAAa7E,EAAKkF,GAShC,OARAlF,EAAI,GAAKkF,EAAE,GACXlF,EAAI,GAAKkF,EAAE,GACXlF,EAAI,GAAKkF,EAAE,GACXlF,EAAI,GAAKkF,EAAE,GACXlF,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAWF,SAAS0gB,GAAS1gB,EAAKrN,GAE5B,IAAI+zB,EAAQC,KACZztB,GAAiBwtB,EAAO/zB,GACxB,IAAIvE,EAAI,IAAI6R,EAAoB,GAGhC,OAFA/G,GAAoB9K,EAAGuE,GACvBsS,GAAwBjF,EAAK0mB,EAAOt4B,GAC7B4R,EAWF,SAASG,GAAKH,EAAKrN,GASxB,OARAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EASF,SAASqB,GAASrB,GASvB,OARAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACFA,EAkBF,SAASjY,GAAIiY,EAAKjE,EAAII,EAAImP,EAAIkb,EAAIxqB,EAAII,EAAIgJ,EAAI4d,GAUnD,OATAhjB,EAAI,GAAKjE,EACTiE,EAAI,GAAK7D,EACT6D,EAAI,GAAKsL,EACTtL,EAAI,GAAKwmB,EAETxmB,EAAI,GAAKhE,EACTgE,EAAI,GAAK5D,EACT4D,EAAI,GAAKoF,EACTpF,EAAI,GAAKgjB,EACFhjB,EASF,IAAI4mB,GAAUD,GAQd,SAASE,GAAQ7mB,EAAKrN,GAK3B,OAJAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAWF,IAAI8mB,GAAUH,GAUd,SAASI,GAAQ/mB,EAAKkF,GAK3B,OAJAlF,EAAI,GAAKkF,EAAE,GACXlF,EAAI,GAAKkF,EAAE,GACXlF,EAAI,GAAKkF,EAAE,GACXlF,EAAI,GAAKkF,EAAE,GACJlF,EASF,SAASyG,GAAezG,EAAKrN,GAClC,IAAIyT,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPqT,GAAMrT,EAAE,GACRsT,GAAMtT,EAAE,GACRuT,GAAMvT,EAAE,GACRwT,EAAKxT,EAAE,GAIX,OAHAqN,EAAI,GAA+C,GAAzCoG,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,GAC7CjG,EAAI,GAA+C,GAAzCqG,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,GAC7ClG,EAAI,GAA+C,GAAzCsG,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,GACtChG,EAWF,SAAS4D,GAAU5D,EAAKrN,EAAG0I,GAChC,IAAI2rB,EAAMr0B,EAAE,GACRs0B,EAAMt0B,EAAE,GACRu0B,EAAMv0B,EAAE,GACRw0B,EAAMx0B,EAAE,GACRy0B,EAAa,GAAP/rB,EAAE,GACRgsB,EAAa,GAAPhsB,EAAE,GACRisB,EAAa,GAAPjsB,EAAE,GACRksB,EAAM50B,EAAE,GACR60B,EAAM70B,EAAE,GACR80B,EAAM90B,EAAE,GACR+0B,EAAM/0B,EAAE,GASZ,OARAqN,EAAI,GAAKgnB,EACThnB,EAAI,GAAKinB,EACTjnB,EAAI,GAAKknB,EACTlnB,EAAI,GAAKmnB,EACTnnB,EAAI,GAAKmnB,EAAMC,EAAMH,EAAMK,EAAMJ,EAAMG,EAAME,EAC7CvnB,EAAI,GAAKmnB,EAAME,EAAMH,EAAME,EAAMJ,EAAMM,EAAME,EAC7CxnB,EAAI,GAAKmnB,EAAMG,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMK,EAC7CznB,EAAI,IAAMgnB,EAAMI,EAAMH,EAAMI,EAAMH,EAAMI,EAAMI,EACvC1nB,EAWF,SAASwE,GAAQxE,EAAKrN,EAAGqR,GAC9B,IAAIgC,GAAMrT,EAAE,GACRsT,GAAMtT,EAAE,GACRuT,GAAMvT,EAAE,GACRwT,EAAKxT,EAAE,GACPyT,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPq0B,EAAM5gB,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,EACzCghB,EAAM5gB,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,EACzCghB,EAAM5gB,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,EACzCmhB,EAAM5gB,EAAKJ,EAAKC,EAAKJ,EAAKK,EAAKJ,EAAKK,EAAKJ,EAU7C,OATAygB,GAAa3mB,EAAKrN,EAAGqR,GACrBgC,EAAKhG,EAAI,GACTiG,EAAKjG,EAAI,GACTkG,EAAKlG,EAAI,GACTmG,EAAKnG,EAAI,GACTA,EAAI,GAAKgnB,EAAM7gB,EAAKghB,EAAMnhB,EAAKihB,EAAM/gB,EAAKghB,EAAMjhB,EAChDjG,EAAI,GAAKinB,EAAM9gB,EAAKghB,EAAMlhB,EAAKihB,EAAMlhB,EAAKghB,EAAM9gB,EAChDlG,EAAI,GAAKknB,EAAM/gB,EAAKghB,EAAMjhB,EAAK8gB,EAAM/gB,EAAKghB,EAAMjhB,EAChDhG,EAAI,GAAKmnB,EAAMhhB,EAAK6gB,EAAMhhB,EAAKihB,EAAMhhB,EAAKihB,EAAMhhB,EACzClG,EAWF,SAASyE,GAAQzE,EAAKrN,EAAGqR,GAC9B,IAAIgC,GAAMrT,EAAE,GACRsT,GAAMtT,EAAE,GACRuT,GAAMvT,EAAE,GACRwT,EAAKxT,EAAE,GACPyT,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPq0B,EAAM5gB,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,EACzCghB,EAAM5gB,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,EACzCghB,EAAM5gB,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,EACzCmhB,EAAM5gB,EAAKJ,EAAKC,EAAKJ,EAAKK,EAAKJ,EAAKK,EAAKJ,EAU7C,OATAygB,GAAa3mB,EAAKrN,EAAGqR,GACrBgC,EAAKhG,EAAI,GACTiG,EAAKjG,EAAI,GACTkG,EAAKlG,EAAI,GACTmG,EAAKnG,EAAI,GACTA,EAAI,GAAKgnB,EAAM7gB,EAAKghB,EAAMnhB,EAAKihB,EAAM/gB,EAAKghB,EAAMjhB,EAChDjG,EAAI,GAAKinB,EAAM9gB,EAAKghB,EAAMlhB,EAAKihB,EAAMlhB,EAAKghB,EAAM9gB,EAChDlG,EAAI,GAAKknB,EAAM/gB,EAAKghB,EAAMjhB,EAAK8gB,EAAM/gB,EAAKghB,EAAMjhB,EAChDhG,EAAI,GAAKmnB,EAAMhhB,EAAK6gB,EAAMhhB,EAAKihB,EAAMhhB,EAAKihB,EAAMhhB,EACzClG,EAWF,SAAS0E,GAAQ1E,EAAKrN,EAAGqR,GAC9B,IAAIgC,GAAMrT,EAAE,GACRsT,GAAMtT,EAAE,GACRuT,GAAMvT,EAAE,GACRwT,EAAKxT,EAAE,GACPyT,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPq0B,EAAM5gB,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,EACzCghB,EAAM5gB,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,EACzCghB,EAAM5gB,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,EACzCmhB,EAAM5gB,EAAKJ,EAAKC,EAAKJ,EAAKK,EAAKJ,EAAKK,EAAKJ,EAU7C,OATAygB,GAAa3mB,EAAKrN,EAAGqR,GACrBgC,EAAKhG,EAAI,GACTiG,EAAKjG,EAAI,GACTkG,EAAKlG,EAAI,GACTmG,EAAKnG,EAAI,GACTA,EAAI,GAAKgnB,EAAM7gB,EAAKghB,EAAMnhB,EAAKihB,EAAM/gB,EAAKghB,EAAMjhB,EAChDjG,EAAI,GAAKinB,EAAM9gB,EAAKghB,EAAMlhB,EAAKihB,EAAMlhB,EAAKghB,EAAM9gB,EAChDlG,EAAI,GAAKknB,EAAM/gB,EAAKghB,EAAMjhB,EAAK8gB,EAAM/gB,EAAKghB,EAAMjhB,EAChDhG,EAAI,GAAKmnB,EAAMhhB,EAAK6gB,EAAMhhB,EAAKihB,EAAMhhB,EAAKihB,EAAMhhB,EACzClG,EAWF,SAAS2nB,GAAmB3nB,EAAKrN,EAAGuS,GACzC,IAAIod,EAAKpd,EAAE,GACPqd,EAAKrd,EAAE,GACPsd,EAAKtd,EAAE,GACPud,EAAKvd,EAAE,GACPkB,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GAcX,OAZAqN,EAAI,GAAKoG,EAAKqc,EAAKlc,EAAK+b,EAAKjc,EAAKmc,EAAKlc,EAAKic,EAC5CviB,EAAI,GAAKqG,EAAKoc,EAAKlc,EAAKgc,EAAKjc,EAAKgc,EAAKlc,EAAKoc,EAC5CxiB,EAAI,GAAKsG,EAAKmc,EAAKlc,EAAKic,EAAKpc,EAAKmc,EAAKlc,EAAKic,EAC5CtiB,EAAI,GAAKuG,EAAKkc,EAAKrc,EAAKkc,EAAKjc,EAAKkc,EAAKjc,EAAKkc,EAC5Cpc,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GACPqN,EAAI,GAAKoG,EAAKqc,EAAKlc,EAAK+b,EAAKjc,EAAKmc,EAAKlc,EAAKic,EAC5CviB,EAAI,GAAKqG,EAAKoc,EAAKlc,EAAKgc,EAAKjc,EAAKgc,EAAKlc,EAAKoc,EAC5CxiB,EAAI,GAAKsG,EAAKmc,EAAKlc,EAAKic,EAAKpc,EAAKmc,EAAKlc,EAAKic,EAC5CtiB,EAAI,GAAKuG,EAAKkc,EAAKrc,EAAKkc,EAAKjc,EAAKkc,EAAKjc,EAAKkc,EACrCxiB,EAWF,SAAS4nB,GAAoB5nB,EAAKkF,EAAGvS,GAC1C,IAAI2vB,EAAKpd,EAAE,GACPqd,EAAKrd,EAAE,GACPsd,EAAKtd,EAAE,GACPud,EAAKvd,EAAE,GACPc,EAAKrT,EAAE,GACPsT,EAAKtT,EAAE,GACPuT,EAAKvT,EAAE,GACPwT,EAAKxT,EAAE,GAcX,OAZAqN,EAAI,GAAKsiB,EAAKnc,EAAKsc,EAAKzc,EAAKuc,EAAKrc,EAAKsc,EAAKvc,EAC5CjG,EAAI,GAAKuiB,EAAKpc,EAAKsc,EAAKxc,EAAKuc,EAAKxc,EAAKsc,EAAKpc,EAC5ClG,EAAI,GAAKwiB,EAAKrc,EAAKsc,EAAKvc,EAAKoc,EAAKrc,EAAKsc,EAAKvc,EAC5ChG,EAAI,GAAKyiB,EAAKtc,EAAKmc,EAAKtc,EAAKuc,EAAKtc,EAAKuc,EAAKtc,EAC5CF,EAAKrT,EAAE,GACPsT,EAAKtT,EAAE,GACPuT,EAAKvT,EAAE,GACPwT,EAAKxT,EAAE,GACPqN,EAAI,GAAKsiB,EAAKnc,EAAKsc,EAAKzc,EAAKuc,EAAKrc,EAAKsc,EAAKvc,EAC5CjG,EAAI,GAAKuiB,EAAKpc,EAAKsc,EAAKxc,EAAKuc,EAAKxc,EAAKsc,EAAKpc,EAC5ClG,EAAI,GAAKwiB,EAAKrc,EAAKsc,EAAKvc,EAAKoc,EAAKrc,EAAKsc,EAAKvc,EAC5ChG,EAAI,GAAKyiB,EAAKtc,EAAKmc,EAAKtc,EAAKuc,EAAKtc,EAAKuc,EAAKtc,EACrClG,EAYF,SAAS6nB,GAAiB7nB,EAAKrN,EAAGsR,EAAMD,GAE7C,GAAI3P,KAAK2X,IAAIhI,GAAO/D,EAClB,OAAOE,GAAKH,EAAKrN,GAEnB,IAAIm1B,EAAazzB,KAAKuT,KAAK3D,EAAK,GAAKA,EAAK,GAAKA,EAAK,GAAKA,EAAK,GAAKA,EAAK,GAAKA,EAAK,IAElFD,GAAY,GACZ,IAAI7V,EAAIkG,KAAKoI,IAAIuH,GACbgC,EAAK7X,EAAI8V,EAAK,GAAK6jB,EACnB7hB,EAAK9X,EAAI8V,EAAK,GAAK6jB,EACnB5hB,EAAK/X,EAAI8V,EAAK,GAAK6jB,EACnB3hB,EAAK9R,KAAKmI,IAAIwH,GAEdgjB,EAAMr0B,EAAE,GACRs0B,EAAMt0B,EAAE,GACRu0B,EAAMv0B,EAAE,GACRw0B,EAAMx0B,EAAE,GACZqN,EAAI,GAAKgnB,EAAM7gB,EAAKghB,EAAMnhB,EAAKihB,EAAM/gB,EAAKghB,EAAMjhB,EAChDjG,EAAI,GAAKinB,EAAM9gB,EAAKghB,EAAMlhB,EAAKihB,EAAMlhB,EAAKghB,EAAM9gB,EAChDlG,EAAI,GAAKknB,EAAM/gB,EAAKghB,EAAMjhB,EAAK8gB,EAAM/gB,EAAKghB,EAAMjhB,EAChDhG,EAAI,GAAKmnB,EAAMhhB,EAAK6gB,EAAMhhB,EAAKihB,EAAMhhB,EAAKihB,EAAMhhB,EAEhD,IAAIE,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GACP2T,EAAK3T,EAAE,GACP4T,EAAK5T,EAAE,GAMX,OALAqN,EAAI,GAAKoG,EAAKD,EAAKI,EAAKP,EAAKK,EAAKH,EAAKI,EAAKL,EAC5CjG,EAAI,GAAKqG,EAAKF,EAAKI,EAAKN,EAAKK,EAAKN,EAAKI,EAAKF,EAC5ClG,EAAI,GAAKsG,EAAKH,EAAKI,EAAKL,EAAKE,EAAKH,EAAKI,EAAKL,EAC5ChG,EAAI,GAAKuG,EAAKJ,EAAKC,EAAKJ,EAAKK,EAAKJ,EAAKK,EAAKJ,EAErClG,EAYF,SAASoM,GAAIpM,EAAKrN,EAAGD,GAS1B,OARAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASuD,GAASvD,EAAKrN,EAAGD,GAC/B,IAAIq1B,EAAMp1B,EAAE,GACRq1B,EAAMr1B,EAAE,GACRs1B,EAAMt1B,EAAE,GACRu1B,EAAMv1B,EAAE,GACRy0B,EAAM10B,EAAE,GACR20B,EAAM30B,EAAE,GACR40B,EAAM50B,EAAE,GACRy1B,EAAMz1B,EAAE,GACRs0B,EAAMr0B,EAAE,GACRs0B,EAAMt0B,EAAE,GACRu0B,EAAMv0B,EAAE,GACRw0B,EAAMx0B,EAAE,GACRy1B,EAAM11B,EAAE,GACR21B,EAAM31B,EAAE,GACR41B,EAAM51B,EAAE,GACR61B,EAAM71B,EAAE,GASZ,OARAsN,EAAI,GAAK+nB,EAAMQ,EAAML,EAAME,EAAMJ,EAAMM,EAAML,EAAMI,EACnDroB,EAAI,GAAKgoB,EAAMO,EAAML,EAAMG,EAAMJ,EAAMG,EAAML,EAAMO,EACnDtoB,EAAI,GAAKioB,EAAMM,EAAML,EAAMI,EAAMP,EAAMM,EAAML,EAAMI,EACnDpoB,EAAI,GAAKkoB,EAAMK,EAAMR,EAAMK,EAAMJ,EAAMK,EAAMJ,EAAMK,EACnDtoB,EAAI,GAAK+nB,EAAMI,EAAMD,EAAMd,EAAMY,EAAMV,EAAMW,EAAMZ,EAAML,EAAMuB,EAAMpB,EAAMiB,EAAMnB,EAAMqB,EAAMpB,EAAMmB,EACnGroB,EAAI,GAAKgoB,EAAMG,EAAMD,EAAMb,EAAMY,EAAMb,EAAMW,EAAMT,EAAML,EAAMsB,EAAMpB,EAAMkB,EAAMnB,EAAMkB,EAAMpB,EAAMsB,EACnGtoB,EAAI,GAAKioB,EAAME,EAAMD,EAAMZ,EAAMS,EAAMV,EAAMW,EAAMZ,EAAMF,EAAMqB,EAAMpB,EAAMmB,EAAMtB,EAAMqB,EAAMpB,EAAMmB,EACnGpoB,EAAI,GAAKkoB,EAAMC,EAAMJ,EAAMX,EAAMY,EAAMX,EAAMY,EAAMX,EAAMH,EAAMoB,EAAMvB,EAAMoB,EAAMnB,EAAMoB,EAAMnB,EAAMoB,EAC5FtoB,EAOF,IAAI+N,GAAMxK,GAWV,SAASO,GAAM9D,EAAKrN,EAAGD,GAS5B,OARAsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EACTsN,EAWF,IAAIshB,GAAMqF,GAYV,SAASnF,GAAKxhB,EAAKrN,EAAGD,EAAGtE,GAC9B,IAAIo6B,EAAK,EAAIp6B,EAYb,OAXIkzB,GAAI3uB,EAAGD,GAAK,IAAGtE,GAAKA,GAExB4R,EAAI,GAAKrN,EAAE,GAAK61B,EAAK91B,EAAE,GAAKtE,EAC5B4R,EAAI,GAAKrN,EAAE,GAAK61B,EAAK91B,EAAE,GAAKtE,EAC5B4R,EAAI,GAAKrN,EAAE,GAAK61B,EAAK91B,EAAE,GAAKtE,EAC5B4R,EAAI,GAAKrN,EAAE,GAAK61B,EAAK91B,EAAE,GAAKtE,EAC5B4R,EAAI,GAAKrN,EAAE,GAAK61B,EAAK91B,EAAE,GAAKtE,EAC5B4R,EAAI,GAAKrN,EAAE,GAAK61B,EAAK91B,EAAE,GAAKtE,EAC5B4R,EAAI,GAAKrN,EAAE,GAAK61B,EAAK91B,EAAE,GAAKtE,EAC5B4R,EAAI,GAAKrN,EAAE,GAAK61B,EAAK91B,EAAE,GAAKtE,EAErB4R,EAUF,SAAS6B,GAAO7B,EAAKrN,GAC1B,IAAI81B,EAAQtH,GAAcxuB,GAS1B,OARAqN,EAAI,IAAMrN,EAAE,GAAK81B,EACjBzoB,EAAI,IAAMrN,EAAE,GAAK81B,EACjBzoB,EAAI,IAAMrN,EAAE,GAAK81B,EACjBzoB,EAAI,GAAKrN,EAAE,GAAK81B,EAChBzoB,EAAI,IAAMrN,EAAE,GAAK81B,EACjBzoB,EAAI,IAAMrN,EAAE,GAAK81B,EACjBzoB,EAAI,IAAMrN,EAAE,GAAK81B,EACjBzoB,EAAI,GAAKrN,EAAE,GAAK81B,EACTzoB,EAWF,SAASmlB,GAAUnlB,EAAKrN,GAS7B,OARAqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,GAAKrN,EAAE,GACJqN,EAUF,IAAIhX,GAAS29B,GAMTriB,GAAMtb,GASNm4B,GAAgBwF,GAMhBjD,GAASvC,GAUb,SAASzoB,GAAUsH,EAAKrN,GAC7B,IAAI6T,EAAY2a,GAAcxuB,GAC9B,GAAI6T,EAAY,EAAG,CACjBA,EAAYnS,KAAKuT,KAAKpB,GAEtB,IAAIkG,EAAK/Z,EAAE,GAAK6T,EACZmG,EAAKha,EAAE,GAAK6T,EACZoG,EAAKja,EAAE,GAAK6T,EACZqG,EAAKla,EAAE,GAAK6T,EAEZhD,EAAK7Q,EAAE,GACP8Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GAEP+1B,EAAUhc,EAAKlJ,EAAKmJ,EAAKlJ,EAAKmJ,EAAKlJ,EAAKmJ,EAAKlJ,EAEjD3D,EAAI,GAAK0M,EACT1M,EAAI,GAAK2M,EACT3M,EAAI,GAAK4M,EACT5M,EAAI,GAAK6M,EAET7M,EAAI,IAAMwD,EAAKkJ,EAAKgc,GAAWliB,EAC/BxG,EAAI,IAAMyD,EAAKkJ,EAAK+b,GAAWliB,EAC/BxG,EAAI,IAAM0D,EAAKkJ,EAAK8b,GAAWliB,EAC/BxG,EAAI,IAAM2D,EAAKkJ,EAAK6b,GAAWliB,EAEjC,OAAOxG,EASF,SAASkM,GAAIvZ,GAClB,MAAO,SAAWA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,KAAOA,EAAE,GAAK,IAUtH,SAAS6Z,GAAY7Z,EAAGD,GAC7B,OAAOC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,GAUpI,SAAS+Z,GAAO9Z,EAAGD,GACxB,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACPia,EAAKja,EAAE,GACPka,EAAKla,EAAE,GACPma,EAAKna,EAAE,GACPoa,EAAKpa,EAAE,GACPqa,EAAKra,EAAE,GACPsa,EAAKta,EAAE,GACP6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACPgR,EAAKhR,EAAE,GACPiR,EAAKjR,EAAE,GACP4a,EAAK5a,EAAE,GACP6a,EAAK7a,EAAE,GACP8a,EAAK9a,EAAE,GACP+a,EAAK/a,EAAE,GACX,OAAO2B,KAAK2X,IAAIU,EAAKlJ,IAAOvD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIU,GAAKrY,KAAK2X,IAAIxI,KAAQnP,KAAK2X,IAAIW,EAAKlJ,IAAOxD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIW,GAAKtY,KAAK2X,IAAIvI,KAAQpP,KAAK2X,IAAIY,EAAKlJ,IAAOzD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIY,GAAKvY,KAAK2X,IAAItI,KAAQrP,KAAK2X,IAAIa,EAAKlJ,IAAO1D,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIa,GAAKxY,KAAK2X,IAAIrI,KAAQtP,KAAK2X,IAAIc,EAAKQ,IAAOrN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIc,GAAKzY,KAAK2X,IAAIsB,KAAQjZ,KAAK2X,IAAIe,EAAKQ,IAAOtN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIe,GAAK1Y,KAAK2X,IAAIuB,KAAQlZ,KAAK2X,IAAIgB,EAAKQ,IAAOvN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIgB,GAAK3Y,KAAK2X,IAAIwB,KAAQnZ,KAAK2X,IAAIiB,EAAKQ,IAAOxN,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIiB,GAAK5Y,KAAK2X,IAAIyB,IC9zBlqB,SAASlkB,KACd,IAAIyW,EAAM,IAAIC,EAAoB,GAKlC,OAJIA,GAAuBhO,eACzB+N,EAAI,GAAK,EACTA,EAAI,GAAK,GAEJA,EASF,SAASE,GAAMvN,GACpB,IAAIqN,EAAM,IAAIC,EAAoB,GAGlC,OAFAD,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAUF,SAASI,GAAWtG,EAAGE,GAC5B,IAAIgG,EAAM,IAAIC,EAAoB,GAGlC,OAFAD,EAAI,GAAKlG,EACTkG,EAAI,GAAKhG,EACFgG,EAUF,SAASG,GAAKH,EAAKrN,GAGxB,OAFAqN,EAAI,GAAKrN,EAAE,GACXqN,EAAI,GAAKrN,EAAE,GACJqN,EAWF,SAASjY,GAAIiY,EAAKlG,EAAGE,GAG1B,OAFAgG,EAAI,GAAKlG,EACTkG,EAAI,GAAKhG,EACFgG,EAWF,SAASoM,GAAIpM,EAAKrN,EAAGD,GAG1B,OAFAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASqM,GAASrM,EAAKrN,EAAGD,GAG/B,OAFAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAASuD,GAASvD,EAAKrN,EAAGD,GAG/B,OAFAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAWF,SAAS6gB,GAAO7gB,EAAKrN,EAAGD,GAG7B,OAFAsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAClBsN,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GACXsN,EAUF,SAAS8gB,GAAK9gB,EAAKrN,GAGxB,OAFAqN,EAAI,GAAK3L,KAAKysB,KAAKnuB,EAAE,IACrBqN,EAAI,GAAK3L,KAAKysB,KAAKnuB,EAAE,IACdqN,EAUF,SAAS1L,GAAM0L,EAAKrN,GAGzB,OAFAqN,EAAI,GAAK3L,KAAKC,MAAM3B,EAAE,IACtBqN,EAAI,GAAK3L,KAAKC,MAAM3B,EAAE,IACfqN,EAWF,SAAStR,GAAIsR,EAAKrN,EAAGD,GAG1B,OAFAsN,EAAI,GAAK3L,KAAK3F,IAAIiE,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAK3F,IAAIiE,EAAE,GAAID,EAAE,IACnBsN,EAWF,SAASzL,GAAIyL,EAAKrN,EAAGD,GAG1B,OAFAsN,EAAI,GAAK3L,KAAKE,IAAI5B,EAAE,GAAID,EAAE,IAC1BsN,EAAI,GAAK3L,KAAKE,IAAI5B,EAAE,GAAID,EAAE,IACnBsN,EAUF,SAAS+gB,GAAM/gB,EAAKrN,GAGzB,OAFAqN,EAAI,GAAK3L,KAAK0sB,MAAMpuB,EAAE,IACtBqN,EAAI,GAAK3L,KAAK0sB,MAAMpuB,EAAE,IACfqN,EAWF,SAAS8D,GAAM9D,EAAKrN,EAAGD,GAG5B,OAFAsN,EAAI,GAAKrN,EAAE,GAAKD,EAChBsN,EAAI,GAAKrN,EAAE,GAAKD,EACTsN,EAYF,SAASghB,GAAYhhB,EAAKrN,EAAGD,EAAGoR,GAGrC,OAFA9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EACvB9D,EAAI,GAAKrN,EAAE,GAAKD,EAAE,GAAKoR,EAChB9D,EAUF,SAASihB,GAAStuB,EAAGD,GAC1B,IAAIoH,EAAIpH,EAAE,GAAKC,EAAE,GACbqH,EAAItH,EAAE,GAAKC,EAAE,GACjB,OAAO0B,KAAKuT,KAAK9N,EAAIA,EAAIE,EAAIA,GAUxB,SAASknB,GAAgBvuB,EAAGD,GACjC,IAAIoH,EAAIpH,EAAE,GAAKC,EAAE,GACbqH,EAAItH,EAAE,GAAKC,EAAE,GACjB,OAAOmH,EAAIA,EAAIE,EAAIA,EASd,SAAShR,GAAO2J,GACrB,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACV,OAAO0B,KAAKuT,KAAK9N,EAAIA,EAAIE,EAAIA,GASxB,SAASmnB,GAAcxuB,GAC5B,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACV,OAAOmH,EAAIA,EAAIE,EAAIA,EAUd,SAASonB,GAAOphB,EAAKrN,GAG1B,OAFAqN,EAAI,IAAMrN,EAAE,GACZqN,EAAI,IAAMrN,EAAE,GACLqN,EAUF,SAASqhB,GAAQrhB,EAAKrN,GAG3B,OAFAqN,EAAI,GAAK,EAAMrN,EAAE,GACjBqN,EAAI,GAAK,EAAMrN,EAAE,GACVqN,EAUF,SAAStH,GAAUsH,EAAKrN,GAC7B,IAAImH,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GACN2R,EAAMxK,EAAIA,EAAIE,EAAIA,EAOtB,OANIsK,EAAM,IAERA,EAAM,EAAIjQ,KAAKuT,KAAKtD,GACpBtE,EAAI,GAAKrN,EAAE,GAAK2R,EAChBtE,EAAI,GAAKrN,EAAE,GAAK2R,GAEXtE,EAUF,SAASshB,GAAI3uB,EAAGD,GACrB,OAAOC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAYzB,SAAS6uB,GAAMvhB,EAAKrN,EAAGD,GAC5B,IAAImR,EAAIlR,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAG/B,OAFAsN,EAAI,GAAKA,EAAI,GAAK,EAClBA,EAAI,GAAK6D,EACF7D,EAYF,SAASwhB,GAAKxhB,EAAKrN,EAAGD,EAAGtE,GAC9B,IAAIgY,EAAKzT,EAAE,GACP0T,EAAK1T,EAAE,GAGX,OAFAqN,EAAI,GAAKoG,EAAKhY,GAAKsE,EAAE,GAAK0T,GAC1BpG,EAAI,GAAKqG,EAAKjY,GAAKsE,EAAE,GAAK2T,GACnBrG,EAUF,SAASF,GAAOE,EAAK8D,GAC1BA,EAAQA,GAAS,EACjB,IAAItR,EAAwB,EAApByN,IAA0B5L,KAAK0L,GAGvC,OAFAC,EAAI,GAAK3L,KAAKmI,IAAIhK,GAAKsR,EACvB9D,EAAI,GAAK3L,KAAKoI,IAAIjK,GAAKsR,EAChB9D,EAWF,SAAS2oB,GAAc3oB,EAAKrN,EAAG6b,GACpC,IAAI1U,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GAGV,OAFAqN,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAC3BgG,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EACpBgG,EAWF,SAAS4oB,GAAe5oB,EAAKrN,EAAG6b,GACrC,IAAI1U,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GAGV,OAFAqN,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GACjCxO,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GAC1BxO,EAYF,SAASoiB,GAAcpiB,EAAKrN,EAAG6b,GACpC,IAAI1U,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GAGV,OAFAqN,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GACjCxO,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,GAC1BxO,EAaF,SAASmiB,GAAcniB,EAAKrN,EAAG6b,GACpC,IAAI1U,EAAInH,EAAE,GACNqH,EAAIrH,EAAE,GAGV,OAFAqN,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,IACjCxO,EAAI,GAAKwO,EAAE,GAAK1U,EAAI0U,EAAE,GAAKxU,EAAIwU,EAAE,IAC1BxO,EAWF,SAAS+D,GAAO/D,EAAKrN,EAAGD,EAAGwC,GAEhC,IAAI2zB,EAAKl2B,EAAE,GAAKD,EAAE,GACdo2B,EAAKn2B,EAAE,GAAKD,EAAE,GACdq2B,EAAO10B,KAAKoI,IAAIvH,GAChB8zB,EAAO30B,KAAKmI,IAAItH,GAMpB,OAHA8K,EAAI,GAAK6oB,EAAKG,EAAOF,EAAKC,EAAOr2B,EAAE,GACnCsN,EAAI,GAAK6oB,EAAKE,EAAOD,EAAKE,EAAOt2B,EAAE,GAE5BsN,EASF,SAASkjB,GAAMvwB,EAAGD,GACvB,IAAIqJ,EAAKpJ,EAAE,GACPwJ,EAAKxJ,EAAE,GACPqJ,EAAKtJ,EAAE,GACP0J,EAAK1J,EAAE,GAEPu2B,EAAOltB,EAAKA,EAAKI,EAAKA,EACtB8sB,EAAO,IAETA,EAAO,EAAI50B,KAAKuT,KAAKqhB,IAGvB,IAAIC,EAAOltB,EAAKA,EAAKI,EAAKA,EACtB8sB,EAAO,IAETA,EAAO,EAAI70B,KAAKuT,KAAKshB,IAGvB,IAAI7F,GAAUtnB,EAAKC,EAAKG,EAAKC,GAAM6sB,EAAOC,EAE1C,OAAI7F,EAAS,EACJ,EACEA,GAAU,EACZhvB,KAAK0L,GAEL1L,KAAKivB,KAAKD,GAUd,SAASnX,GAAIvZ,GAClB,MAAO,QAAUA,EAAE,GAAK,KAAOA,EAAE,GAAK,IAUjC,SAAS6Z,GAAY7Z,EAAGD,GAC7B,OAAOC,EAAE,KAAOD,EAAE,IAAMC,EAAE,KAAOD,EAAE,GAU9B,SAAS+Z,GAAO9Z,EAAGD,GACxB,IAAIga,EAAK/Z,EAAE,GACPga,EAAKha,EAAE,GACP6Q,EAAK9Q,EAAE,GACP+Q,EAAK/Q,EAAE,GACX,OAAO2B,KAAK2X,IAAIU,EAAKlJ,IAAOvD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIU,GAAKrY,KAAK2X,IAAIxI,KAAQnP,KAAK2X,IAAIW,EAAKlJ,IAAOxD,EAAmB5L,KAAKE,IAAI,EAAKF,KAAK2X,IAAIW,GAAKtY,KAAK2X,IAAIvI,IAOpK,IAAIa,GAAMtb,GAMNglB,GAAM3B,GAMN0B,GAAMxK,GAMNggB,GAAM1C,GAMN2C,GAAOvC,GAMPwC,GAAUvC,GAMVwC,GAASvC,GAcT5O,GAAU,WACnB,IAAIoR,EAAMp6B,KAEV,OAAO,SAAUoJ,EAAGwF,EAAQJ,EAAQD,EAAO+Z,EAAIhB,GAC7C,IAAI9nB,OAAI,EACJ66B,OAAI,EAeR,IAdKzrB,IACHA,EAAS,GAGNJ,IACHA,EAAS,GAIT6rB,EADE9rB,EACEzD,KAAK3F,IAAIoJ,EAAQK,EAASJ,EAAQpF,EAAE3J,QAEpC2J,EAAE3J,OAGHD,EAAIgP,EAAQhP,EAAI66B,EAAG76B,GAAKoP,EAC3BwrB,EAAI,GAAKhxB,EAAE5J,GAAG46B,EAAI,GAAKhxB,EAAE5J,EAAI,GAC7B8oB,EAAG8R,EAAKA,EAAK9S,GACble,EAAE5J,GAAK46B,EAAI,GAAGhxB,EAAE5J,EAAI,GAAK46B,EAAI,GAG/B,OAAOhxB,GA1BU,GCplBrB","file":"static/js/2.406ed0be.chunk.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import Texture from \"kami-texture2\";\nexport default ((gl, url, options) => new Promise(resolve => {\n  const image = new Image();\n  image.src = url;\n\n  image.onload = () => {\n    const texture = new Texture(gl, { ...options,\n      image\n    });\n    texture.setFilter(Texture.Filter.LINEAR, Texture.Filter.LINEAR, false);\n    resolve(texture);\n  };\n}));\nexport const Filter = Texture.Filter;","function hasGetterOrSetter(def) {\n\treturn (!!def.get && typeof def.get === \"function\") || (!!def.set && typeof def.set === \"function\");\n}\n\nfunction getProperty(definition, k, isClassDescriptor) {\n\t//This may be a lightweight object, OR it might be a property\n\t//that was defined previously.\n\t\n\t//For simple class descriptors we can just assume its NOT previously defined.\n\tvar def = isClassDescriptor \n\t\t\t\t? definition[k] \n\t\t\t\t: Object.getOwnPropertyDescriptor(definition, k);\n\n\tif (!isClassDescriptor && def.value && typeof def.value === \"object\") {\n\t\tdef = def.value;\n\t}\n\n\n\t//This might be a regular property, or it may be a getter/setter the user defined in a class.\n\tif ( def && hasGetterOrSetter(def) ) {\n\t\tif (typeof def.enumerable === \"undefined\")\n\t\t\tdef.enumerable = true;\n\t\tif (typeof def.configurable === \"undefined\")\n\t\t\tdef.configurable = true;\n\t\treturn def;\n\t} else {\n\t\treturn false;\n\t}\n}\n\nfunction hasNonConfigurable(obj, k) {\n\tvar prop = Object.getOwnPropertyDescriptor(obj, k);\n\tif (!prop)\n\t\treturn false;\n\n\tif (prop.value && typeof prop.value === \"object\")\n\t\tprop = prop.value;\n\n\tif (prop.configurable === false) \n\t\treturn true;\n\n\treturn false;\n}\n\n//TODO: On create, \n//\t\tOn mixin, \n\nfunction extend(ctor, definition, isClassDescriptor, extend) {\n\tfor (var k in definition) {\n\t\tif (!definition.hasOwnProperty(k))\n\t\t\tcontinue;\n\n\t\tvar def = getProperty(definition, k, isClassDescriptor);\n\n\t\tif (def !== false) {\n\t\t\t//If Extends is used, we will check its prototype to see if \n\t\t\t//the final variable exists.\n\t\t\t\n\t\t\tvar parent = extend || ctor;\n\t\t\tif (hasNonConfigurable(parent.prototype, k)) {\n\n\t\t\t\t//just skip the final property\n\t\t\t\tif (Class.ignoreFinals)\n\t\t\t\t\tcontinue;\n\n\t\t\t\t//We cannot re-define a property that is configurable=false.\n\t\t\t\t//So we will consider them final and throw an error. This is by\n\t\t\t\t//default so it is clear to the developer what is happening.\n\t\t\t\t//You can set ignoreFinals to true if you need to extend a class\n\t\t\t\t//which has configurable=false; it will simply not re-define final properties.\n\t\t\t\tthrow new Error(\"cannot override final property '\"+k\n\t\t\t\t\t\t\t+\"', set Class.ignoreFinals = true to skip\");\n\t\t\t}\n\n\t\t\tObject.defineProperty(ctor.prototype, k, def);\n\t\t} else {\n\t\t\tctor.prototype[k] = definition[k];\n\t\t}\n\n\t}\n}\n\n/**\n */\nfunction mixin(myClass, mixins) {\n\tif (!mixins)\n\t\treturn;\n\n\tif (!Array.isArray(mixins))\n\t\tmixins = [mixins];\n\n\tfor (var i=0; i<mixins.length; i++) {\n\t\textend(myClass, mixins[i].prototype || mixins[i]);\n\t}\n}\n\n/**\n * Creates a new class with the given descriptor.\n * The constructor, defined by the name `initialize`,\n * is an optional function. If unspecified, an anonymous\n * function will be used which calls the parent class (if\n * one exists). \n *\n * You can also use `Extends` and `Mixins` to provide subclassing\n * and inheritance.\n *\n * @class  Class\n * @constructor\n * @param {Object} definition a dictionary of functions for the class\n * @example\n *\n * \t\tvar MyClass = new Class({\n * \t\t\n * \t\t\tinitialize: function() {\n * \t\t\t\tthis.foo = 2.0;\n * \t\t\t},\n *\n * \t\t\tbar: function() {\n * \t\t\t\treturn this.foo + 5;\n * \t\t\t}\n * \t\t});\n */\nfunction Class(definition) {\n\tif (!definition)\n\t\tdefinition = {};\n\n\t//The variable name here dictates what we see in Chrome debugger\n\tvar initialize;\n\tvar Extends;\n\n\tif (definition.initialize) {\n\t\tif (typeof definition.initialize !== \"function\")\n\t\t\tthrow new Error(\"initialize must be a function\");\n\t\tinitialize = definition.initialize;\n\n\t\t//Usually we should avoid \"delete\" in V8 at all costs.\n\t\t//However, its unlikely to make any performance difference\n\t\t//here since we only call this on class creation (i.e. not object creation).\n\t\tdelete definition.initialize;\n\t} else {\n\t\tif (definition.Extends) {\n\t\t\tvar base = definition.Extends;\n\t\t\tinitialize = function () {\n\t\t\t\tbase.apply(this, arguments);\n\t\t\t}; \n\t\t} else {\n\t\t\tinitialize = function () {}; \n\t\t}\n\t}\n\n\tif (definition.Extends) {\n\t\tinitialize.prototype = Object.create(definition.Extends.prototype);\n\t\tinitialize.prototype.constructor = initialize;\n\t\t//for getOwnPropertyDescriptor to work, we need to act\n\t\t//directly on the Extends (or Mixin)\n\t\tExtends = definition.Extends;\n\t\tdelete definition.Extends;\n\t} else {\n\t\tinitialize.prototype.constructor = initialize;\n\t}\n\n\t//Grab the mixins, if they are specified...\n\tvar mixins = null;\n\tif (definition.Mixins) {\n\t\tmixins = definition.Mixins;\n\t\tdelete definition.Mixins;\n\t}\n\n\t//First, mixin if we can.\n\tmixin(initialize, mixins);\n\n\t//Now we grab the actual definition which defines the overrides.\n\textend(initialize, definition, true, Extends);\n\n\treturn initialize;\n};\n\nClass.extend = extend;\nClass.mixin = mixin;\nClass.ignoreFinals = false;\n\nmodule.exports = Class;","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","/**\n * Texture utils for kami.\n *\n * @module kami-texture\n */\n\nvar Class = require(\"klasse\");\nvar nextPowerOfTwo = require(\"number-util\").nextPowerOfTwo;\nvar isPowerOfTwo = require(\"number-util\").isPowerOfTwo;\nvar BaseObject = require(\"kami-util\").BaseObject;\n\nvar Texture = new Class({\n  /**\n   * Creates a new texture with the optional width, height, and data.\n   *\n   * If the constructor is passed no parameters other than the context, then\n   * it will not be initialized and will be non-renderable. You will need to manually\n   * uploadData or uploadImage yourself.\n   *\n   * If the options passed includes 'src', it assumes an image is to be loaded,\n   * and will use the width/height from that resulting image. Otherwise, it\n   * will look for 'data', which may be a typed array or any valid \"image\" object.\n   * A typed array will need its width/height passed explicitly.\n   *\n   * If the context is a kami-context, we will try to manage the Texture object by\n   * keeping the arguments in memory for future use.\n   *\n   * Most users will want to use the AssetManager to create and manage their textures\n   * with asynchronous loading and context loss.\n   *\n   * @class  Texture\n   * @constructor\n   * @param  {WebGLRenderingContext|kami-context} context the WebGL context\n   * @param  {Object} options the options to create this texture\n   *   @param {String} options.src the path to the image file, if ommitted we assume data will be given\n   *   @param {Function} options.onLoad called when the image is loaded (if src is provided)\n   *   @param {Function} options.onError called when there was an error loading the image (if src is provided)\n   *   @param {String} options.crossOrigin the image cross-origin parameter (if src is provided)\n   *   @param {ArrayBuffer} options.data some typed array with texture data, ignored if 'src' is specified\n   *   @param {GLenum} options.format the texture format, default Texture.Format.RGBA (for when data is specified)\n   *   @param {GLenum} options.type the data type, default Texture.DataType.UNSIGNED_BYTE (for when data is specified)\n   *   @param {Number} options.width the width of the texture (if we are not specifying an image URL)\n   *   @param {Number} options.height the height of the texture (if we are not specifying an image URL)\n   *   @param {Boolean} options.genMipmaps whether to generate mipmaps after upload\n   */\n  initialize: function Texture(context, options) {\n    if (!(this instanceof Texture)) return new Texture(context, options);\n\n    //sets up base Kami object..\n    BaseObject.call(this, context);\n\n    /**\n     * When a texture is created, we keep track of the arguments provided to\n     * its constructor. On context loss and restore, these arguments are re-supplied\n     * to the Texture, so as to re-create it in its correct form.\n     *\n     * This is mainly useful if you are procedurally creating textures and passing\n     * their data directly (e.g. for generic lookup tables in a shader). For image\n     * or media based textures, it would be better to use an AssetManager to manage\n     * the asynchronous texture upload.\n     *\n     * Upon destroying a texture, a reference to this is also lost.\n     *\n     * @property managedArgs\n     * @type {Object} the options given to the Texture constructor, or undefined\n     */\n    this.managedArgs = options;\n\n    /**\n     * The WebGLTexture which backs this Texture object. This\n     * can be used for low-level GL calls.\n     *\n     * @type {WebGLTexture}\n     */\n    this.id = null; //initialized in create()\n\n    /**\n     * The target for this texture unit, i.e. TEXTURE_2D. Subclasses\n     * should override the create() method to change this, for correct\n     * usage with context restore.\n     *\n     * @property target\n     * @type {GLenum}\n     * @default  gl.TEXTURE_2D\n     */\n    this.target = this.context.gl.TEXTURE_2D;\n\n    /**\n     * The width of this texture, in pixels.\n     *\n     * @property width\n     * @readOnly\n     * @type {Number} the width\n     */\n    this.width = 0; //initialized on texture upload\n\n    /**\n     * The height of this texture, in pixels.\n     *\n     * @property height\n     * @readOnly\n     * @type {Number} the height\n     */\n    this.height = 0; //initialized on texture upload\n\n    this.__shape = [0, 0];\n\n    /**\n     * The S wrap parameter.\n     * @property {GLenum} wrapS\n     */\n    this.wrapS = Texture.DEFAULT_WRAP;\n    /**\n     * The T wrap parameter.\n     * @property {GLenum} wrapT\n     */\n    this.wrapT = Texture.DEFAULT_WRAP;\n    /**\n     * The minifcation filter.\n     * @property {GLenum} minFilter\n     */\n    this.minFilter = Texture.DEFAULT_FILTER;\n\n    /**\n     * The magnification filter.\n     * @property {GLenum} magFilter\n     */\n    this.magFilter = Texture.DEFAULT_FILTER;\n\n    //manage if we're dealing with a kami-context\n    this.context.addManagedObject(this);\n    this.create();\n  },\n\n  /**\n   * This can be called after creating a Texture to load an Image object asynchronously,\n   * or upload image data directly. It takes the same options as the constructor.\n   *\n   * Users will generally not need to call this directly.\n   *\n   * @protected\n   * @method  setup\n   */\n  setup: function(options) {\n    var gl = this.gl;\n\n    //If no options is provided... this method does nothing.\n    if (!options) return;\n\n    // width, height, format, dataType, data, genMipmaps\n\n    //If 'src' is provided, try to load the image from a path...\n    if (options.src && typeof options.src === \"string\") {\n      var img = new Image();\n      var path = options.src;\n      var crossOrigin = options.crossOrigin;\n      var successCB =\n        typeof options.onLoad === \"function\" ? options.onLoad : null;\n      var failCB =\n        typeof options.onError === \"function\" ? options.onError : null;\n      var genMipmaps = options.genMipmaps;\n\n      var self = this;\n\n      //If you try to render a texture that is not yet \"renderable\" (i.e. the\n      //async load hasn't completed yet, which is always the case in Chrome since requestAnimationFrame\n      //fires before img.onload), WebGL will throw us errors. So instead we will just upload some\n      //dummy data until the texture load is complete. Users can disable this with the global flag.\n      if (Texture.USE_DUMMY_1x1_DATA) {\n        self.uploadData(1, 1);\n        this.width = this.height = 0;\n      }\n\n      img.crossOrigin = crossOrigin;\n\n      img.onload = function(ev) {\n        self.uploadImage(img, undefined, undefined, genMipmaps);\n        if (typeof successCB === \"function\") successCB.call(self, ev, self);\n      };\n      img.onerror = function(ev) {\n        if (genMipmaps)\n          //we still need to gen mipmaps on the 1x1 dummy\n          gl.generateMipmap(gl.TEXTURE_2D);\n        if (typeof failCB === \"function\") failCB.call(self, ev, self);\n      };\n      img.onabort = function(ev) {\n        if (genMipmaps) gl.generateMipmap(gl.TEXTURE_2D);\n        if (typeof failCB === \"function\") failCB.call(self, ev, self);\n      };\n\n      img.src = path;\n    }\n    //otherwise see if we have an 'image' specified\n    else if (options.image) {\n      this.uploadImage(\n        options.image,\n        options.format,\n        options.dataType,\n        options.genMipmaps\n      );\n    }\n    //otherwise assume our regular list of width/height arguments are passed\n    else {\n      this.uploadData(\n        options.width,\n        options.height,\n        options.format,\n        options.dataType,\n        options.data,\n        options.genMipmaps\n      );\n    }\n  },\n\n  /**\n   * Called in the Texture constructor, and after the GL context has been re-initialized.\n   * Subclasses can override this to provide a custom data upload, e.g. cubemaps or compressed\n   * textures.\n   *\n   * @method  create\n   */\n  create: function() {\n    this.gl = this.context.gl;\n    var gl = this.gl;\n\n    this.id = gl.createTexture(); //texture ID is recreated\n    this.width = this.height = 0; //size is reset to zero until loaded\n    this.target = gl.TEXTURE_2D; //the provider can change this if necessary (e.g. cube maps)\n\n    this.bind();\n\n    //TODO: clean these up a little.\n    gl.pixelStorei(\n      gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,\n      Texture.UNPACK_PREMULTIPLY_ALPHA\n    );\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, Texture.UNPACK_ALIGNMENT);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, Texture.UNPACK_FLIP_Y);\n\n    var colorspace =\n      Texture.UNPACK_COLORSPACE_CONVERSION || gl.BROWSER_DEFAULT_WEBGL;\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, colorspace);\n\n    //setup wrap modes without binding redundantly\n    this.setWrap(this.wrapS, this.wrapT, false);\n    this.setFilter(this.minFilter, this.magFilter, false);\n\n    if (this.managedArgs) {\n      this.setup(this.managedArgs);\n    }\n  },\n\n  /**\n   * Destroys this texture by deleting the GL resource,\n   * removing it from the WebGLContext management stack,\n   * setting its size to zero, and id and managed arguments to null.\n   *\n   * Trying to use this texture after may lead to undefined behaviour.\n   *\n   * @method  destroy\n   */\n  destroy: function() {\n    if (this.id && this.gl) this.gl.deleteTexture(this.id);\n    if (this.context) this.context.removeManagedObject(this);\n    this.width = this.height = 0;\n    this.id = null;\n    this.managedArgs = null;\n    this.context = null;\n    this.gl = null;\n  },\n\n  /**\n   * Sets the wrap mode for this texture; if the second argument\n   * is undefined or falsy, then both S and T wrap will use the first\n   * argument.\n   *\n   * You can use Texture.Wrap constants for convenience, to avoid needing\n   * a GL reference.\n   *\n   * @method  setWrap\n   * @param {GLenum} s the S wrap mode\n   * @param {GLenum} t the T wrap mode\n   * @param {Boolean} ignoreBind (optional) if true, the bind will be ignored.\n   */\n  setWrap: function(s, t, ignoreBind) {\n    //TODO: support R wrap mode\n    if (s && t) {\n      this.wrapS = s;\n      this.wrapT = t;\n    } else this.wrapS = this.wrapT = s;\n\n    //enforce POT rules..\n    this._checkPOT();\n\n    if (!ignoreBind) this.bind();\n\n    var gl = this.gl;\n    gl.texParameteri(this.target, gl.TEXTURE_WRAP_S, this.wrapS);\n    gl.texParameteri(this.target, gl.TEXTURE_WRAP_T, this.wrapT);\n  },\n\n  /**\n   * Sets the min and mag filter for this texture;\n   * if mag is undefined or falsy, then both min and mag will use the\n   * filter specified for min.\n   *\n   * You can use Texture.Filter constants for convenience, to avoid needing\n   * a GL reference.\n   *\n   * @method  setFilter\n   * @param {GLenum} min the minification filter\n   * @param {GLenum} mag the magnification filter\n   * @param {Boolean} ignoreBind if true, the bind will be ignored.\n   */\n  setFilter: function(min, mag, ignoreBind) {\n    if (min && mag) {\n      this.minFilter = min;\n      this.magFilter = mag;\n    } else this.minFilter = this.magFilter = min;\n\n    //enforce POT rules..\n    this._checkPOT();\n\n    if (!ignoreBind) this.bind();\n\n    var gl = this.gl;\n    gl.texParameteri(this.target, gl.TEXTURE_MIN_FILTER, this.minFilter);\n    gl.texParameteri(this.target, gl.TEXTURE_MAG_FILTER, this.magFilter);\n  },\n\n  /**\n   * A low-level method to upload the specified ArrayBufferView\n   * to this texture. This will cause the width and height of this\n   * texture to change.\n   *\n   * @method  uploadData\n   * @param  {Number} width          the new width of this texture,\n   *                                 defaults to the last used width (or zero)\n   * @param  {Number} height         the new height of this texture\n   *                                 defaults to the last used height (or zero)\n   * @param  {GLenum} format         the data format, default RGBA\n   * @param  {GLenum} type           the data type, default UNSIGNED_BYTE (Uint8Array)\n   * @param  {ArrayBufferView} data  the raw data for this texture, or null for an empty image\n   * @param  {Boolean} genMipmaps\t   whether to generate mipmaps after uploading the data, default false\n   */\n  uploadData: function(width, height, format, type, data, genMipmaps) {\n    var gl = this.gl;\n\n    format = format || gl.RGBA;\n    type = type || gl.UNSIGNED_BYTE;\n    data = data || null; //make sure falsey value is null for texImage2D\n\n    this.width = width || width == 0 ? width : this.width;\n    this.height = height || height == 0 ? height : this.height;\n\n    this._checkPOT();\n\n    this.bind();\n\n    gl.texImage2D(\n      this.target,\n      0,\n      format,\n      this.width,\n      this.height,\n      0,\n      format,\n      type,\n      data\n    );\n\n    if (genMipmaps) gl.generateMipmap(this.target);\n  },\n\n  /**\n   * Uploads ImageData, HTMLImageElement, HTMLCanvasElement or\n   * HTMLVideoElement.\n   *\n   * @method  uploadImage\n   * @param  {Object} domObject the DOM image container\n   * @param  {GLenum} format the format, default gl.RGBA\n   * @param  {GLenum} type the data type, default gl.UNSIGNED_BYTE\n   * @param  {Boolean} genMipmaps whether to generate mipmaps after uploading the data, default false\n   */\n  uploadImage: function(domObject, format, type, genMipmaps) {\n    var gl = this.gl;\n\n    format = format || gl.RGBA;\n    type = type || gl.UNSIGNED_BYTE;\n\n    this.width = domObject.width;\n    this.height = domObject.height;\n\n    this._checkPOT();\n\n    this.bind();\n\n    gl.texImage2D(this.target, 0, format, format, type, domObject);\n\n    if (genMipmaps) gl.generateMipmap(this.target);\n  },\n\n  uploadSubImage: function() {},\n\n  /**\n   * If FORCE_POT is false, we verify this texture to see if it is valid,\n   * as per non-power-of-two rules. If it is non-power-of-two, it must have\n   * a wrap mode of CLAMP_TO_EDGE, and the minification filter must be LINEAR\n   * or NEAREST. If we don't satisfy these needs, an error is thrown.\n   *\n   * @method  _checkPOT\n   * @private\n   * @return {[type]} [description]\n   */\n  _checkPOT: function() {\n    if (!Texture.FORCE_POT) {\n      //If minFilter is anything but LINEAR or NEAREST\n      //or if wrapS or wrapT are not CLAMP_TO_EDGE...\n      var wrongFilter =\n        this.minFilter !== Texture.Filter.LINEAR &&\n        this.minFilter !== Texture.Filter.NEAREST;\n      var wrongWrap =\n        this.wrapS !== Texture.Wrap.CLAMP_TO_EDGE ||\n        this.wrapT !== Texture.Wrap.CLAMP_TO_EDGE;\n\n      if (wrongFilter || wrongWrap) {\n        if (!isPowerOfTwo(this.width) || !isPowerOfTwo(this.height))\n          throw new Error(\n            wrongFilter\n              ? \"Non-power-of-two textures cannot use mipmapping as filter\"\n              : \"Non-power-of-two textures must use CLAMP_TO_EDGE as wrap\"\n          );\n      }\n    }\n  },\n\n  /**\n   * Binds the texture. If unit is specified,\n   * it will bind the texture at the given slot\n   * (TEXTURE0, TEXTURE1, etc). If unit is not specified,\n   * it will simply bind the texture at whichever slot\n   * is currently active.\n   *\n   * @method  bind\n   * @param  {Number} unit the texture unit index, starting at 0\n   */\n  bind: function(unit) {\n    var gl = this.gl;\n    if (unit || unit === 0) gl.activeTexture(gl.TEXTURE0 + unit);\n    gl.bindTexture(this.target, this.id);\n  },\n\n  toString: function() {\n    return this.id + \":\" + this.width + \"x\" + this.height + \"\";\n  },\n\n  shape: {\n    get: function() {\n      this.__shape[0] = this.width;\n      this.__shape[1] = this.height;\n      return this.__shape;\n    },\n    set: function(shape) {\n      throw new Error(\"changing shape not supported\");\n    }\n  }\n});\n\n/**\n * A set of Filter constants that match their GL counterparts.\n * This is for convenience, to avoid the need for a GL rendering context.\n *\n * @example\n * ```\n *     Texture.Filter.NEAREST\n *     Texture.Filter.NEAREST_MIPMAP_LINEAR\n *     Texture.Filter.NEAREST_MIPMAP_NEAREST\n *     Texture.Filter.LINEAR\n *     Texture.Filter.LINEAR_MIPMAP_LINEAR\n *     Texture.Filter.LINEAR_MIPMAP_NEAREST\n * ```\n * @attribute Filter\n * @static\n * @type {Object}\n */\nTexture.Filter = {\n  NEAREST: 9728,\n  NEAREST_MIPMAP_LINEAR: 9986,\n  NEAREST_MIPMAP_NEAREST: 9984,\n  LINEAR: 9729,\n  LINEAR_MIPMAP_LINEAR: 9987,\n  LINEAR_MIPMAP_NEAREST: 9985\n};\n\n/**\n * A set of Wrap constants that match their GL counterparts.\n * This is for convenience, to avoid the need for a GL rendering context.\n *\n * @example\n * ```\n *     Texture.Wrap.CLAMP_TO_EDGE\n *     Texture.Wrap.MIRRORED_REPEAT\n *     Texture.Wrap.REPEAT\n * ```\n * @attribute Wrap\n * @static\n * @type {Object}\n */\nTexture.Wrap = {\n  CLAMP_TO_EDGE: 33071,\n  MIRRORED_REPEAT: 33648,\n  REPEAT: 10497\n};\n\n/**\n * A set of Format constants that match their GL counterparts.\n * This is for convenience, to avoid the need for a GL rendering context.\n *\n * @example\n * ```\n *     Texture.Format.RGB\n *     Texture.Format.RGBA\n *     Texture.Format.LUMINANCE_ALPHA\n * ```\n * @attribute Format\n * @static\n * @type {Object}\n */\nTexture.Format = {\n  DEPTH_COMPONENT: 6402,\n  ALPHA: 6406,\n  RGBA: 6408,\n  RGB: 6407,\n  LUMINANCE: 6409,\n  LUMINANCE_ALPHA: 6410\n};\n\n/**\n * A set of DataType constants that match their GL counterparts.\n * This is for convenience, to avoid the need for a GL rendering context.\n *\n * @example\n * ```\n *     Texture.DataType.UNSIGNED_BYTE\n *     Texture.DataType.FLOAT\n * ```\n * @attribute DataType\n * @static\n * @type {Object}\n */\nTexture.DataType = {\n  BYTE: 5120,\n  SHORT: 5122,\n  INT: 5124,\n  FLOAT: 5126,\n  UNSIGNED_BYTE: 5121,\n  UNSIGNED_INT: 5125,\n  UNSIGNED_SHORT: 5123,\n  UNSIGNED_SHORT_4_4_4_4: 32819,\n  UNSIGNED_SHORT_5_5_5_1: 32820,\n  UNSIGNED_SHORT_5_6_5: 33635\n};\n\n/**\n * The default wrap mode when creating new textures. If a custom\n * provider was specified, it may choose to override this default mode.\n *\n * @attribute {GLenum} DEFAULT_WRAP\n * @static\n * @default  Texture.Wrap.CLAMP_TO_EDGE\n */\nTexture.DEFAULT_WRAP = Texture.Wrap.CLAMP_TO_EDGE;\n\n/**\n * The default filter mode when creating new textures. If a custom\n * provider was specified, it may choose to override this default mode.\n *\n * @attribute {GLenum} DEFAULT_FILTER\n * @static\n * @default  Texture.Filter.LINEAR\n */\nTexture.DEFAULT_FILTER = Texture.Filter.NEAREST;\n\n/**\n * By default, we do some error checking when creating textures\n * to ensure that they will be \"renderable\" by WebGL. Non-power-of-two\n * textures must use CLAMP_TO_EDGE as their wrap mode, and NEAREST or LINEAR\n * as their wrap mode. Further, trying to generate mipmaps for a NPOT image\n * will lead to errors.\n *\n * However, you can disable this error checking by setting `FORCE_POT` to true.\n * This may be useful if you are running on specific hardware that supports POT\n * textures, or in some future case where NPOT textures is added as a WebGL extension.\n *\n * @attribute {Boolean} FORCE_POT\n * @static\n * @default  false\n */\nTexture.FORCE_POT = false;\n\n//default pixel store operations. Used in create()\nTexture.UNPACK_FLIP_Y = false;\nTexture.UNPACK_ALIGNMENT = 1;\nTexture.UNPACK_PREMULTIPLY_ALPHA = true;\nTexture.UNPACK_COLORSPACE_CONVERSION = undefined;\n\n//for the Image constructor we need to handle things a bit differently..\nTexture.USE_DUMMY_1x1_DATA = true;\n\n/**\n * Utility to get the number of components for the given GLenum, e.g. gl.RGBA returns 4.\n * Returns null if the specified format is not of type DEPTH_COMPONENT, ALPHA, LUMINANCE,\n * LUMINANCE_ALPHA, RGB, or RGBA.\n *\n * @method getNumComponents\n * @static\n * @param  {GLenum} format a texture format, i.e. Texture.Format.RGBA\n * @return {Number} the number of components for this format\n */\nTexture.getNumComponents = function(format) {\n  switch (format) {\n    case Texture.Format.DEPTH_COMPONENT:\n    case Texture.Format.ALPHA:\n    case Texture.Format.LUMINANCE:\n      return 1;\n    case Texture.Format.LUMINANCE_ALPHA:\n      return 2;\n    case Texture.Format.RGB:\n      return 3;\n    case Texture.Format.RGBA:\n      return 4;\n  }\n  return null;\n};\n\nmodule.exports = Texture;\n","var GLContextWrapper = require('./wrapper');\n\nfunction wrapContext(gl) {\n    //Chrome's WebGLInspector wraps it with a different class\n    //and then puts the original in 'rawgl' property\n    var rawgl = gl && gl.rawgl ? gl.rawgl : gl;\n    if (typeof window.WebGLRenderingContext !== \"undefined\" && rawgl instanceof window.WebGLRenderingContext) {\n        return new GLContextWrapper(gl);\n    } else\n        return gl;\n}\n\n/**\n * Duck-types WebGLRenderingContext / kami.WebGLContext.\n *\n * If WebGLRenderingContext is passed, the object will not have its\n * state managed during context loss/restore. If a Kami WebGLContext\n * is passed, the object will try to maintain its state during lost/restore.\n * \n * @param  {WebGLRenderingContext|kami.WebGLContext} gl the GL context\n * @return {Object|kami.WebGLContext} a wrapper that has a `gl` property\n */\nmodule.exports.wrapContext = wrapContext;\n\nmodule.exports.BaseObject = function(context) {\n    if (!context || typeof context !== \"object\")\n        throw \"valid GL context not specified\";\n\n    this.context = wrapContext(context);\n};","var int8 = new Int8Array(4);\nvar int32 = new Int32Array(int8.buffer, 0, 1);\nvar float32 = new Float32Array(int8.buffer, 0, 1);\n\n/**\n * A singleton for number utilities. \n * @class NumberUtil\n */\nvar NumberUtil = function() {\n\n};\n\n\n/**\n * Returns a float representation of the given int bits. ArrayBuffer\n * is used for the conversion.\n *\n * @method  intBitsToFloat\n * @static\n * @param  {Number} i the int to cast\n * @return {Number}   the float\n */\nNumberUtil.intBitsToFloat = function(i) {\n\tint32[0] = i;\n\treturn float32[0];\n};\n\n/**\n * Returns the int bits from the given float. ArrayBuffer is used\n * for the conversion.\n *\n * @method  floatToIntBits\n * @static\n * @param  {Number} f the float to cast\n * @return {Number}   the int bits\n */\nNumberUtil.floatToIntBits = function(f) {\n\tfloat32[0] = f;\n\treturn int32[0];\n};\n\n/**\n * Encodes ABGR int as a float, with slight precision loss.\n *\n * @method  intToFloatColor\n * @static\n * @param {Number} value an ABGR packed integer\n */\nNumberUtil.intToFloatColor = function(value) {\n\treturn NumberUtil.intBitsToFloat( value & 0xfeffffff );\n};\n\n/**\n * Returns a float encoded ABGR value from the given RGBA\n * bytes (0 - 255). Useful for saving bandwidth in vertex data.\n *\n * @method  colorToFloat\n * @static\n * @param {Number} r the Red byte (0 - 255)\n * @param {Number} g the Green byte (0 - 255)\n * @param {Number} b the Blue byte (0 - 255)\n * @param {Number} a the Alpha byte (0 - 255)\n * @return {Float32}  a Float32 of the RGBA color\n */\nNumberUtil.colorToFloat = function(r, g, b, a) {\n\tvar bits = (a << 24 | b << 16 | g << 8 | r);\n\treturn NumberUtil.intToFloatColor(bits);\n};\n\n/**\n * Returns true if the number is a power-of-two.\n *\n * @method  isPowerOfTwo\n * @param  {Number}  n the number to test\n * @return {Boolean}   true if power-of-two\n */\nNumberUtil.isPowerOfTwo = function(n) {\n\treturn (n & (n - 1)) === 0;\n};\n\n/**\n * Returns the next highest power-of-two from the specified number. \n * \n * @param  {Number} n the number to test\n * @return {Number}   the next highest power of two\n */\nNumberUtil.nextPowerOfTwo = function(n) {\n\tn--;\n\tn |= n >> 1;\n\tn |= n >> 2;\n\tn |= n >> 4;\n\tn |= n >> 8;\n\tn |= n >> 16;\n\treturn n+1;\n};\n\nmodule.exports = NumberUtil;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nvar fbemitter = {\n  EventEmitter: require('./lib/BaseEventEmitter'),\n  EmitterSubscription : require('./lib/EmitterSubscription')\n};\n\nmodule.exports = fbemitter;\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export const PlayMode = {\n  NORMAL: 0,\n  LOOP: 1,\n  LOOP_PINGPONG: 2,\n  REVERSED: 3,\n  LOOP_REVERSED: 4\n}; // TODO: dynamic frame duration\n\nexport default ((frameDuration, keyFrames = []) => {\n  return {\n    getKeyFrame(stateTime, mode = PlayMode.NORMAL) {\n      let frameNumber = Math.floor(stateTime / frameDuration);\n\n      switch (mode) {\n        case PlayMode.NORMAL:\n          frameNumber = Math.min(keyFrames.length - 1, frameNumber);\n          break;\n\n        case PlayMode.LOOP:\n          frameNumber = frameNumber % keyFrames.length;\n          break;\n\n        case PlayMode.LOOP_PINGPONG:\n          frameNumber = frameNumber % (keyFrames.length * 2 - 2);\n\n          if (frameNumber >= keyFrames.length) {\n            frameNumber = keyFrames.length - 2 - (frameNumber - keyFrames.length);\n          }\n\n          break;\n\n        case PlayMode.REVERSED:\n          frameNumber = Math.max(keyFrames.length - frameNumber - 1, 0);\n          break;\n\n        case PlayMode.LOOP_REVERSED:\n          frameNumber = frameNumber % keyFrames.length;\n          frameNumber = keyFrames.length - frameNumber - 1;\n          break;\n\n        default:\n      }\n\n      return keyFrames[frameNumber];\n    }\n\n  };\n});","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n * \n * @providesModule EmitterSubscription\n * @typechecks\n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EventSubscription = require('./EventSubscription');\n\n/**\n * EmitterSubscription represents a subscription with listener and context data.\n */\n\nvar EmitterSubscription = (function (_EventSubscription) {\n  _inherits(EmitterSubscription, _EventSubscription);\n\n  /**\n   * @param {EventSubscriptionVendor} subscriber - The subscriber that controls\n   *   this subscription\n   * @param {function} listener - Function to invoke when the specified event is\n   *   emitted\n   * @param {*} context - Optional context object to use when invoking the\n   *   listener\n   */\n\n  function EmitterSubscription(subscriber, listener, context) {\n    _classCallCheck(this, EmitterSubscription);\n\n    _EventSubscription.call(this, subscriber);\n    this.listener = listener;\n    this.context = context;\n  }\n\n  return EmitterSubscription;\n})(EventSubscription);\n\nmodule.exports = EmitterSubscription;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;","/**\n * A mesh class that wraps VBO and IBO. Mostly used internally.\n * \n * @module kami-mesh-buffer\n */\n\nvar Class = require('klasse');\nvar BaseObject = require('kami-util').BaseObject;\n\n//TODO: decouple into VBO + IBO utilities \n/**\n * \n *\n * @class  Mesh\n */\nvar Mesh = new Class({\n\n\n\t/**\n\t * A write-only property which sets both vertices and indices \n\t * flag to dirty or not. \n\t *\n\t * @property dirty\n\t * @type {Boolean}\n\t * @writeOnly\n\t */\n\tdirty: {\n\t\tset: function(val) {\n\t\t\tthis.verticesDirty = val;\n\t\t\tthis.indicesDirty = val;\n\t\t}\n\t},\n\n\t/**\n\t * Creates a new Mesh with the provided parameters.\n\t *\n\t * If numIndices is 0 or falsy, no index buffer will be used\n\t * and indices will be an empty ArrayBuffer and a null indexBuffer.\n\t * \n\t * If isStatic is true, then vertexUsage and indexUsage will\n\t * be set to gl.STATIC_DRAW. Otherwise they will use gl.DYNAMIC_DRAW.\n\t * You may want to adjust these after initialization for further control.\n\t * \n\t * @param  {WebGLContext}  context the context for management\n\t * @param  {Boolean} isStatic      a hint as to whether this geometry is static\n\t * @param  {[type]}  numVerts      [description]\n\t * @param  {[type]}  numIndices    [description]\n\t * @param  {[type]}  vertexAttribs [description]\n\t * @return {[type]}                [description]\n\t */\n\tinitialize: function Mesh(context, isStatic, numVerts, numIndices, vertexAttribs) {\n\t\t//TODO: use options here...\n\t\tif (!numVerts)\n\t\t\tthrow \"numVerts not specified, must be > 0\";\n\n\t\tBaseObject.call(this, context);\n\n\t\tthis.gl = this.context.gl;\n\t\t\n\t\tthis.numVerts = null;\n\t\tthis.numIndices = null;\n\t\t\n\t\tthis.vertices = null;\n\t\tthis.indices = null;\n\t\tthis.vertexBuffer = null;\n\t\tthis.indexBuffer = null;\n\n\t\tthis.verticesDirty = true;\n\t\tthis.indicesDirty = true;\n\t\tthis.indexUsage = null;\n\t\tthis.vertexUsage = null;\n\n\t\t/** \n\t\t * @property\n\t\t * @private\n\t\t */\n\t\tthis._vertexAttribs = null;\n\n\t\t/** \n\t\t * The stride for one vertex _in bytes_. \n\t\t * \n\t\t * @property {Number} vertexStride\n\t\t */\n\t\tthis.vertexStride = null;\n\n\t\tthis.numVerts = numVerts;\n\t\tthis.numIndices = numIndices || 0;\n\t\tthis.vertexUsage = isStatic ? this.gl.STATIC_DRAW : this.gl.DYNAMIC_DRAW;\n\t\tthis.indexUsage  = isStatic ? this.gl.STATIC_DRAW : this.gl.DYNAMIC_DRAW;\n\t\tthis._vertexAttribs = vertexAttribs || [];\n\t\t\n\t\tthis.indicesDirty = true;\n\t\tthis.verticesDirty = true;\n\n\t\t//determine the vertex stride based on given attributes\n\t\tvar totalNumComponents = 0;\n\t\tfor (var i=0; i<this._vertexAttribs.length; i++)\n\t\t\ttotalNumComponents += this._vertexAttribs[i].offsetCount;\n\t\tthis.vertexStride = totalNumComponents * 4; // in bytes\n\n\t\tthis.vertices = new Float32Array(this.numVerts);\n\t\tthis.indices = new Uint16Array(this.numIndices);\n\n\t\t//add this VBO to the managed cache\n\t\tthis.context.addManagedObject(this);\n\n\t\tthis.create();\n\t},\n\n\t//recreates the buffers on context loss\n\tcreate: function() {\n\t\tthis.gl = this.context.gl;\n\t\tvar gl = this.gl;\n\t\tthis.vertexBuffer = gl.createBuffer();\n\n\t\t//ignore index buffer if we haven't specified any\n\t\tthis.indexBuffer = this.numIndices > 0\n\t\t\t\t\t? gl.createBuffer()\n\t\t\t\t\t: null;\n\n\t\tthis.dirty = true;\n\t},\n\n\tdestroy: function() {\n\t\tthis.vertices = null;\n\t\tthis.indices = null;\n\t\tif (this.vertexBuffer && this.gl)\n\t\t\tthis.gl.deleteBuffer(this.vertexBuffer);\n\t\tif (this.indexBuffer && this.gl)\n\t\t\tthis.gl.deleteBuffer(this.indexBuffer);\n\t\tthis.vertexBuffer = null;\n\t\tthis.indexBuffer = null;\n\t\tif (this.context)\n\t\t\tthis.context.removeManagedObject(this);\n\t\tthis.gl = null;\n\t\tthis.context = null;\n\t},\n\n\t_updateBuffers: function(ignoreBind, subDataLength) {\n\t\tvar gl = this.gl;\n\n\t\t//bind our index data, if we have any\n\t\tif (this.numIndices > 0) {\n\t\t\tif (!ignoreBind)\n\t\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n\n\t\t\t//update the index data\n\t\t\tif (this.indicesDirty) {\n\t\t\t\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices, this.indexUsage);\n\t\t\t\tthis.indicesDirty = false;\n\t\t\t}\n\t\t}\n\n\t\t//bind our vertex data\n\t\tif (!ignoreBind)\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n\n\t\t//update our vertex data\n\t\tif (this.verticesDirty) {\n\t\t\tif (subDataLength) {\n\t\t\t\t// TODO: When decoupling VBO/IBO be sure to give better subData support..\n\t\t\t\tvar view = this.vertices.subarray(0, subDataLength);\n\t\t\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, view);\n\t\t\t} else {\n\t\t\t\tgl.bufferData(gl.ARRAY_BUFFER, this.vertices, this.vertexUsage);\t\n\t\t\t}\n\n\t\t\t\n\t\t\tthis.verticesDirty = false;\n\t\t}\n\t},\n\n\tdraw: function(primitiveType, count, offset, subDataLength) {\n\t\tif (count === 0)\n\t\t\treturn;\n\n\t\tvar gl = this.gl;\n\t\t\n\t\toffset = offset || 0;\n\n\t\t//binds and updates our buffers. pass ignoreBind as true\n\t\t//to avoid binding unnecessarily\n\t\tthis._updateBuffers(true, subDataLength);\n\n\t\tif (this.numIndices > 0) { \n\t\t\tgl.drawElements(primitiveType, count, \n\t\t\t\t\t\tgl.UNSIGNED_SHORT, offset * 2); //* Uint16Array.BYTES_PER_ELEMENT\n\t\t} else\n\t\t\tgl.drawArrays(primitiveType, offset, count);\n\t},\n\n\t//binds this mesh's vertex attributes for the given shader\n\tbind: function(shader) {\n\t\tvar gl = this.gl;\n\n\t\tvar offset = 0;\n\t\tvar stride = this.vertexStride;\n\n\t\t//bind and update our vertex data before binding attributes\n\t\tthis._updateBuffers();\n\n\t\t//for each attribtue\n\t\tfor (var i=0; i<this._vertexAttribs.length; i++) {\n\t\t\tvar a = this._vertexAttribs[i];\n\n\t\t\t//location of the attribute\n\t\t\tvar loc = a.location === null \n\t\t\t\t\t? shader.getAttributeLocation(a.name)\n\t\t\t\t\t: a.location;\n\n\t\t\t//TODO: We may want to skip unfound attribs\n\t\t\t// if (loc!==0 && !loc)\n\t\t\t// \tconsole.warn(\"WARN:\", a.name, \"is not enabled\");\n\n\t\t\t//first, enable the vertex array\n\t\t\tgl.enableVertexAttribArray(loc);\n\n\t\t\t//then specify our vertex format\n\t\t\tgl.vertexAttribPointer(loc, a.numComponents, a.type || gl.FLOAT, \n\t\t\t\t\t\t\t\t   a.normalize, stride, offset);\n\n\t\t\t//and increase the offset...\n\t\t\toffset += a.offsetCount * 4; //in bytes\n\t\t}\n\t},\n\n\tunbind: function(shader) {\n\t\tvar gl = this.gl;\n\n\t\t//for each attribtue\n\t\tfor (var i=0; i<this._vertexAttribs.length; i++) {\n\t\t\tvar a = this._vertexAttribs[i];\n\n\t\t\t//location of the attribute\n\t\t\tvar loc = a.location === null \n\t\t\t\t\t? shader.getAttributeLocation(a.name)\n\t\t\t\t\t: a.location;\n\n\t\t\t//first, enable the vertex array\n\t\t\tgl.disableVertexAttribArray(loc);\n\t\t}\n\t}\n});\n\nMesh.Attrib = new Class({\n\n\tname: null,\n\tnumComponents: null,\n\tlocation: null,\n\ttype: null,\n\n\t/**\n\t * Mesh vertex attribute holder.\n\t * \n\t * Location is optional and for advanced users that\n\t * want vertex arrays to match across shaders. Any non-numerical\n\t * value will be converted to null, and ignored. If a numerical\n\t * value is given, it will override the position of this attribute\n\t * when given to a mesh.\n\t *\n\t * @class  Mesh.Attrib\n\t * @constructor\n\t * @param {String} name the name of the attribute\n\t * @param {Number} numComponents the number of components, e.g. 2 for vec2\n\t * @param {Number} location optional attribute index location\n\t * @param {Number} type defaults to GL_FLOAT \n\t * @param {Number} normalize whether to normalize to 0-1, default false\n\t */\n\tinitialize: function(name, numComponents, location, type, normalize, offsetCount) {\n\t\tthis.name = name;\n\t\tthis.numComponents = numComponents;\n\t\tthis.location = typeof location === \"number\" ? location : null;\n\t\tthis.type = type;\n\t\tthis.normalize = Boolean(normalize);\n\t\tthis.offsetCount = typeof offsetCount === \"number\" ? offsetCount : this.numComponents;\n\t}\n});\n\n\nmodule.exports = Mesh;","import createBatch from \"kami-batch2\";\nexport default createBatch;","/**\n * A fast and efficient 2D sprite batcher.\n * \n * @module kami-batch\n */\n\n// Requires....\nvar Class = require('klasse');\n\nvar Mesh = require('kami-mesh-buffer');\nvar ShaderProgram = require('kami-shader');\nvar BaseBatch = require('kami-base-batch');\nvar mat4 = require('gl-matrix').mat4;\n\n/**\n * A basic implementation of a batcher which draws 2D sprites.\n * This uses two triangles (quads) with indexed and interleaved\n * vertex data. Each vertex holds 5 floats (Position.xy, Color, TexCoord0.xy).\n *\n * The color is packed into a single float to reduce vertex bandwidth, and\n * the data is interleaved for best performance. We use a static index buffer,\n * and a dynamic vertex buffer that is updated with bufferSubData. \n * \n * @example\n *      //create a new batcher\n *      var batch = require('kami-batch')(context);\n *\n *      function render() {\n *          batch.begin();\n *          \n *          //draw some sprites in between begin and end...\n *          batch.draw( texture, 0, 0, 25, 32 );\n *          batch.draw( texture1, 0, 25, 42, 23 );\n * \n *          batch.end();\n *      }\n * \n * @class  SpriteBatch\n * @uses BaseBatch\n * @constructor\n * @param {WebGLContext} context the context for this batch\n * @param {Object} options the options\n * @param {Number} options.size the optional size of this batch, i.e. max number of quads\n */\nvar SpriteBatch = new Class({\n\t//inherit some stuff onto this prototype\n\tMixins: BaseBatch,\n\n\t//Constructor\n\tinitialize: function SpriteBatch(context, options) {\n\t\tif (!(this instanceof SpriteBatch))\n\t\t\treturn new SpriteBatch(context, options);\n\t\tBaseBatch.call(this, context, options);\n\n\t\t/**\n\t\t * The projection Float32Array vec2 which is\n\t\t * used to avoid some matrix calculations.\n\t\t *\n\t\t * @property projection\n\t\t * @type {Float32Array}\n\t\t */\n\t\t// this.projection = new Float32Array(2);\n\n\t\t// var ctxCanvas = this.context.gl.canvas;\n\t\t//Sets up a default projection vector so that the batch works without setProjection\n\t\t// this.projection[0] = ctxCanvas.width/2;\n\t\t// this.projection[1] = ctxCanvas.height/2;\n\t\tthis.projection = mat4.create();\n\n\t\t/**\n\t\t * The currently bound texture. Do not modify.\n\t\t * \n\t\t * @property {Texture} texture\n\t\t * @readOnly\n\t\t */\n\t\tthis.texture = null;\n\t},\n\n\t/**\n\t * This is a convenience function to set the batch's projection\n\t * matrix to an orthographic 2D projection, based on the given screen\n\t * size. This allows users to render in 2D without any need for a camera.\n\t * \n\t * @param  {[type]} width  [description]\n\t * @param  {[type]} height [description]\n\t * @return {[type]}        [description]\n\t */\n\tresize: function(width, height) {\n\t\tthis.setProjection(width / 2, height / 2);\n\t},\n\n\t/**\n\t * The number of floats per vertex for this batcher \n\t * (Position.xy + Color + TexCoord0.xy).\n\t *\n\t * @method  getVertexSize\n\t * @return {Number} the number of floats per vertex\n\t */\n\tgetVertexSize: function() {\n\t\treturn SpriteBatch.VERTEX_SIZE;\n\t},\n\n\t/**\n\t * Used internally to return the Position, Color, and TexCoord0 attributes.\n\t *\n\t * @method  _createVertexAttribuets\n\t * @protected\n\t * @return {[type]} [description]\n\t */\n\t_createVertexAttributes: function() {\n\t\tvar gl = this.context.gl;\n\n\t\treturn [\n\t\t\tnew Mesh.Attrib(ShaderProgram.POSITION_ATTRIBUTE, 2),\n\t\t\t//pack the color for smaller CPU -> GPU bandwidth\n\t\t\tnew Mesh.Attrib(\n\t\t\t\tShaderProgram.COLOR_ATTRIBUTE,\n\t\t\t\t4,\n\t\t\t\tnull,\n\t\t\t\tgl.UNSIGNED_BYTE,\n\t\t\t\ttrue,\n\t\t\t\t1\n\t\t\t),\n\t\t\tnew Mesh.Attrib(ShaderProgram.TEXCOORD_ATTRIBUTE + '0', 2)\n\t\t];\n\t},\n\n\t/**\n\t * Sets the projection vector, an x and y\n\t * defining the middle points of your stage.\n\t *\n\t * @method setProjection\n\t * @param {Number} x the x projection value\n\t * @param {Number} y the y projection value\n\t */\n\tsetProjection: function(mat4) {\n\t\tthis.projection = mat4;\n\t\tif (this.drawing && (x != oldX || y != oldY)) {\n\t\t\tthis.flush();\n\t\t\tthis.updateMatrices();\n\t\t}\n\t},\n\n\t/**\n\t * Creates a default shader for this batch.\n\t *\n\t * @method  _createShader\n\t * @protected\n\t * @return {ShaderProgram} a new instance of ShaderProgram\n\t */\n\t_createShader: function() {\n\t\tvar shader = new ShaderProgram(\n\t\t\tthis.context,\n\t\t\tSpriteBatch.DEFAULT_VERT_SHADER,\n\t\t\tSpriteBatch.DEFAULT_FRAG_SHADER\n\t\t);\n\t\tif (shader.log) console.warn('Shader Log:\\n' + shader.log);\n\t\treturn shader;\n\t},\n\n\t/**\n\t * This is called during rendering to update projection/transform\n\t * matrices and upload the new values to the shader. For example,\n\t * if the user calls setProjection mid-draw, the batch will flush\n\t * and this will be called before continuing to add items to the batch.\n\t *\n\t * You generally should not need to call this directly.\n\t * \n\t * @method  updateMatrices\n\t * @protected\n\t */\n\tupdateMatrices: function() {\n\t\tthis.shader.setUniformMatrix4('u_projection', this.projection);\n\t},\n\n\t/**\n\t * Called before rendering, and binds the current texture.\n\t * \n\t * @method _preRender\n\t * @protected\n\t */\n\t_preRender: function() {\n\t\tif (this.texture) this.texture.bind();\n\t},\n\n\t/**\n\t * Binds the shader, disables depth writing, \n\t * enables blending, activates texture unit 0, and sends\n\t * default matrices and sampler2D uniforms to the shader.\n\t *\n\t * @method  begin\n\t */\n\tbegin: function() {\n\t\t//sprite batch doesn't hold a reference to GL since it is volatile\n\t\tvar gl = this.context.gl;\n\n\t\t//This binds the shader and mesh!\n\t\tBaseBatch.prototype.begin.call(this);\n\n\t\tthis.updateMatrices(); //send projection/transform to shader\n\n\t\t//upload the sampler uniform. not necessary every flush so we just\n\t\t//do it here.\n\t\tthis.shader.setUniformi('u_texture0', 0);\n\n\t\t//disable depth mask\n\t\tgl.depthMask(false);\n\t},\n\n\t/**\n\t * Ends the sprite batcher and flushes any remaining data to the GPU.\n\t * \n\t * @method end\n\t */\n\tend: function() {\n\t\t//sprite batch doesn't hold a reference to GL since it is volatile\n\t\tvar gl = this.context.gl;\n\n\t\t//just do direct parent call for speed here\n\t\t//This binds the shader and mesh!\n\t\tBaseBatch.prototype.end.call(this);\n\n\t\tgl.depthMask(true);\n\t},\n\n\t/**\n\t * Flushes the batch to the GPU. This should be called when\n\t * state changes, such as blend functions, depth or stencil states,\n\t * shaders, and so forth.\n\t * \n\t * @method flush\n\t */\n\tflush: function() {\n\t\t//ignore flush if texture is null or our batch is empty\n\t\tif (!this.texture) return;\n\t\tif (this.idx === 0) return;\n\t\tBaseBatch.prototype.flush.call(this);\n\t\tSpriteBatch.totalRenderCalls++;\n\t},\n\n\tdrawRegion: function(region, x, y, width, height) {\n\t\tthis.draw(\n\t\t\tregion.texture,\n\t\t\tx,\n\t\t\ty,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tregion.u,\n\t\t\tregion.v,\n\t\t\tregion.u2,\n\t\t\tregion.v2\n\t\t);\n\t},\n\n\t/**\n\t * Adds a sprite to this batch. The sprite is drawn in \n\t * screen-space with the origin at the upper-left corner (y-down).\n\t * \n\t * @method draw\n\t * @param  {Texture} texture the Texture\n\t * @param  {Number} x       the x position in pixels, defaults to zero\n\t * @param  {Number} y       the y position in pixels, defaults to zero\n\t * @param  {Number} width   the width in pixels, defaults to the texture width\n\t * @param  {Number} height  the height in pixels, defaults to the texture height\n\t * @param  {Number} u1      the first U coordinate, default zero\n\t * @param  {Number} v1      the first V coordinate, default zero\n\t * @param  {Number} u2      the second U coordinate, default one\n\t * @param  {Number} v2      the second V coordinate, default one\n\t */\n\tdraw: function(\n\t\ttexture,\n\t\tx,\n\t\ty,\n\t\twidth,\n\t\theight,\n\t\toriginX = 0,\n\t\toriginY = 0,\n\t\trotation = 0,\n\t\tscaleX = 1,\n\t\tscaleY = 1,\n\t\tu1 = 0,\n\t\tv1 = 0,\n\t\tu2 = 1,\n\t\tv2 = 1\n\t) {\n\t\tif (!this.drawing)\n\t\t\tthrow 'Illegal State: trying to draw a batch before begin()';\n\n\t\t//don't draw anything if GL tex doesn't exist..\n\t\tif (!texture) return;\n\n\t\tif (this.texture === null || this.texture.id !== texture.id) {\n\t\t\t//new texture.. flush previous data\n\t\t\tthis.flush();\n\t\t\tthis.texture = texture;\n\t\t} else if (this.idx == this.vertices.length) {\n\t\t\tthis.flush(); //we've reached our max, flush before pushing more data\n\t\t}\n\n\t\twidth = width === 0 ? width : width || texture.width;\n\t\theight = height === 0 ? height : height || texture.height;\n\t\tx = x || 0;\n\t\ty = y || 0;\n\n\t\tvar x1 = -originX;\n\t\tvar x2 = width - originX;\n\t\tvar x3 = width - originX;\n\t\tvar x4 = -originX;\n\n\t\tvar y1 = -originY;\n\t\tvar y2 = -originY;\n\t\tvar y3 = height - originY;\n\t\tvar y4 = height - originY;\n\n\t\tvar c = this.color;\n\n\t\tif (scaleX !== 1) {\n\t\t\tx1 = x1 * scaleX;\n\t\t\tx2 = x2 * scaleX;\n\t\t\tx3 = x3 * scaleX;\n\t\t\tx4 = x4 * scaleX;\n\t\t}\n\n\t\tif (scaleY !== 1) {\n\t\t\ty1 = y1 * scaleY;\n\t\t\ty2 = y2 * scaleY;\n\t\t\ty3 = y3 * scaleY;\n\t\t\ty4 = y4 * scaleY;\n\t\t}\n\n\t\tif (rotation !== 0) {\n\t\t\tvar cos = Math.cos(rotation);\n\t\t\tvar sin = Math.sin(rotation);\n\n\t\t\tvar rotatedX1 = cos * x1 - sin * y1;\n\t\t\tvar rotatedY1 = sin * x1 + cos * y1;\n\n\t\t\tvar rotatedX2 = cos * x2 - sin * y2;\n\t\t\tvar rotatedY2 = sin * x2 + cos * y2;\n\n\t\t\tvar rotatedX3 = cos * x3 - sin * y3;\n\t\t\tvar rotatedY3 = sin * x3 + cos * y3;\n\n\t\t\tvar rotatedX4 = cos * x4 - sin * y4;\n\t\t\tvar rotatedY4 = sin * x4 + cos * y4;\n\n\t\t\tx1 = rotatedX1;\n\t\t\tx2 = rotatedX2;\n\t\t\tx3 = rotatedX3;\n\t\t\tx4 = rotatedX4;\n\n\t\t\ty1 = rotatedY1;\n\t\t\ty2 = rotatedY2;\n\t\t\ty3 = rotatedY3;\n\t\t\ty4 = rotatedY4;\n\t\t}\n\n\t\tx1 += x + originX;\n\t\tx2 += x + originX;\n\t\tx3 += x + originX;\n\t\tx4 += x + originX;\n\n\t\ty1 += y + originY;\n\t\ty2 += y + originY;\n\t\ty3 += y + originY;\n\t\ty4 += y + originY;\n\n\t\t//xy\n\t\tthis.vertices[this.idx++] = x1;\n\t\tthis.vertices[this.idx++] = y1;\n\t\t//color\n\t\tthis.vertices[this.idx++] = c;\n\t\t//uv\n\t\tthis.vertices[this.idx++] = u1;\n\t\tthis.vertices[this.idx++] = v1;\n\n\t\t//xy\n\t\tthis.vertices[this.idx++] = x2;\n\t\tthis.vertices[this.idx++] = y2;\n\t\t//color\n\t\tthis.vertices[this.idx++] = c;\n\t\t//uv\n\t\tthis.vertices[this.idx++] = u2;\n\t\tthis.vertices[this.idx++] = v1;\n\n\t\t//xy\n\t\tthis.vertices[this.idx++] = x3;\n\t\tthis.vertices[this.idx++] = y3;\n\t\t//color\n\t\tthis.vertices[this.idx++] = c;\n\t\t//uv\n\t\tthis.vertices[this.idx++] = u2;\n\t\tthis.vertices[this.idx++] = v2;\n\n\t\t//xy\n\t\tthis.vertices[this.idx++] = x4;\n\t\tthis.vertices[this.idx++] = y4;\n\t\t//color\n\t\tthis.vertices[this.idx++] = c;\n\t\t//uv\n\t\tthis.vertices[this.idx++] = u1;\n\t\tthis.vertices[this.idx++] = v2;\n\t},\n\n\t/**\n\t * Adds a single quad mesh to this sprite batch from the given\n\t * array of vertices. The sprite is drawn in \n\t * screen-space with the origin at the upper-left corner (y-down).\n\t *\n\t * This reads 20 interleaved floats from the given offset index, in the format\n\t *\n\t *  { x, y, color, u, v,\n\t *      ...  }\n\t *\n\t * @method  drawVertices\n\t * @param {Texture} texture the Texture object\n\t * @param {Float32Array} verts an array of vertices\n\t * @param {Number} off the offset into the vertices array to read from\n\t */\n\tdrawVertices: function(texture, verts, off) {\n\t\tif (!this.drawing)\n\t\t\tthrow 'Illegal State: trying to draw a batch before begin()';\n\n\t\t//don't draw anything if GL tex doesn't exist..\n\t\tif (!texture) return;\n\n\t\tif (this.texture != texture) {\n\t\t\t//new texture.. flush previous data\n\t\t\tthis.flush();\n\t\t\tthis.texture = texture;\n\t\t} else if (this.idx == this.vertices.length) {\n\t\t\tthis.flush(); //we've reached our max, flush before pushing more data\n\t\t}\n\n\t\toff = off || 0;\n\t\t//TODO: use a loop here?\n\t\t//xy\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\t//color\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\t//uv\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\tthis.vertices[this.idx++] = verts[off++];\n\n\t\t//xy\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\t//color\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\t//uv\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\tthis.vertices[this.idx++] = verts[off++];\n\n\t\t//xy\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\t//color\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\t//uv\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\tthis.vertices[this.idx++] = verts[off++];\n\n\t\t//xy\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\t//color\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\t//uv\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t\tthis.vertices[this.idx++] = verts[off++];\n\t}\n});\n\n/**\n * The default vertex size, i.e. number of floats per vertex.\n * @attribute  VERTEX_SIZE\n * @static\n * @final\n * @type {Number}\n * @default  5\n */\nSpriteBatch.VERTEX_SIZE = 5;\n\n/**\n * Incremented after each draw call, can be used for debugging.\n *\n *     SpriteBatch.totalRenderCalls = 0;\n *\n *     ... draw your scene ...\n *\n *     console.log(\"Draw calls per frame:\", SpriteBatch.totalRenderCalls);\n *\n * \n * @attribute  totalRenderCalls\n * @static\n * @type {Number}\n * @default  0\n */\nSpriteBatch.totalRenderCalls = 0;\n\nSpriteBatch.DEFAULT_FRAG_SHADER = [\n\t'precision mediump float;',\n\t'varying vec2 vTexCoord0;',\n\t'varying vec4 vColor;',\n\t'uniform sampler2D u_texture0;',\n\n\t'void main(void) {',\n\t'   gl_FragColor = texture2D(u_texture0, vTexCoord0) * vColor;',\n\t'}'\n].join('\\n');\n\nSpriteBatch.DEFAULT_VERT_SHADER = [\n\t'attribute vec4 ' + ShaderProgram.POSITION_ATTRIBUTE + ';',\n\t'attribute vec4 ' + ShaderProgram.COLOR_ATTRIBUTE + ';',\n\t'attribute vec2 ' + ShaderProgram.TEXCOORD_ATTRIBUTE + '0;',\n\n\t'uniform mat4 u_projection;',\n\t'varying vec2 vTexCoord0;',\n\t'varying vec4 vColor;',\n\n\t'void main(void) {', ///TODO: use a projection and transform matrix\n\t'   gl_Position =  u_projection * ' + ShaderProgram.POSITION_ATTRIBUTE + ';',\n\t'   vTexCoord0 = ' + ShaderProgram.TEXCOORD_ATTRIBUTE + '0;',\n\t'   vColor = ' + ShaderProgram.COLOR_ATTRIBUTE + ';',\n\t'   vColor.a = vColor.a * (256.0/255.0);', //this is so the alpha sits at 0.0 or 1.0\n\t'}'\n].join('\\n');\n\nmodule.exports = SpriteBatch;\n","import { EventEmitter } from \"fbemitter\";\nexport default class InputHandler {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.lastX = 0;\n    this.lastY = 0;\n    this.touched = false;\n    const emitter = this.emitter = new EventEmitter();\n\n    this.mouseDownHandler = evt => {\n      this.touched = true;\n      this.handleMove(evt);\n      emitter.emit(\"touchStart\", this.getX(), this.getY());\n    };\n\n    this.mouseUpHandler = evt => {\n      this.touched = false;\n      emitter.emit(\"touchEnd\");\n    };\n\n    this.mouseMoveHandler = evt => {\n      this.handleMove(evt);\n      emitter.emit(\"touchMove\", this.getX(), this.getY());\n    };\n\n    this.touchStartHandler = evt => {\n      evt.preventDefault(); // TODO: handle multi touch\n\n      let touch = evt.touches[0];\n      this.canvas.dispatchEvent(new MouseEvent(\"mousedown\", {\n        clientX: touch.clientX,\n        clientY: touch.clientY\n      }));\n    };\n\n    this.touchEndHandler = evt => {\n      evt.preventDefault();\n      this.canvas.dispatchEvent(new MouseEvent(\"mouseup\"));\n    };\n\n    this.touchMoveHandler = evt => {\n      evt.preventDefault();\n      let touch = evt.touches[0];\n      this.canvas.dispatchEvent(new MouseEvent(\"mousemove\", {\n        clientX: touch.clientX,\n        clientY: touch.clientY\n      }));\n    };\n\n    this.canvas.addEventListener(\"mousedown\", this.mouseDownHandler, false);\n    this.canvas.addEventListener(\"mouseup\", this.mouseUpHandler, false);\n    this.canvas.addEventListener(\"mousemove\", this.mouseMoveHandler, false);\n    this.canvas.addEventListener(\"touchstart\", this.touchStartHandler, false);\n    this.canvas.addEventListener(\"touchend\", this.touchEndHandler, false);\n    this.canvas.addEventListener(\"touchmove\", this.touchMoveHandler, false);\n  }\n\n  cleanup() {\n    this.canvas.removeEventListener(\"mousedown\", this.mouseDownHandler);\n    this.canvas.removeEventListener(\"mouseup\", this.mouseUpHandler);\n    this.canvas.removeEventListener(\"mousemove\", this.mouseMoveHandler);\n    this.canvas.removeEventListener(\"touchstart\", this.touchStartHandler);\n    this.canvas.removeEventListener(\"touchend\", this.touchEndHandler);\n    this.canvas.removeEventListener(\"touchmove\", this.touchMoveHandler);\n  }\n\n  addEventListener(event, listener) {\n    this.emitter.addListener(event, listener);\n  }\n\n  handleMove(evt) {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = evt.clientX - rect.left;\n    const y = evt.clientY - rect.top;\n    this.lastX = x;\n    this.lastY = y;\n  }\n\n  getX() {\n    return this.lastX;\n  }\n\n  getY() {\n    return this.lastY;\n  }\n\n  isTouched() {\n    return this.touched;\n  }\n\n}","export default class TextureRegion {\n  constructor(tex, x, y, width, height, extraData, invTexWidth, invTexHeight) {\n    if (!invTexWidth || !invTexHeight) {\n      invTexWidth = 1 / tex.width;\n      invTexHeight = 1 / tex.height;\n    }\n\n    const u = x * invTexWidth;\n    const v = y * invTexHeight;\n    const u2 = (x + width) * invTexWidth;\n    const v2 = (y + height) * invTexHeight;\n    this.texture = tex;\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.u = u;\n    this.v = v;\n    this.u2 = u2;\n    this.v2 = v2;\n\n    for (let key in extraData) {\n      this[key] = extraData[key];\n    }\n  }\n\n  draw(batch, x, y, width, height, originX = 0, originY = 0, rotation = 0, scaleX = 1, scaleY = 1) {\n    batch.draw(this.texture, x, y, width, height, originX, originY, rotation, scaleX, scaleY, this.u, this.v, this.u2, this.v2);\n  }\n\n}","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","export const project = (out, vec3, mat4) => {\n  const [x, y, z] = vec3;\n  const m = mat4;\n  const a00 = m[0],\n        a01 = m[1],\n        a02 = m[2],\n        a03 = m[3],\n        a10 = m[4],\n        a11 = m[5],\n        a12 = m[6],\n        a13 = m[7],\n        a20 = m[8],\n        a21 = m[9],\n        a22 = m[10],\n        a23 = m[11],\n        a30 = m[12],\n        a31 = m[13],\n        a32 = m[14],\n        a33 = m[15];\n  const l_w = 1 / (x * a03 + y * a13 + z * a23 + a33);\n  out[0] = (x * a00 + y * a10 + z * a20 + a30) * l_w;\n  out[1] = (x * a01 + y * a11 + z * a21 + a31) * l_w;\n  out[2] = (x * a02 + y * a12 + z * a22 + a32) * l_w;\n  return out;\n};\nexport const unproject = (out, vec3, invMat4, viewX, viewY, viewWidth, viewHeight) => {\n  let [x, y, z] = vec3;\n  x = x - viewX;\n  y = viewHeight - y - 1;\n  y = y - viewY;\n  out[0] = 2 * x / viewWidth - 1;\n  out[1] = 2 * y / viewHeight - 1;\n  out[2] = 2 * z - 1;\n  return project(out, out, invMat4);\n};","import { mat4 } from 'gl-matrix';\nimport { unproject } from './mathUtils';\nexport default ((width, height, viewportWidth, viewportHeight) => {\n  const combined = mat4.create();\n  mat4.ortho(combined, 0, width, height, 0, 0, 1);\n  const invOrtho = mat4.create();\n  mat4.invert(invOrtho, combined);\n  const transform = mat4.create();\n  const tmp3 = [0, 0, 0];\n  const origin = [];\n  const scaleVec = [];\n  const negOriginVec = [];\n  const translateVec = [];\n  return {\n    combined,\n\n    setMatrix(mat) {\n      mat4.copy(combined, mat);\n      mat4.invert(invOrtho, combined);\n    },\n\n    unprojectVector2(out, input) {\n      tmp3[0] = input[0];\n      tmp3[1] = input[1];\n      tmp3[2] = 0;\n      unproject(tmp3, tmp3, invOrtho, 0, 0, viewportWidth, viewportHeight);\n      out[0] = tmp3[0];\n      out[1] = tmp3[1];\n    },\n\n    resize(width, height) {\n      mat4.ortho(combined, 0, width, height, 0, 0, 1);\n      mat4.invert(invOrtho, combined);\n    },\n\n    translate(x, y) {\n      translateVec.length = 0;\n      translateVec[0] = x;\n      translateVec[1] = y;\n      translateVec[2] = 0;\n      mat4.translate(combined, combined, translateVec);\n      mat4.invert(invOrtho, combined);\n    },\n\n    scale(originX, originY, scale) {\n      origin.length = 0;\n      origin[0] = originX;\n      origin[1] = originY;\n      origin[2] = 0;\n      scaleVec.length = 0;\n      scaleVec[0] = scale;\n      scaleVec[1] = scale;\n      scaleVec[2] = 1;\n      negOriginVec.length = 0;\n      negOriginVec[0] = -originX;\n      negOriginVec[1] = -originY;\n      negOriginVec[2] = 0;\n      mat4.identity(transform);\n      mat4.translate(transform, transform, origin);\n      mat4.scale(transform, transform, scaleVec);\n      mat4.translate(transform, transform, negOriginVec);\n      mat4.mul(combined, combined, transform);\n      mat4.invert(invOrtho, combined);\n    }\n\n  };\n});","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule BaseEventEmitter\n * @typechecks\n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar EmitterSubscription = require('./EmitterSubscription');\nvar EventSubscriptionVendor = require('./EventSubscriptionVendor');\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar invariant = require('fbjs/lib/invariant');\n\n/**\n * @class BaseEventEmitter\n * @description\n * An EventEmitter is responsible for managing a set of listeners and publishing\n * events to them when it is told that such events happened. In addition to the\n * data for the given event it also sends a event control object which allows\n * the listeners/handlers to prevent the default behavior of the given event.\n *\n * The emitter is designed to be generic enough to support all the different\n * contexts in which one might want to emit events. It is a simple multicast\n * mechanism on top of which extra functionality can be composed. For example, a\n * more advanced emitter may use an EventHolder and EventFactory.\n */\n\nvar BaseEventEmitter = (function () {\n  /**\n   * @constructor\n   */\n\n  function BaseEventEmitter() {\n    _classCallCheck(this, BaseEventEmitter);\n\n    this._subscriber = new EventSubscriptionVendor();\n    this._currentSubscription = null;\n  }\n\n  /**\n   * Adds a listener to be invoked when events of the specified type are\n   * emitted. An optional calling context may be provided. The data arguments\n   * emitted will be passed to the listener function.\n   *\n   * TODO: Annotate the listener arg's type. This is tricky because listeners\n   *       can be invoked with varargs.\n   *\n   * @param {string} eventType - Name of the event to listen to\n   * @param {function} listener - Function to invoke when the specified event is\n   *   emitted\n   * @param {*} context - Optional context object to use when invoking the\n   *   listener\n   */\n\n  BaseEventEmitter.prototype.addListener = function addListener(eventType, listener, context) {\n    return this._subscriber.addSubscription(eventType, new EmitterSubscription(this._subscriber, listener, context));\n  };\n\n  /**\n   * Similar to addListener, except that the listener is removed after it is\n   * invoked once.\n   *\n   * @param {string} eventType - Name of the event to listen to\n   * @param {function} listener - Function to invoke only once when the\n   *   specified event is emitted\n   * @param {*} context - Optional context object to use when invoking the\n   *   listener\n   */\n\n  BaseEventEmitter.prototype.once = function once(eventType, listener, context) {\n    var emitter = this;\n    return this.addListener(eventType, function () {\n      emitter.removeCurrentListener();\n      listener.apply(context, arguments);\n    });\n  };\n\n  /**\n   * Removes all of the registered listeners, including those registered as\n   * listener maps.\n   *\n   * @param {?string} eventType - Optional name of the event whose registered\n   *   listeners to remove\n   */\n\n  BaseEventEmitter.prototype.removeAllListeners = function removeAllListeners(eventType) {\n    this._subscriber.removeAllSubscriptions(eventType);\n  };\n\n  /**\n   * Provides an API that can be called during an eventing cycle to remove the\n   * last listener that was invoked. This allows a developer to provide an event\n   * object that can remove the listener (or listener map) during the\n   * invocation.\n   *\n   * If it is called when not inside of an emitting cycle it will throw.\n   *\n   * @throws {Error} When called not during an eventing cycle\n   *\n   * @example\n   *   var subscription = emitter.addListenerMap({\n   *     someEvent: function(data, event) {\n   *       console.log(data);\n   *       emitter.removeCurrentListener();\n   *     }\n   *   });\n   *\n   *   emitter.emit('someEvent', 'abc'); // logs 'abc'\n   *   emitter.emit('someEvent', 'def'); // does not log anything\n   */\n\n  BaseEventEmitter.prototype.removeCurrentListener = function removeCurrentListener() {\n    !!!this._currentSubscription ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Not in an emitting cycle; there is no current subscription') : invariant(false) : undefined;\n    this._subscriber.removeSubscription(this._currentSubscription);\n  };\n\n  /**\n   * Returns an array of listeners that are currently registered for the given\n   * event.\n   *\n   * @param {string} eventType - Name of the event to query\n   * @return {array}\n   */\n\n  BaseEventEmitter.prototype.listeners = function listeners(eventType) /* TODO: Array<EventSubscription> */{\n    var subscriptions = this._subscriber.getSubscriptionsForType(eventType);\n    return subscriptions ? subscriptions.filter(emptyFunction.thatReturnsTrue).map(function (subscription) {\n      return subscription.listener;\n    }) : [];\n  };\n\n  /**\n   * Emits an event of the given type with the given data. All handlers of that\n   * particular type will be notified.\n   *\n   * @param {string} eventType - Name of the event to emit\n   * @param {*} Arbitrary arguments to be passed to each registered listener\n   *\n   * @example\n   *   emitter.addListener('someEvent', function(message) {\n   *     console.log(message);\n   *   });\n   *\n   *   emitter.emit('someEvent', 'abc'); // logs 'abc'\n   */\n\n  BaseEventEmitter.prototype.emit = function emit(eventType) {\n    var subscriptions = this._subscriber.getSubscriptionsForType(eventType);\n    if (subscriptions) {\n      var keys = Object.keys(subscriptions);\n      for (var ii = 0; ii < keys.length; ii++) {\n        var key = keys[ii];\n        var subscription = subscriptions[key];\n        // The subscription may have been removed during this event loop.\n        if (subscription) {\n          this._currentSubscription = subscription;\n          this.__emitToSubscription.apply(this, [subscription].concat(Array.prototype.slice.call(arguments)));\n        }\n      }\n      this._currentSubscription = null;\n    }\n  };\n\n  /**\n   * Provides a hook to override how the emitter emits an event to a specific\n   * subscription. This allows you to set up logging and error boundaries\n   * specific to your environment.\n   *\n   * @param {EmitterSubscription} subscription\n   * @param {string} eventType\n   * @param {*} Arbitrary arguments to be passed to each registered listener\n   */\n\n  BaseEventEmitter.prototype.__emitToSubscription = function __emitToSubscription(subscription, eventType) {\n    var args = Array.prototype.slice.call(arguments, 2);\n    subscription.listener.apply(subscription.context, args);\n  };\n\n  return BaseEventEmitter;\n})();\n\nmodule.exports = BaseEventEmitter;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule EventSubscription\n * @typechecks\n */\n\n'use strict';\n\n/**\n * EventSubscription represents a subscription to a particular event. It can\n * remove its own subscription.\n */\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar EventSubscription = (function () {\n\n  /**\n   * @param {EventSubscriptionVendor} subscriber the subscriber that controls\n   *   this subscription.\n   */\n\n  function EventSubscription(subscriber) {\n    _classCallCheck(this, EventSubscription);\n\n    this.subscriber = subscriber;\n  }\n\n  /**\n   * Removes this subscription from the subscriber that controls it.\n   */\n\n  EventSubscription.prototype.remove = function remove() {\n    if (this.subscriber) {\n      this.subscriber.removeSubscription(this);\n      this.subscriber = null;\n    }\n  };\n\n  return EventSubscription;\n})();\n\nmodule.exports = EventSubscription;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n * \n * @providesModule EventSubscriptionVendor\n * @typechecks\n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = require('fbjs/lib/invariant');\n\n/**\n * EventSubscriptionVendor stores a set of EventSubscriptions that are\n * subscribed to a particular event type.\n */\n\nvar EventSubscriptionVendor = (function () {\n  function EventSubscriptionVendor() {\n    _classCallCheck(this, EventSubscriptionVendor);\n\n    this._subscriptionsForType = {};\n    this._currentSubscription = null;\n  }\n\n  /**\n   * Adds a subscription keyed by an event type.\n   *\n   * @param {string} eventType\n   * @param {EventSubscription} subscription\n   */\n\n  EventSubscriptionVendor.prototype.addSubscription = function addSubscription(eventType, subscription) {\n    !(subscription.subscriber === this) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'The subscriber of the subscription is incorrectly set.') : invariant(false) : undefined;\n    if (!this._subscriptionsForType[eventType]) {\n      this._subscriptionsForType[eventType] = [];\n    }\n    var key = this._subscriptionsForType[eventType].length;\n    this._subscriptionsForType[eventType].push(subscription);\n    subscription.eventType = eventType;\n    subscription.key = key;\n    return subscription;\n  };\n\n  /**\n   * Removes a bulk set of the subscriptions.\n   *\n   * @param {?string} eventType - Optional name of the event type whose\n   *   registered supscriptions to remove, if null remove all subscriptions.\n   */\n\n  EventSubscriptionVendor.prototype.removeAllSubscriptions = function removeAllSubscriptions(eventType) {\n    if (eventType === undefined) {\n      this._subscriptionsForType = {};\n    } else {\n      delete this._subscriptionsForType[eventType];\n    }\n  };\n\n  /**\n   * Removes a specific subscription. Instead of calling this function, call\n   * `subscription.remove()` directly.\n   *\n   * @param {object} subscription\n   */\n\n  EventSubscriptionVendor.prototype.removeSubscription = function removeSubscription(subscription) {\n    var eventType = subscription.eventType;\n    var key = subscription.key;\n\n    var subscriptionsForType = this._subscriptionsForType[eventType];\n    if (subscriptionsForType) {\n      delete subscriptionsForType[key];\n    }\n  };\n\n  /**\n   * Returns the array of subscriptions that are currently registered for the\n   * given event type.\n   *\n   * Note: This array can be potentially sparse as subscriptions are deleted\n   * from it when they are removed.\n   *\n   * TODO: This returns a nullable array. wat?\n   *\n   * @param {string} eventType\n   * @return {?array}\n   */\n\n  EventSubscriptionVendor.prototype.getSubscriptionsForType = function getSubscriptionsForType(eventType) {\n    return this._subscriptionsForType[eventType];\n  };\n\n  return EventSubscriptionVendor;\n})();\n\nmodule.exports = EventSubscriptionVendor;","\"use strict\";\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nfunction makeEmptyFunction(arg) {\n  return function () {\n    return arg;\n  };\n}\n\n/**\n * This function accepts and discards inputs; it has no side effects. This is\n * primarily useful idiomatically for overridable function endpoints which\n * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n */\nvar emptyFunction = function emptyFunction() {};\n\nemptyFunction.thatReturns = makeEmptyFunction;\nemptyFunction.thatReturnsFalse = makeEmptyFunction(false);\nemptyFunction.thatReturnsTrue = makeEmptyFunction(true);\nemptyFunction.thatReturnsNull = makeEmptyFunction(null);\nemptyFunction.thatReturnsThis = function () {\n  return this;\n};\nemptyFunction.thatReturnsArgument = function (arg) {\n  return arg;\n};\n\nmodule.exports = emptyFunction;","var Class = require('klasse');\n\nvar GLContextWrapper = new Class({\n    \n    initialize: function GLContextWrapper(gl) {\n        this.gl = gl;\n    },\n\n    addManagedObject: function(e) { },\n    removeManagedObject: function(e) { },\n\n    width: {\n        get: function() {\n            return this.gl.canvas.width;\n        },\n        set: function(width) {\n            this.gl.canvas.width = width;\n        }\n    },\n\n    height: {\n        get: function() {\n            return this.gl.canvas.height;\n        },\n        set: function(height) {\n            this.gl.canvas.height = height;\n        }\n    }\n});\n\nmodule.exports = GLContextWrapper;","/**\n * Shader utilities for kami.\n * \n * @module kami-shader\n */\n\nvar Class = require('klasse');\nvar compileShader = require('webgl-compile-shader');\nvar wrapContext = require('kami-util').wrapContext;\n\nvar ShaderProgram = new Class({\n\t\n\t/**\n\t * Creates a new ShaderProgram from the given source, and an optional map of attribute\n\t * locations as <name, index> pairs.\n\t *\n\t * _Note:_ Chrome version 31 was giving me issues with attribute locations -- you may\n\t * want to omit this to let the browser pick the locations for you.\t\n\t *\n\t * @class  ShaderProgram\n\t * @constructor\n\t * @param  {WebGLRenderingContext|WebGLContext} context      the context to manage this object\n\t * @param  {String} vertSource         the vertex shader source\n\t * @param  {String} fragSource         the fragment shader source\n\t * @param  {Object} attributeLocations the attribute locations\n\t */\n\tinitialize: function ShaderProgram(context, vertSource, fragSource, attributeLocations) {\n\t\tif (!vertSource || !fragSource)\n\t\t\tthrow \"vertex and fragment shaders must be defined\";\n\t\tif (!context || typeof context !== \"object\")\n\t\t\tthrow \"valid GL context not specified to ShaderProgram\";\n\n\t\tthis.context = wrapContext(context);\n\n\t\tthis.vertShader = null;\n\t\tthis.fragShader = null;\n\t\tthis.program = null;\n\t\tthis.log = \"\";\n\n\t\tthis.uniformCache = null;\n\t\tthis.attributeCache = null;\n\n\t\tthis.attributeLocations = attributeLocations;\n\n\t\t//We trim so that the GLSL line numbers are\n\t\t//accurate on shader log\n\t\tthis.vertSource = vertSource.trim();\n\t\tthis.fragSource = fragSource.trim();\n\n\t\t//Adds this shader to the context, to be managed\n\t\t//This has no effect if the passed context is not a kami-context type\n\t\tthis.context.addManagedObject(this);\n\t\tthis.create();\n\t},\n\n\t/** \n\t * This is called during the ShaderProgram constructor,\n\t * and may need to be called again after context loss and restore.\n\t * \n\t * @method  create\n\t */\n\tcreate: function() {\n\t\tthis.gl = this.context.gl;\n\t\tthis._compileShaders();\n\t},\n\n\t//Compiles the shaders, throwing an error if the program was invalid.\n\t_compileShaders: function() {\n\t\tvar gl = this.gl; \n\t\t\n\t\tvar info = compileShader({\n\t\t\tgl: gl,\n\t\t\tvertex: this.vertSource,\n\t\t\tfragment: this.fragSource,\n\t\t\tverbose: ShaderProgram.VERBOSE_COMPILE,\n\t\t\tattributeLocations: this.attributeLocations\n\t\t});\n\n\t\tthis.log = info.log;\n\t\tthis.program = info.program;\n\t\tthis.vertShader = info.vertex;\n\t\tthis.fragShader = info.fragment;\n\t\t\n\t\tif (ShaderProgram.VERBOSE_COMPILE && this.log)\n\t\t\tconsole.warn(this.log);\n\n\t\tthis._fetchUniforms();\n\t\tthis._fetchAttributes();\n\t},\n\n\t_fetchUniforms: function() {\n\t\tvar gl = this.gl;\n\n\t\tthis.uniformCache = {};\n\n\t\tvar len = gl.getProgramParameter(this.program, gl.ACTIVE_UNIFORMS);\n\t\tif (!len) //null or zero\n\t\t\treturn;\n\n\t\tfor (var i=0; i<len; i++) {\n\t\t\tvar info = gl.getActiveUniform(this.program, i);\n\t\t\tif (info === null) \n\t\t\t\tcontinue;\n\t\t\tvar name = info.name;\n\t\t\tvar location = gl.getUniformLocation(this.program, name);\n\t\t\t\n\t\t\tthis.uniformCache[name] = {\n\t\t\t\tsize: info.size,\n\t\t\t\ttype: info.type,\n\t\t\t\tlocation: location\n\t\t\t};\n\t\t}\n\t},\n\n\t_fetchAttributes: function() { \n\t\tvar gl = this.gl; \n\n\t\tthis.attributeCache = {};\n\n\t\tvar len = gl.getProgramParameter(this.program, gl.ACTIVE_ATTRIBUTES);\n\t\tif (!len) //null or zero\n\t\t\treturn;\t\n\n\t\tfor (var i=0; i<len; i++) {\n\t\t\tvar info = gl.getActiveAttrib(this.program, i);\n\t\t\tif (info === null) \n\t\t\t\tcontinue;\n\t\t\tvar name = info.name;\n\n\t\t\t//the attrib location is a simple index\n\t\t\tvar location = gl.getAttribLocation(this.program, name);\n\t\t\t\n\t\t\tthis.attributeCache[name] = {\n\t\t\t\tsize: info.size,\n\t\t\t\ttype: info.type,\n\t\t\t\tlocation: location\n\t\t\t};\n\t\t}\n\t},\n\n\t/**\n\t * Called to bind this shader. Note that there is no \"unbind\" since\n\t * technically such a thing is not possible in the programmable pipeline.\n\t *\n\t * You must bind a shader before settings its uniforms.\n\t * \n\t * @method bind\n\t */\n\tbind: function() {\n\t\tthis.gl.useProgram(this.program);\n\t},\n\n\n\t/**\n\t * Destroys this shader and its resources. You should not try to use this\n\t * after destroying it.\n\t * @method  destroy\n\t */\n\tdestroy: function() {\n\t\tif (this.context)\n\t\t\tthis.context.removeManagedObject(this);\n\n\t\tif (this.gl && this.program) {\n\t\t\tvar gl = this.gl;\n\n\t\t    gl.detachShader(this.program, this.vertShader);\n\t\t    gl.detachShader(this.program, this.fragShader);\n\t\t    gl.deleteShader(this.vertShader);\n\t\t    gl.deleteShader(this.fragShader);\n\n\t\t\tgl.deleteProgram(this.program);\n\t\t}\n\t\tthis.attributeCache = null;\n\t\tthis.uniformCache = null;\n\t\tthis.vertShader = null;\n\t\tthis.fragShader = null;\n\t\tthis.program = null;\n\t\tthis.gl = null;\n\t\tthis.context = null;\n\t},\n\n\t/**\n\t * Returns the cached uniform info (size, type, location).\n\t * If the uniform is not found in the cache, it is assumed\n\t * to not exist, and this method returns null.\n\t *\n\t * This may return null even if the uniform is defined in GLSL:\n\t * if it is _inactive_ (i.e. not used in the program) then it may\n\t * be optimized out.\n\t *\n\t * @method  getUniformInfo\n\t * @param  {String} name the uniform name as defined in GLSL\n\t * @return {Object} an object containing location, size, and type\n\t */\n\tgetUniformInfo: function(name) {\n\t\treturn this.uniformCache[name] || null; \n\t},\n\n\t/**\n\t * Returns the cached attribute info (size, type, location).\n\t * If the attribute is not found in the cache, it is assumed\n\t * to not exist, and this method returns null.\n\t *\n\t * This may return null even if the attribute is defined in GLSL:\n\t * if it is _inactive_ (i.e. not used in the program or disabled) \n\t * then it may be optimized out.\n\t *\n\t * @method  getAttributeInfo\n\t * @param  {String} name the attribute name as defined in GLSL\n\t * @return {object} an object containing location, size and type\n\t */\n\tgetAttributeInfo: function(name) {\n\t\treturn this.attributeCache[name] || null; \n\t},\n\n\n\t/**\n\t * Returns the cached uniform location object.\n\t * If the uniform is not found, this method returns null.\n\t *\n\t * @method  getAttributeLocation\n\t * @param  {String} name the uniform name as defined in GLSL\n\t * @return {GLint} the location object\n\t */\n\tgetAttributeLocation: function(name) { //TODO: make faster, don't cache\n\t\tvar info = this.getAttributeInfo(name);\n\t\treturn info ? info.location : null;\n\t},\n\n\t/**\n\t * Returns the cached uniform location object, assuming it exists\n\t * and is active. Note that uniforms may be inactive if \n\t * the GLSL compiler deemed them unused.\n\t *\n\t * @method  getUniformLocation\n\t * @param  {String} name the uniform name as defined in GLSL\n\t * @return {WebGLUniformLocation} the location object\n\t */\n\tgetUniformLocation: function(name) {\n\t\tvar info = this.getUniformInfo(name);\n\t\treturn info ? info.location : null;\n\t},\n\n\t/**\n\t * Returns true if the uniform is active and found in this\n\t * compiled program. Note that uniforms may be inactive if \n\t * the GLSL compiler deemed them unused.\n\t *\n\t * @method  hasUniform\n\t * @param  {String}  name the uniform name\n\t * @return {Boolean} true if the uniform is found and active\n\t */\n\thasUniform: function(name) {\n\t\treturn this.getUniformInfo(name) !== null;\n\t},\n\n\t/**\n\t * Returns true if the attribute is active and found in this\n\t * compiled program.\n\t *\n\t * @method  hasAttribute\n\t * @param  {String}  name the attribute name\n\t * @return {Boolean} true if the attribute is found and active\n\t */\n\thasAttribute: function(name) {\n\t\treturn this.getAttributeInfo(name) !== null;\n\t},\n\n\t/**\n\t * Returns the uniform value by name.\n\t *\n\t * @method  getUniform\n\t * @param  {String} name the uniform name as defined in GLSL\n\t * @return {any} The value of the WebGL uniform\n\t */\n\tgetUniform: function(name) {\n\t\treturn this.gl.getUniform(this.program, this.getUniformLocation(name));\n\t},\n\n\t/**\n\t * Returns the uniform value at the specified WebGLUniformLocation.\n\t *\n\t * @method  getUniformAt\n\t * @param  {WebGLUniformLocation} location the location object\n\t * @return {any} The value of the WebGL uniform\n\t */\n\tgetUniformAt: function(location) {\n\t\treturn this.gl.getUniform(this.program, location);\n\t},\n\n\t/**\n\t * A convenience method to set uniformi from the given arguments.\n\t * We determine which GL call to make based on the number of arguments\n\t * passed. For example, `setUniformi(\"var\", 0, 1)` maps to `gl.uniform2i`.\n\t * \n\t * @method  setUniformi\n\t * @param {String} name        \t\tthe name of the uniform\n\t * @param {GLint} x  the x component for ints\n\t * @param {GLint} y  the y component for ivec2\n\t * @param {GLint} z  the z component for ivec3\n\t * @param {GLint} w  the w component for ivec4\n\t */\n\tsetUniformi: function(name, x, y, z, w) {\n\t\t'use strict';\n\t\tvar gl = this.gl;\n\t\tvar loc = this.getUniformLocation(name);\n\t\tif (loc === null)\n\t\t\treturn false;\n\t\tswitch (arguments.length) {\n\t\t\tcase 2: gl.uniform1i(loc, x); return true;\n\t\t\tcase 3: gl.uniform2i(loc, x, y); return true;\n\t\t\tcase 4: gl.uniform3i(loc, x, y, z); return true;\n\t\t\tcase 5: gl.uniform4i(loc, x, y, z, w); return true;\n\t\t\tdefault:\n\t\t\t\tthrow \"invalid arguments to setUniformi\"; \n\t\t}\n\t},\n\n\t/**\n\t * A convenience method to set uniformf from the given arguments.\n\t * We determine which GL call to make based on the number of arguments\n\t * passed. For example, `setUniformf(\"var\", 0, 1)` maps to `gl.uniform2f`.\n\t * \n\t * @method  setUniformf\n\t * @param {String} name        \t\tthe name of the uniform\n\t * @param {GLfloat} x  the x component for floats\n\t * @param {GLfloat} y  the y component for vec2\n\t * @param {GLfloat} z  the z component for vec3\n\t * @param {GLfloat} w  the w component for vec4\n\t */\n\tsetUniformf: function(name, x, y, z, w) {\n\t\t'use strict';\n\t\tvar gl = this.gl;\n\t\tvar loc = this.getUniformLocation(name);\n\t\tif (loc === null)\n\t\t\treturn false;\n\t\tswitch (arguments.length) {\n\t\t\tcase 2: gl.uniform1f(loc, x); return true;\n\t\t\tcase 3: gl.uniform2f(loc, x, y); return true;\n\t\t\tcase 4: gl.uniform3f(loc, x, y, z); return true;\n\t\t\tcase 5: gl.uniform4f(loc, x, y, z, w); return true;\n\t\t\tdefault:\n\t\t\t\tthrow \"invalid arguments to setUniformf\"; \n\t\t}\n\t},\n\n\t//I guess we won't support sequence<GLfloat> .. whatever that is ??\n\t\n\n\t///// \n\t\n\t/**\n\t * A convenience method to set uniformNfv from the given ArrayBuffer.\n\t * We determine which GL call to make based on the length of the array \n\t * buffer (for 1-4 component vectors stored in a Float32Array). To use\n\t * this method to upload data to uniform arrays, you need to specify the\n\t * 'count' parameter; i.e. the data type you are using for that array. If\n\t * specified, this will dictate whether to call uniform1fv, uniform2fv, etc.\n\t *\n\t * @method  setUniformfv\n\t * @param {String} name        \t\tthe name of the uniform\n\t * @param {ArrayBuffer} arrayBuffer the array buffer\n\t * @param {Number} count            optional, the explicit data type count, e.g. 2 for vec2\n\t */\n\tsetUniformfv: function(name, arrayBuffer, count) {\n\t\t'use strict';\n\t\tcount = count || arrayBuffer.length;\n\t\tvar gl = this.gl;\n\t\tvar loc = this.getUniformLocation(name);\n\t\tif (loc === null)\n\t\t\treturn false;\n\t\tswitch (count) {\n\t\t\tcase 1: gl.uniform1fv(loc, arrayBuffer); return true;\n\t\t\tcase 2: gl.uniform2fv(loc, arrayBuffer); return true;\n\t\t\tcase 3: gl.uniform3fv(loc, arrayBuffer); return true;\n\t\t\tcase 4: gl.uniform4fv(loc, arrayBuffer); return true;\n\t\t\tdefault:\n\t\t\t\tthrow \"invalid arguments to setUniformf\"; \n\t\t}\n\t},\n\n\t/**\n\t * A convenience method to set uniformNiv from the given ArrayBuffer.\n\t * We determine which GL call to make based on the length of the array \n\t * buffer (for 1-4 component vectors stored in a int array). To use\n\t * this method to upload data to uniform arrays, you need to specify the\n\t * 'count' parameter; i.e. the data type you are using for that array. If\n\t * specified, this will dictate whether to call uniform1fv, uniform2fv, etc.\n\t *\n\t * @method  setUniformiv\n\t * @param {String} name        \t\tthe name of the uniform\n\t * @param {ArrayBuffer} arrayBuffer the array buffer\n\t * @param {Number} count            optional, the explicit data type count, e.g. 2 for ivec2\n\t */\n\tsetUniformiv: function(name, arrayBuffer, count) {\n\t\t'use strict';\n\t\tcount = count || arrayBuffer.length;\n\t\tvar gl = this.gl;\n\t\tvar loc = this.getUniformLocation(name);\n\t\tif (loc === null)\n\t\t\treturn false;\n\t\tswitch (count) {\n\t\t\tcase 1: gl.uniform1iv(loc, arrayBuffer); return true;\n\t\t\tcase 2: gl.uniform2iv(loc, arrayBuffer); return true;\n\t\t\tcase 3: gl.uniform3iv(loc, arrayBuffer); return true;\n\t\t\tcase 4: gl.uniform4iv(loc, arrayBuffer); return true;\n\t\t\tdefault:\n\t\t\t\tthrow \"invalid arguments to setUniformf\"; \n\t\t}\n\t},\n\n\t/**\n\t * This is a convenience function to pass a Matrix3 (from vecmath,\n\t * kami's preferred math library) or a Float32Array (e.g. gl-matrix)\n\t * to a shader. If mat is an object with \"val\", it is considered to be\n\t * a Matrix3, otherwise assumed to be a typed array being passed directly\n\t * to the shader.\n\t * \n\t * @param {String} name the uniform name\n\t * @param {Matrix3|Float32Array} mat a Matrix3 or Float32Array\n\t * @param {Boolean} transpose whether to transpose the matrix, default false\n\t */\n\tsetUniformMatrix3: function(name, mat, transpose) {\n\t\t'use strict';\n\t\tvar arr = typeof mat === \"object\" && mat.val ? mat.val : mat;\n\t\ttranspose = !!transpose; //to boolean\n\n\t\tvar gl = this.gl;\n\t\tvar loc = this.getUniformLocation(name);\n\t\tif (loc === null)\n\t\t\treturn false;\n\t\tgl.uniformMatrix3fv(loc, transpose, arr)\n\t},\n\n\t/**\n\t * This is a convenience function to pass a Matrix4 (from vecmath,\n\t * kami's preferred math library) or a Float32Array (e.g. gl-matrix)\n\t * to a shader. If mat is an object with \"val\", it is considered to be\n\t * a Matrix4, otherwise assumed to be a typed array being passed directly\n\t * to the shader.\n\t * \n\t * @param {String} name the uniform name\n\t * @param {Matrix4|Float32Array} mat a Matrix4 or Float32Array\n\t * @param {Boolean} transpose whether to transpose the matrix, default false\n\t */\n\tsetUniformMatrix4: function(name, mat, transpose) {\n\t\t'use strict';\n\t\tvar arr = typeof mat === \"object\" && mat.val ? mat.val : mat;\n\t\ttranspose = !!transpose; //to boolean\n\n\t\tvar gl = this.gl;\n\t\tvar loc = this.getUniformLocation(name);\n\t\tif (loc === null)\n\t\t\treturn false;\n\t\tgl.uniformMatrix4fv(loc, transpose, arr)\n\t} \n \n});\n\n//Some default attribute names that parts of kami will use\n//when creating a standard shader.\nShaderProgram.POSITION_ATTRIBUTE = \"Position\";\nShaderProgram.NORMAL_ATTRIBUTE = \"Normal\";\nShaderProgram.COLOR_ATTRIBUTE = \"Color\";\nShaderProgram.TEXCOORD_ATTRIBUTE = \"TexCoord\";\n\n/**\n * Whether to include verbose warnings during shader compilation.\n * This includes:\n *\n *   - Printing full shaders (with line numbers) when there is an error\n *   - Printing warnings even if the shader compiled successfully \n *   \n * @property {Boolean} VERBOSE_COMPILE\n */\nShaderProgram.VERBOSE_COMPILE = true;\n\nmodule.exports = ShaderProgram;","var getGL = require('webgl-context');\n\nmodule.exports = function(opts) {\n    if (!opts || (!opts.vertex || !opts.fragment))\n        throw \"must specify 'vertex' and 'fragment' source\";\n    var vertSource = (opts.vertex).trim();\n    var fragSource = (opts.fragment).trim();\n\n\n    var gl = opts.gl;\n    if (!gl) {\n        gl = getGL();\n        if (!gl)\n            throw new Error(\"WebGL not supported -- try another browser\");\n    }\n    return compile(gl, vertSource, fragSource, opts.attributeLocations, opts.verbose);\n};\n\n//Compiles the shaders, throwing an error if the program was invalid.\nfunction compile(gl, vertSource, fragSource, attribs, verbose) {\n    var log = \"\";\n\n    var vert = loadShader(gl, gl.VERTEX_SHADER, vertSource, verbose);\n    var frag = loadShader(gl, gl.FRAGMENT_SHADER, fragSource, verbose);\n\n    var vertShader = vert.shader;\n    var fragShader = frag.shader;\n\n    log += vert.log + \"\\n\" + frag.log;\n\n    var program = gl.createProgram();\n\n    gl.attachShader(program, vertShader);\n    gl.attachShader(program, fragShader);\n\n    //TODO: Chrome seems a bit buggy with attribute bindings...\n    if (attribs) {\n        for (var key in attribs) {\n            if (attribs.hasOwnProperty(key)) {\n                gl.bindAttribLocation(program, Math.floor(attribs[key]), key);\n            }\n        }\n    }\n\n    gl.linkProgram(program); \n\n    log += gl.getProgramInfoLog(program) || \"\";\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        if (verbose) {\n            console.error(\"Shader error:\\n\"+log);\n            console.error(\"Problematic shaders:\\nVERTEX_SHADER:\\n\"+addLineNumbers(vertSource)\n                    +\"\\n\\nFRAGMENT_SHADER:\\n\"+addLineNumbers(fragSource));\n        }\n        //delete before throwing error    \n        gl.detachShader(program, vertShader);\n        gl.detachShader(program, fragShader);\n        gl.deleteShader(vertShader);\n        gl.deleteShader(fragShader);\n        \n        throw new Error(\"Error linking the shader program:\\n\" + log);\n\n    }\n    return {\n        program: program,\n        vertex: vertShader,\n        fragment: fragShader,\n        log: log.trim()\n    };\n}\n\nfunction loadShader(gl, type, source, verbose) {\n    var shader = gl.createShader(type);\n    if (!shader) //should not occur...\n        return -1;\n\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n\n    //we do this so the user knows which shader has the error\n    var typeStr = (type === gl.VERTEX_SHADER) ? \"vertex\" : \"fragment\";\n\n    var logResult = gl.getShaderInfoLog(shader) || \"\";\n    \n\n    //Chrome will just print \"Uncaught error object\" if the Error.message \n    //is longer than 250 chars... WTF!\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS) ) {\n        if (verbose) {\n            console.error(\"Shader error:\\n\"+logResult);\n            console.error( \"Problematic \"+typeStr+\" shader:\\n\" + addLineNumbers(source) );\n        }\n        throw new Error(\"Could not compile \"+typeStr+\" shader:\\n\"+logResult);\n    }\n    if (!shader)\n        throw new Error(\"gl.createShader returned 0 for \"+typeStr+\" shader.\\n\"+logResult);\n    return {\n        shader: shader,\n        log: logResult\n    };\n}\n\nfunction addLineNumbers( string ) {\n    var lines = string.split( '\\n' );\n    for ( var i = 0; i < lines.length; i ++ ) {\n        lines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n    }\n    return lines.join( '\\n' );\n}","module.exports = function(opts) {\n    opts = opts||{};\n    var canvas = opts.canvas || document.createElement(\"canvas\");\n    if (typeof opts.width === \"number\")\n        canvas.width = opts.width;\n    if (typeof opts.height === \"number\")\n        canvas.height = opts.height;\n    \n    var attribs = (opts.attributes || opts.attribs || {});\n    try {\n        gl = (canvas.getContext('webgl', attribs) || canvas.getContext('experimental-webgl', attribs));\n    } catch (e) {\n        gl = null;\n    }\n    return gl;\n};","/**\n * An abstract batcher for dynamic geometry. This handles\n * the basics, like setting blend functions, color, and so forth.\n * \n * @module kami-base-batch\n */\n\nvar Class = require('klasse');\nvar Mesh = require('kami-mesh-buffer');\nvar BaseObject = require('kami-util').BaseObject;\n\nvar colorToFloat = require('number-util').colorToFloat;\n\nvar BaseMixins = require('./mixins');\n\n/** \n * A batcher, typically used for quads (2 tris, indexed), but may\n * also be used for other dynamic types of geometry. This is generally\n * not static; the vertex buffers are using DYNAMIC_DRAW for performance.\n * \n * This is used internally; users should look at \n * {{#crossLink \"SpriteBatch\"}}{{/crossLink}} instead, which inherits from this\n * class. \n * \n * The batcher itself is not managed by WebGLContext; however, it makes\n * use of Mesh and Texture which will be managed. For this reason, the batcher\n * does not hold a direct reference to the GL state.\n *\n * Subclasses must implement the following:  \n * {{#crossLink \"BaseBatch/_createShader:method\"}}{{/crossLink}}  \n * {{#crossLink \"BaseBatch/_createVertexAttributes:method\"}}{{/crossLink}}  \n * {{#crossLink \"BaseBatch/getVertexSize:method\"}}{{/crossLink}}  \n * \n * @class BaseBatch\n * @protected\n * @abstract\n * \n * @constructor\n * @param {WebGLContext} context the context this batcher belongs to\n * @param {Object} options the options\n * @param {Number} options.size the optional size of this batch, i.e. max number of quads\n * @default  500\n */\nvar BaseBatch = new Class({\n\n\tMixins: BaseMixins,\n\n\t//Constructor\n\tinitialize: function BaseBatch(context, options) {\n\t\tBaseObject.call(this, context);\n\t\toptions = options||{};\n\n\t\tvar shader = this._createShader();\n\t\t\n\t\tthis.idx = 0;\n\n\t\tthis.mesh = this._createMesh(options.size);\n\n\t\t//set up the properties for our base batch...\n\t\tBaseMixins.call(this, this.context.gl, shader);\n\t},\n\n\t/**\n\t * Called from the constructor to create a new Mesh \n\t * based on the expected batch size. Should set up\n\t * verts & indices properly.\n\t *\n\t * Users should not call this directly; instead, it\n\t * should only be implemented by subclasses.\n\t * \n\t * @method _createMesh\n\t * @param {Number} size the size passed through the constructor\n\t */\n\t_createMesh: function(size) {\n\t\tsize = size||500;\n\t\t// 65535 is max index, so 65535 / 6 = 10922.\n\t\tif (size > 10922)\n\t\t\tthrow \"Can't have more than 10922 sprites per batch: \" + size;\n\t\t\n\t\t//the total number of floats in our batch\n\t\tvar numVerts = size * 4 * this.getVertexSize();\n\t\t//the total number of indices in our batch\n\t\tvar numIndices = size * 6;\n\t\tvar gl = this.context.gl;\n\n\t\t//vertex data\n\t\tthis.vertices = new Float32Array(numVerts);\n\t\t//index data\n\t\tthis.indices = new Uint16Array(numIndices); \n\t\t\n\t\tfor (var i=0, j=0; i < numIndices; i += 6, j += 4) \n\t\t{\n\t\t\tthis.indices[i + 0] = j + 0; \n\t\t\tthis.indices[i + 1] = j + 1;\n\t\t\tthis.indices[i + 2] = j + 2;\n\t\t\tthis.indices[i + 3] = j + 0;\n\t\t\tthis.indices[i + 4] = j + 2;\n\t\t\tthis.indices[i + 5] = j + 3;\n\t\t}\n\n\t\tvar mesh = new Mesh(this.context, false, \n\t\t\t\t\t\tnumVerts, numIndices, this._createVertexAttributes());\n\t\tmesh.vertices = this.vertices;\n\t\tmesh.indices = this.indices;\n\t\tmesh.vertexUsage = gl.DYNAMIC_DRAW;\n\t\tmesh.indexUsage = gl.STATIC_DRAW;\n\t\tmesh.dirty = true;\n\t\treturn mesh;\n\t},\n\n\t/**\n\t * Returns a shader for this batch. If you plan to support\n\t * multiple instances of your batch, it may or may not be wise\n\t * to use a shared shader to save resources.\n\t * \n\t * This method initially throws an error; so it must be overridden by\n\t * subclasses of BaseBatch.\n\t *\n\t * @method  _createShader\n\t * @return {Number} the size of a vertex, in # of floats\n\t */\n\t_createShader: function() {\n\t\tthrow \"_createShader not implemented\"\n\t},\t\n\n\t/**\n\t * Returns an array of vertex attributes for this mesh; \n\t * subclasses should implement this with the attributes \n\t * expected for their batch.\n\t *\n\t * This method initially throws an error; so it must be overridden by\n\t * subclasses of BaseBatch.\n\t *\n\t * @method _createVertexAttributes\n\t * @return {Array} an array of Mesh.VertexAttrib objects\n\t */\n\t_createVertexAttributes: function() {\n\t\tthrow \"_createVertexAttributes not implemented\";\n\t},\n\n\n\t/**\n\t * Returns the number of floats per vertex for this batcher.\n\t * \n\t * This method initially throws an error; so it must be overridden by\n\t * subclasses of BaseBatch.\n\t *\n\t * @method  getVertexSize\n\t * @return {Number} the size of a vertex, in # of floats\n\t */\n\tgetVertexSize: function() {\n\t\tthrow \"getVertexSize not implemented\";\n\t},\n\n\t\n\t/** \n\t * Begins the sprite batch. This will bind the shader\n\t * and mesh. Subclasses may want to disable depth or \n\t * set up blending.\n\t *\n\t * @method  begin\n\t */\n\tbegin: function()  {\n\t\tif (this.drawing) \n\t\t\tthrow \"batch.end() must be called before begin\";\n\t\tthis.drawing = true;\n\n\t\tthis.shader.bind();\n\n\t\t//bind the attributes now to avoid redundant calls\n\t\tthis.mesh.bind(this.shader);\n\n\t\tif (this._blendingEnabled) {\n\t\t\tvar gl = this.context.gl;\n\t\t\tgl.enable(gl.BLEND);\n\t\t}\n\t},\n\n\t/** \n\t * Ends the sprite batch. This will flush any remaining \n\t * data and set GL state back to normal.\n\t * \n\t * @method  end\n\t */\n\tend: function()  {\n\t\tif (!this.drawing)\n\t\t\tthrow \"batch.begin() must be called before end\";\n\t\tif (this.idx > 0)\n\t\t\tthis.flush();\n\t\tthis.drawing = false;\n\n\t\tthis.mesh.unbind(this.shader);\n\n\t\tif (this._blendingEnabled) {\n\t\t\tvar gl = this.context.gl;\n\t\t\tgl.disable(gl.BLEND);\n\t\t}\n\t},\n\n\t/** \n\t * Called before rendering to bind new textures.\n\t * This method does nothing by default.\n\t *\n\t * @method  _preRender\n\t */\n\t_preRender: function()  {\n\t},\n\n\t/**\n\t * Flushes the batch by pushing the current data\n\t * to GL.\n\t * \n\t * @method flush\n\t */\n\tflush: function()  {\n\t\tif (this.idx===0)\n\t\t\treturn;\n\n\t\tvar gl = this.context.gl;\n\n\t\t//premultiplied alpha\n\t\tif (this._blendingEnabled) {\n\t\t\t//set either to null if you want to call your own \n\t\t\t//blendFunc or blendFuncSeparate\n\t\t\tif (this._blendSrc && this._blendDst)\n\t\t\t\tgl.blendFunc(this._blendSrc, this._blendDst); \n\t\t}\n\n\t\tthis._preRender();\n\n\t\t//number of sprites in batch\n\t\tvar numComponents = this.getVertexSize();\n\t\tvar spriteCount = (this.idx / (numComponents * 4));\n\t\t\n\t\t//draw the sprites\n\t\tthis.mesh.verticesDirty = true;\n\t\tthis.mesh.draw(gl.TRIANGLES, spriteCount * 6, 0, this.idx);\n\n\t\tthis.idx = 0;\n\t},\n\n\t/**\n\t * Destroys the batch, deleting its buffers and removing it from the\n\t * WebGLContext management. Trying to use this\n\t * batch after destroying it can lead to unpredictable behaviour.\n\t *\n\t * If `ownsShader` is true, this will also delete the `defaultShader` object.\n\t * \n\t * @method destroy\n\t */\n\tdestroy: function() {\n\t\tthis.vertices = null;\n\t\tthis.indices = null;\n\t\tthis.maxVertices = 0;\n\n\t\tif (this.ownsShader && this.defaultShader)\n\t\t\tthis.defaultShader.destroy();\n\t\tthis.defaultShader = null;\n\t\tthis._shader = null; // remove reference to whatever shader is currently being used\n\n\t\tif (this.mesh) \n\t\t\tthis.mesh.destroy();\n\t\tthis.mesh = null;\n\t}\n});\n\nmodule.exports = BaseBatch;\n","var colorToFloat = require('number-util').colorToFloat;\nvar Class = require('klasse');\n\nmodule.exports = new Class({\n\n\tinitialize: \n\tfunction BaseBatchMixins(gl, shader) {\n\t\tthis._blendSrc = gl.ONE;\n\t\tthis._blendDst = gl.ONE_MINUS_SRC_ALPHA;\n\t\tthis._blendingEnabled = true;\n\t\tthis._shader = shader;\n\n\t\t/**\n\t\t * This shader will be used whenever \"null\" is passed\n\t\t * as the batch's shader. \n\t\t *\n\t\t * @property {ShaderProgram} shader\n\t\t */\n\t\tthis.defaultShader = this._shader;\n\n\t\t/**\n\t\t * By default, a SpriteBatch is created with its own ShaderProgram,\n\t\t * stored in `defaultShader`. If this flag is true, on deleting the SpriteBatch, its\n\t\t * `defaultShader` will also be deleted. If this flag is false, no shaders\n\t\t * will be deleted on destroy.\n\t\t *\n\t\t * Note that if you re-assign `defaultShader`, you will need to dispose the previous\n\t\t * default shader yoursel. \n\t\t *\n\t\t * @property ownsShader\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis.ownsShader = true;\n\n\t\t/**\n\t\t * Whether we are currently drawing to the batch. Do not modify.\n\t\t * \n\t\t * @property {Boolean} drawing\n\t\t */\n\t\tthis.drawing = false;\n\n\t\t/**\n\t\t * The ABGR packed color, as a single float. The default\n\t\t * value is the color white (255, 255, 255, 255).\n\t\t *\n\t\t * @property {Number} color\n\t\t * @readOnly \n\t\t */\n\t\tthis.color = colorToFloat(255, 255, 255, 255);\n\t\t\n\t\t/**\n\t\t * Whether to premultiply alpha on calls to setColor. \n\t\t * This is true by default, so that we can conveniently write:\n\t\t *\n\t\t *     batch.setColor(1, 0, 0, 0.25); //tints red with 25% opacity\n\t\t *\n\t\t * If false, you must premultiply the colors yourself to achieve\n\t\t * the same tint, like so:\n\t\t *\n\t\t *     batch.setColor(0.25, 0, 0, 0.25);\n\t\t * \n\t\t * @property premultiplied\n\t\t * @type {Boolean}\n\t\t * @default  true\n\t\t */\n\t\tthis.premultiplied = true;\n\t},\n\n\t/**\n\t * A property to enable or disable blending for this sprite batch. If\n\t * we are currently drawing, this will first flush the batch, and then\n\t * update GL_BLEND state (enabled or disabled) with our new value.\n\t * \n\t * @property {Boolean} blendingEnabled\n\t */\n\tblendingEnabled: {\n\t\tset: function(val) {\n\t\t\tvar old = this._blendingEnabled;\n\t\t\tif (this.drawing)\n\t\t\t\tthis.flush();\n\n\t\t\tthis._blendingEnabled = val;\n\n\t\t\t//if we have a new value, update it.\n\t\t\t//this is because blend is done in begin() / end() \n\t\t\tif (this.drawing && old != val) {\n\t\t\t\tvar gl = this.context.gl;\n\t\t\t\tif (val)\n\t\t\t\t\tgl.enable(gl.BLEND);\n\t\t\t\telse\n\t\t\t\t\tgl.disable(gl.BLEND);\n\t\t\t}\n\n\t\t},\n\n\t\tget: function() {\n\t\t\treturn this._blendingEnabled;\n\t\t}\n\t},\n\n\t/**\n\t * Sets the blend source parameters. \n\t * If we are currently drawing, this will flush the batch.\n\t *\n\t * Setting either src or dst to `null` or a falsy value tells the SpriteBatch\n\t * to ignore gl.blendFunc. This is useful if you wish to use your\n\t * own blendFunc or blendFuncSeparate. \n\t * \n\t * @property {GLenum} blendDst \n\t */\n\tblendSrc: {\n\t\tset: function(val) {\n\t\t\tif (this.drawing)\n\t\t\t\tthis.flush();\n\t\t\tthis._blendSrc = val;\n\t\t},\n\n\t\tget: function() {\n\t\t\treturn this._blendSrc;\n\t\t}\n\t},\n\n\t/**\n\t * Sets the blend destination parameters. \n\t * If we are currently drawing, this will flush the batch.\n\t *\n\t * Setting either src or dst to `null` or a falsy value tells the SpriteBatch\n\t * to ignore gl.blendFunc. This is useful if you wish to use your\n\t * own blendFunc or blendFuncSeparate. \n\t *\n\t * @property {GLenum} blendSrc \n\t */\n\tblendDst: {\n\t\tset: function(val) {\n\t\t\tif (this.drawing)\n\t\t\t\tthis.flush();\n\t\t\tthis._blendDst = val;\n\t\t},\n\n\t\tget: function() {\n\t\t\treturn this._blendDst;\n\t\t}\n\t},\n\n\t/**\n\t * Sets the blend source and destination parameters. This is \n\t * a convenience function for the blendSrc and blendDst setters.\n\t * If we are currently drawing, this will flush the batch.\n\t *\n\t * Setting either to `null` or a falsy value tells the SpriteBatch\n\t * to ignore gl.blendFunc. This is useful if you wish to use your\n\t * own blendFunc or blendFuncSeparate. \n\t *\n\t * @method  setBlendFunction\n\t * @param {GLenum} blendSrc the source blend parameter\n\t * @param {GLenum} blendDst the destination blend parameter\n\t */\n\tsetBlendFunction: function(blendSrc, blendDst) {\n\t\tthis.blendSrc = blendSrc;\n\t\tthis.blendDst = blendDst;\n\t},\n\n\t/**\n\t * This is a setter/getter for this batch's current ShaderProgram.\n\t * If this is set when the batch is drawing, the state will be flushed\n\t * to the GPU and the new shader will then be bound.\n\t *\n\t * If `null` or a falsy value is specified, the batch's `defaultShader` will be used. \n\t *\n\t * Note that shaders are bound on batch.begin().\n\t *\n\t * @property shader\n\t * @type {ShaderProgram}\n\t */\n\tshader: {\n\t\tset: function(val) {\n\t\t\tvar wasDrawing = this.drawing;\n\n\t\t\tif (wasDrawing) {\n\t\t\t\tthis.end(); //unbinds the shader from the mesh\n\t\t\t}\n\n\t\t\tthis._shader = val ? val : this.defaultShader;\n\n\t\t\tif (wasDrawing) {\n\t\t\t\tthis.begin();\n\t\t\t}\n\t\t},\n\n\t\tget: function() {\n\t\t\treturn this._shader;\n\t\t}\n\t},\n\n\t/**\n\t * Sets the color of this sprite batcher, which is used in subsequent draw\n\t * calls. This does not flush the batch.\n\t *\n\t * If r, g, b, are all numbers, this method assumes that RGB \n\t * or RGBA float values (0.0 to 1.0) are being passed. Alpha defaults to one\n\t * if undefined.\n\t * \n\t * If one or more of the (r, g, b) arguments are non-numbers, we only consider the first argument\n\t * and assign it to all four components -- this is useful for setting transparency \n\t * in a premultiplied alpha stage.\n\t * \n\t * If the first argument is invalid or not a number,\n\t * the color defaults to (1, 1, 1, 1).\n\t *\n\t * @method  setColor\n\t * @param {Number} r the red component, normalized\n\t * @param {Number} g the green component, normalized\n\t * @param {Number} b the blue component, normalized\n\t * @param {Number} a the alpha component, normalized\n\t */\n\tsetColor: function(r, g, b, a) {\n\t\tvar rnum = typeof r === \"number\";\n\t\tif (rnum\n\t\t\t\t&& typeof g === \"number\"\n\t\t\t\t&& typeof b === \"number\") {\n\t\t\t//default alpha to one \n\t\t\ta = typeof a === \"number\" ? a : 1.0;\n\t\t} else {\n\t\t\tr = g = b = a = rnum ? r : 1.0;\n\t\t}\n\t\t\n\t\tif (this.premultiplied) {\n\t\t\tr *= a;\n\t\t\tg *= a;\n\t\t\tb *= a;\n\t\t}\n\t\t\n\t\tthis.color = colorToFloat(\n\t\t\t~~(r * 255),\n\t\t\t~~(g * 255),\n\t\t\t~~(b * 255),\n\t\t\t~~(a * 255)\n\t\t);\n\t},\n});","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\r\n\r\n// Configuration Constants\r\nexport var EPSILON = 0.000001;\r\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\r\nexport var RANDOM = Math.random;\r\n\r\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\r\nexport function setMatrixArrayType(type) {\r\n  ARRAY_TYPE = type;\r\n}\r\n\r\nvar degree = Math.PI / 180;\r\n\r\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\r\nexport function toRadian(a) {\r\n  return a * degree;\r\n}\r\n\r\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\r\n}","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 2x2 Matrix\r\n * @module mat2\r\n */\r\n\r\n/**\r\n * Creates a new identity mat2\r\n *\r\n * @returns {mat2} a new 2x2 matrix\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat2 initialized with values from an existing matrix\r\n *\r\n * @param {mat2} a matrix to clone\r\n * @returns {mat2} a new 2x2 matrix\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat2 to another\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat2 to the identity matrix\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @returns {mat2} out\r\n */\r\nexport function identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat2 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out A new 2x2 matrix\r\n */\r\nexport function fromValues(m00, m01, m10, m11) {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m10;\r\n  out[3] = m11;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat2 to the given values\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out\r\n */\r\nexport function set(out, m00, m01, m10, m11) {\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m10;\r\n  out[3] = m11;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\nexport function transpose(out, a) {\r\n  // If we are transposing ourselves we can skip a few steps but have to cache\r\n  // some values\r\n  if (out === a) {\r\n    var a1 = a[1];\r\n    out[1] = a[2];\r\n    out[2] = a1;\r\n  } else {\r\n    out[0] = a[0];\r\n    out[1] = a[2];\r\n    out[2] = a[1];\r\n    out[3] = a[3];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\nexport function invert(out, a) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n\r\n  // Calculate the determinant\r\n  var det = a0 * a3 - a2 * a1;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = a3 * det;\r\n  out[1] = -a1 * det;\r\n  out[2] = -a2 * det;\r\n  out[3] = a0 * det;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\nexport function adjoint(out, a) {\r\n  // Caching this value is nessecary if out == a\r\n  var a0 = a[0];\r\n  out[0] = a[3];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = a0;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat2\r\n *\r\n * @param {mat2} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nexport function determinant(a) {\r\n  return a[0] * a[3] - a[2] * a[1];\r\n}\r\n\r\n/**\r\n * Multiplies two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  out[0] = a0 * b0 + a2 * b1;\r\n  out[1] = a1 * b0 + a3 * b1;\r\n  out[2] = a0 * b2 + a2 * b3;\r\n  out[3] = a1 * b2 + a3 * b3;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat2 by the given angle\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\r\nexport function rotate(out, a, rad) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  out[0] = a0 * c + a2 * s;\r\n  out[1] = a1 * c + a3 * s;\r\n  out[2] = a0 * -s + a2 * c;\r\n  out[3] = a1 * -s + a3 * c;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales the mat2 by the dimensions in the given vec2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat2} out\r\n **/\r\nexport function scale(out, a, v) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var v0 = v[0],\r\n      v1 = v[1];\r\n  out[0] = a0 * v0;\r\n  out[1] = a1 * v0;\r\n  out[2] = a2 * v1;\r\n  out[3] = a3 * v1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\r\nexport function fromRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = -s;\r\n  out[3] = c;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.scale(dest, dest, vec);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat2} out\r\n */\r\nexport function fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = v[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat2\r\n *\r\n * @param {mat2} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nexport function str(a) {\r\n  return 'mat2(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat2\r\n *\r\n * @param {mat2} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nexport function frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2));\r\n}\r\n\r\n/**\r\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\r\n * @param {mat2} L the lower triangular matrix\r\n * @param {mat2} D the diagonal matrix\r\n * @param {mat2} U the upper triangular matrix\r\n * @param {mat2} a the input matrix to factorize\r\n */\r\n\r\nexport function LDU(L, D, U, a) {\r\n  L[2] = a[2] / a[0];\r\n  U[0] = a[0];\r\n  U[1] = a[1];\r\n  U[3] = a[3] - L[2] * U[1];\r\n  return [L, D, U];\r\n}\r\n\r\n/**\r\n * Adds two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat2} a The first matrix.\r\n * @param {mat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat2} a The first matrix.\r\n * @param {mat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2} out\r\n */\r\nexport function multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2} out the receiving vector\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2} out\r\n */\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Alias for {@link mat2.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat2.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 2x3 Matrix\r\n * @module mat2d\r\n *\r\n * @description\r\n * A mat2d contains six elements defined as:\r\n * <pre>\r\n * [a, c, tx,\r\n *  b, d, ty]\r\n * </pre>\r\n * This is a short form for the 3x3 matrix:\r\n * <pre>\r\n * [a, c, tx,\r\n *  b, d, ty,\r\n *  0, 0, 1]\r\n * </pre>\r\n * The last row is ignored so the array is shorter and operations are faster.\r\n */\r\n\r\n/**\r\n * Creates a new identity mat2d\r\n *\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(6);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[4] = 0;\r\n    out[5] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat2d initialized with values from an existing matrix\r\n *\r\n * @param {mat2d} a matrix to clone\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(6);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat2d to another\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat2d to the identity matrix\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @returns {mat2d} out\r\n */\r\nexport function identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat2d with the given values\r\n *\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} A new mat2d\r\n */\r\nexport function fromValues(a, b, c, d, tx, ty) {\r\n  var out = new glMatrix.ARRAY_TYPE(6);\r\n  out[0] = a;\r\n  out[1] = b;\r\n  out[2] = c;\r\n  out[3] = d;\r\n  out[4] = tx;\r\n  out[5] = ty;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat2d to the given values\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} out\r\n */\r\nexport function set(out, a, b, c, d, tx, ty) {\r\n  out[0] = a;\r\n  out[1] = b;\r\n  out[2] = c;\r\n  out[3] = d;\r\n  out[4] = tx;\r\n  out[5] = ty;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat2d\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\r\nexport function invert(out, a) {\r\n  var aa = a[0],\r\n      ab = a[1],\r\n      ac = a[2],\r\n      ad = a[3];\r\n  var atx = a[4],\r\n      aty = a[5];\r\n\r\n  var det = aa * ad - ab * ac;\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = ad * det;\r\n  out[1] = -ab * det;\r\n  out[2] = -ac * det;\r\n  out[3] = aa * det;\r\n  out[4] = (ac * aty - ad * atx) * det;\r\n  out[5] = (ab * atx - aa * aty) * det;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat2d\r\n *\r\n * @param {mat2d} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nexport function determinant(a) {\r\n  return a[0] * a[3] - a[1] * a[2];\r\n}\r\n\r\n/**\r\n * Multiplies two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3],\r\n      b4 = b[4],\r\n      b5 = b[5];\r\n  out[0] = a0 * b0 + a2 * b1;\r\n  out[1] = a1 * b0 + a3 * b1;\r\n  out[2] = a0 * b2 + a2 * b3;\r\n  out[3] = a1 * b2 + a3 * b3;\r\n  out[4] = a0 * b4 + a2 * b5 + a4;\r\n  out[5] = a1 * b4 + a3 * b5 + a5;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat2d by the given angle\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\r\nexport function rotate(out, a, rad) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  out[0] = a0 * c + a2 * s;\r\n  out[1] = a1 * c + a3 * s;\r\n  out[2] = a0 * -s + a2 * c;\r\n  out[3] = a1 * -s + a3 * c;\r\n  out[4] = a4;\r\n  out[5] = a5;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to translate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat2d} out\r\n **/\r\nexport function scale(out, a, v) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var v0 = v[0],\r\n      v1 = v[1];\r\n  out[0] = a0 * v0;\r\n  out[1] = a1 * v0;\r\n  out[2] = a2 * v1;\r\n  out[3] = a3 * v1;\r\n  out[4] = a4;\r\n  out[5] = a5;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translates the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to translate\r\n * @param {vec2} v the vec2 to translate the matrix by\r\n * @returns {mat2d} out\r\n **/\r\nexport function translate(out, a, v) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var v0 = v[0],\r\n      v1 = v[1];\r\n  out[0] = a0;\r\n  out[1] = a1;\r\n  out[2] = a2;\r\n  out[3] = a3;\r\n  out[4] = a0 * v0 + a2 * v1 + a4;\r\n  out[5] = a1 * v0 + a3 * v1 + a5;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\r\nexport function fromRotation(out, rad) {\r\n  var s = Math.sin(rad),\r\n      c = Math.cos(rad);\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = -s;\r\n  out[3] = c;\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.scale(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat2d} out\r\n */\r\nexport function fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = v[1];\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.translate(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat2d} out\r\n */\r\nexport function fromTranslation(out, v) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  out[4] = v[0];\r\n  out[5] = v[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat2d\r\n *\r\n * @param {mat2d} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nexport function str(a) {\r\n  return 'mat2d(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ')';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat2d\r\n *\r\n * @param {mat2d} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nexport function frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + 1);\r\n}\r\n\r\n/**\r\n * Adds two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  out[4] = a[4] - b[4];\r\n  out[5] = a[5] - b[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2d} out\r\n */\r\nexport function multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2d} out the receiving vector\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2d} out\r\n */\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  out[4] = a[4] + b[4] * scale;\r\n  out[5] = a[5] + b[5] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat2d} a The first matrix.\r\n * @param {mat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat2d} a The first matrix.\r\n * @param {mat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3],\r\n      b4 = b[4],\r\n      b5 = b[5];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat2d.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat2d.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\r\n\r\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(9);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[5] = 0;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[4] = 1;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\r\nexport function fromMat4(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[4];\r\n  out[4] = a[5];\r\n  out[5] = a[6];\r\n  out[6] = a[8];\r\n  out[7] = a[9];\r\n  out[8] = a[10];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(9);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\r\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\r\n  var out = new glMatrix.ARRAY_TYPE(9);\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m10;\r\n  out[4] = m11;\r\n  out[5] = m12;\r\n  out[6] = m20;\r\n  out[7] = m21;\r\n  out[8] = m22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\r\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m10;\r\n  out[4] = m11;\r\n  out[5] = m12;\r\n  out[6] = m20;\r\n  out[7] = m21;\r\n  out[8] = m22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\r\nexport function identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 1;\r\n  out[5] = 0;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nexport function transpose(out, a) {\r\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\r\n  if (out === a) {\r\n    var a01 = a[1],\r\n        a02 = a[2],\r\n        a12 = a[5];\r\n    out[1] = a[3];\r\n    out[2] = a[6];\r\n    out[3] = a01;\r\n    out[5] = a[7];\r\n    out[6] = a02;\r\n    out[7] = a12;\r\n  } else {\r\n    out[0] = a[0];\r\n    out[1] = a[3];\r\n    out[2] = a[6];\r\n    out[3] = a[1];\r\n    out[4] = a[4];\r\n    out[5] = a[7];\r\n    out[6] = a[2];\r\n    out[7] = a[5];\r\n    out[8] = a[8];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nexport function invert(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  var b01 = a22 * a11 - a12 * a21;\r\n  var b11 = -a22 * a10 + a12 * a20;\r\n  var b21 = a21 * a10 - a11 * a20;\r\n\r\n  // Calculate the determinant\r\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = b01 * det;\r\n  out[1] = (-a22 * a01 + a02 * a21) * det;\r\n  out[2] = (a12 * a01 - a02 * a11) * det;\r\n  out[3] = b11 * det;\r\n  out[4] = (a22 * a00 - a02 * a20) * det;\r\n  out[5] = (-a12 * a00 + a02 * a10) * det;\r\n  out[6] = b21 * det;\r\n  out[7] = (-a21 * a00 + a01 * a20) * det;\r\n  out[8] = (a11 * a00 - a01 * a10) * det;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nexport function adjoint(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  out[0] = a11 * a22 - a12 * a21;\r\n  out[1] = a02 * a21 - a01 * a22;\r\n  out[2] = a01 * a12 - a02 * a11;\r\n  out[3] = a12 * a20 - a10 * a22;\r\n  out[4] = a00 * a22 - a02 * a20;\r\n  out[5] = a02 * a10 - a00 * a12;\r\n  out[6] = a10 * a21 - a11 * a20;\r\n  out[7] = a01 * a20 - a00 * a21;\r\n  out[8] = a00 * a11 - a01 * a10;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nexport function determinant(a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\r\n}\r\n\r\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  var b00 = b[0],\r\n      b01 = b[1],\r\n      b02 = b[2];\r\n  var b10 = b[3],\r\n      b11 = b[4],\r\n      b12 = b[5];\r\n  var b20 = b[6],\r\n      b21 = b[7],\r\n      b22 = b[8];\r\n\r\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\r\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\r\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\r\n\r\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\r\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\r\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\r\n\r\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\r\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\r\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\r\nexport function translate(out, a, v) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5],\r\n      a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8],\r\n      x = v[0],\r\n      y = v[1];\r\n\r\n  out[0] = a00;\r\n  out[1] = a01;\r\n  out[2] = a02;\r\n\r\n  out[3] = a10;\r\n  out[4] = a11;\r\n  out[5] = a12;\r\n\r\n  out[6] = x * a00 + y * a10 + a20;\r\n  out[7] = x * a01 + y * a11 + a21;\r\n  out[8] = x * a02 + y * a12 + a22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\r\nexport function rotate(out, a, rad) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5],\r\n      a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8],\r\n      s = Math.sin(rad),\r\n      c = Math.cos(rad);\r\n\r\n  out[0] = c * a00 + s * a10;\r\n  out[1] = c * a01 + s * a11;\r\n  out[2] = c * a02 + s * a12;\r\n\r\n  out[3] = c * a10 - s * a00;\r\n  out[4] = c * a11 - s * a01;\r\n  out[5] = c * a12 - s * a02;\r\n\r\n  out[6] = a20;\r\n  out[7] = a21;\r\n  out[8] = a22;\r\n  return out;\r\n};\r\n\r\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\r\nexport function scale(out, a, v) {\r\n  var x = v[0],\r\n      y = v[1];\r\n\r\n  out[0] = x * a[0];\r\n  out[1] = x * a[1];\r\n  out[2] = x * a[2];\r\n\r\n  out[3] = y * a[3];\r\n  out[4] = y * a[4];\r\n  out[5] = y * a[5];\r\n\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\r\nexport function fromTranslation(out, v) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 1;\r\n  out[5] = 0;\r\n  out[6] = v[0];\r\n  out[7] = v[1];\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\r\nexport function fromRotation(out, rad) {\r\n  var s = Math.sin(rad),\r\n      c = Math.cos(rad);\r\n\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = 0;\r\n\r\n  out[3] = -s;\r\n  out[4] = c;\r\n  out[5] = 0;\r\n\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\r\nexport function fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n\r\n  out[3] = 0;\r\n  out[4] = v[1];\r\n  out[5] = 0;\r\n\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\r\nexport function fromMat2d(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = 0;\r\n\r\n  out[3] = a[2];\r\n  out[4] = a[3];\r\n  out[5] = 0;\r\n\r\n  out[6] = a[4];\r\n  out[7] = a[5];\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\r\nexport function fromQuat(out, q) {\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var yx = y * x2;\r\n  var yy = y * y2;\r\n  var zx = z * x2;\r\n  var zy = z * y2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  out[0] = 1 - yy - zz;\r\n  out[3] = yx - wz;\r\n  out[6] = zx + wy;\r\n\r\n  out[1] = yx + wz;\r\n  out[4] = 1 - xx - zz;\r\n  out[7] = zy - wx;\r\n\r\n  out[2] = zx - wy;\r\n  out[5] = zy + wx;\r\n  out[8] = 1 - xx - yy;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\r\nexport function normalFromMat4(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  var b00 = a00 * a11 - a01 * a10;\r\n  var b01 = a00 * a12 - a02 * a10;\r\n  var b02 = a00 * a13 - a03 * a10;\r\n  var b03 = a01 * a12 - a02 * a11;\r\n  var b04 = a01 * a13 - a03 * a11;\r\n  var b05 = a02 * a13 - a03 * a12;\r\n  var b06 = a20 * a31 - a21 * a30;\r\n  var b07 = a20 * a32 - a22 * a30;\r\n  var b08 = a20 * a33 - a23 * a30;\r\n  var b09 = a21 * a32 - a22 * a31;\r\n  var b10 = a21 * a33 - a23 * a31;\r\n  var b11 = a22 * a33 - a23 * a32;\r\n\r\n  // Calculate the determinant\r\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n\r\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n\r\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\r\nexport function projection(out, width, height) {\r\n  out[0] = 2 / width;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = -2 / height;\r\n  out[5] = 0;\r\n  out[6] = -1;\r\n  out[7] = 1;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nexport function str(a) {\r\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nexport function frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\r\n}\r\n\r\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  out[6] = a[6] + b[6];\r\n  out[7] = a[7] + b[7];\r\n  out[8] = a[8] + b[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  out[4] = a[4] - b[4];\r\n  out[5] = a[5] - b[5];\r\n  out[6] = a[6] - b[6];\r\n  out[7] = a[7] - b[7];\r\n  out[8] = a[8] - b[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\r\nexport function multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  out[6] = a[6] * b;\r\n  out[7] = a[7] * b;\r\n  out[8] = a[8] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  out[4] = a[4] + b[4] * scale;\r\n  out[5] = a[5] + b[5] * scale;\r\n  out[6] = a[6] + b[6] * scale;\r\n  out[7] = a[7] + b[7] * scale;\r\n  out[8] = a[8] + b[8] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5],\r\n      a6 = a[6],\r\n      a7 = a[7],\r\n      a8 = a[8];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3],\r\n      b4 = b[4],\r\n      b5 = b[5],\r\n      b6 = b[6],\r\n      b7 = b[7],\r\n      b8 = b[8];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\r\n\r\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(16);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[5] = 1;\r\n  out[10] = 1;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(16);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  out[9] = a[9];\r\n  out[10] = a[10];\r\n  out[11] = a[11];\r\n  out[12] = a[12];\r\n  out[13] = a[13];\r\n  out[14] = a[14];\r\n  out[15] = a[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  out[9] = a[9];\r\n  out[10] = a[10];\r\n  out[11] = a[11];\r\n  out[12] = a[12];\r\n  out[13] = a[13];\r\n  out[14] = a[14];\r\n  out[15] = a[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\r\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n  var out = new glMatrix.ARRAY_TYPE(16);\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m03;\r\n  out[4] = m10;\r\n  out[5] = m11;\r\n  out[6] = m12;\r\n  out[7] = m13;\r\n  out[8] = m20;\r\n  out[9] = m21;\r\n  out[10] = m22;\r\n  out[11] = m23;\r\n  out[12] = m30;\r\n  out[13] = m31;\r\n  out[14] = m32;\r\n  out[15] = m33;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\r\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m03;\r\n  out[4] = m10;\r\n  out[5] = m11;\r\n  out[6] = m12;\r\n  out[7] = m13;\r\n  out[8] = m20;\r\n  out[9] = m21;\r\n  out[10] = m22;\r\n  out[11] = m23;\r\n  out[12] = m30;\r\n  out[13] = m31;\r\n  out[14] = m32;\r\n  out[15] = m33;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\r\nexport function identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = 1;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 1;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nexport function transpose(out, a) {\r\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\r\n  if (out === a) {\r\n    var a01 = a[1],\r\n        a02 = a[2],\r\n        a03 = a[3];\r\n    var a12 = a[6],\r\n        a13 = a[7];\r\n    var a23 = a[11];\r\n\r\n    out[1] = a[4];\r\n    out[2] = a[8];\r\n    out[3] = a[12];\r\n    out[4] = a01;\r\n    out[6] = a[9];\r\n    out[7] = a[13];\r\n    out[8] = a02;\r\n    out[9] = a12;\r\n    out[11] = a[14];\r\n    out[12] = a03;\r\n    out[13] = a13;\r\n    out[14] = a23;\r\n  } else {\r\n    out[0] = a[0];\r\n    out[1] = a[4];\r\n    out[2] = a[8];\r\n    out[3] = a[12];\r\n    out[4] = a[1];\r\n    out[5] = a[5];\r\n    out[6] = a[9];\r\n    out[7] = a[13];\r\n    out[8] = a[2];\r\n    out[9] = a[6];\r\n    out[10] = a[10];\r\n    out[11] = a[14];\r\n    out[12] = a[3];\r\n    out[13] = a[7];\r\n    out[14] = a[11];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nexport function invert(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  var b00 = a00 * a11 - a01 * a10;\r\n  var b01 = a00 * a12 - a02 * a10;\r\n  var b02 = a00 * a13 - a03 * a10;\r\n  var b03 = a01 * a12 - a02 * a11;\r\n  var b04 = a01 * a13 - a03 * a11;\r\n  var b05 = a02 * a13 - a03 * a12;\r\n  var b06 = a20 * a31 - a21 * a30;\r\n  var b07 = a20 * a32 - a22 * a30;\r\n  var b08 = a20 * a33 - a23 * a30;\r\n  var b09 = a21 * a32 - a22 * a31;\r\n  var b10 = a21 * a33 - a23 * a31;\r\n  var b11 = a22 * a33 - a23 * a32;\r\n\r\n  // Calculate the determinant\r\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\r\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\r\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\r\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\r\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\r\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\r\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nexport function adjoint(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\r\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\r\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\r\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\r\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\r\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\r\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\r\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\r\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\r\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\r\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\r\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\r\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\r\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\r\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\r\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nexport function determinant(a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  var b00 = a00 * a11 - a01 * a10;\r\n  var b01 = a00 * a12 - a02 * a10;\r\n  var b02 = a00 * a13 - a03 * a10;\r\n  var b03 = a01 * a12 - a02 * a11;\r\n  var b04 = a01 * a13 - a03 * a11;\r\n  var b05 = a02 * a13 - a03 * a12;\r\n  var b06 = a20 * a31 - a21 * a30;\r\n  var b07 = a20 * a32 - a22 * a30;\r\n  var b08 = a20 * a33 - a23 * a30;\r\n  var b09 = a21 * a32 - a22 * a31;\r\n  var b10 = a21 * a33 - a23 * a31;\r\n  var b11 = a22 * a33 - a23 * a32;\r\n\r\n  // Calculate the determinant\r\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n}\r\n\r\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  // Cache only the current line of the second matrix\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n  b0 = b[4];b1 = b[5];b2 = b[6];b3 = b[7];\r\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n  b0 = b[8];b1 = b[9];b2 = b[10];b3 = b[11];\r\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n  b0 = b[12];b1 = b[13];b2 = b[14];b3 = b[15];\r\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\r\nexport function translate(out, a, v) {\r\n  var x = v[0],\r\n      y = v[1],\r\n      z = v[2];\r\n  var a00 = void 0,\r\n      a01 = void 0,\r\n      a02 = void 0,\r\n      a03 = void 0;\r\n  var a10 = void 0,\r\n      a11 = void 0,\r\n      a12 = void 0,\r\n      a13 = void 0;\r\n  var a20 = void 0,\r\n      a21 = void 0,\r\n      a22 = void 0,\r\n      a23 = void 0;\r\n\r\n  if (a === out) {\r\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\r\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\r\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\r\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\r\n  } else {\r\n    a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\r\n    a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\r\n    a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\r\n\r\n    out[0] = a00;out[1] = a01;out[2] = a02;out[3] = a03;\r\n    out[4] = a10;out[5] = a11;out[6] = a12;out[7] = a13;\r\n    out[8] = a20;out[9] = a21;out[10] = a22;out[11] = a23;\r\n\r\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\r\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\r\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\r\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\r\nexport function scale(out, a, v) {\r\n  var x = v[0],\r\n      y = v[1],\r\n      z = v[2];\r\n\r\n  out[0] = a[0] * x;\r\n  out[1] = a[1] * x;\r\n  out[2] = a[2] * x;\r\n  out[3] = a[3] * x;\r\n  out[4] = a[4] * y;\r\n  out[5] = a[5] * y;\r\n  out[6] = a[6] * y;\r\n  out[7] = a[7] * y;\r\n  out[8] = a[8] * z;\r\n  out[9] = a[9] * z;\r\n  out[10] = a[10] * z;\r\n  out[11] = a[11] * z;\r\n  out[12] = a[12];\r\n  out[13] = a[13];\r\n  out[14] = a[14];\r\n  out[15] = a[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\nexport function rotate(out, a, rad, axis) {\r\n  var x = axis[0],\r\n      y = axis[1],\r\n      z = axis[2];\r\n  var len = Math.sqrt(x * x + y * y + z * z);\r\n  var s = void 0,\r\n      c = void 0,\r\n      t = void 0;\r\n  var a00 = void 0,\r\n      a01 = void 0,\r\n      a02 = void 0,\r\n      a03 = void 0;\r\n  var a10 = void 0,\r\n      a11 = void 0,\r\n      a12 = void 0,\r\n      a13 = void 0;\r\n  var a20 = void 0,\r\n      a21 = void 0,\r\n      a22 = void 0,\r\n      a23 = void 0;\r\n  var b00 = void 0,\r\n      b01 = void 0,\r\n      b02 = void 0;\r\n  var b10 = void 0,\r\n      b11 = void 0,\r\n      b12 = void 0;\r\n  var b20 = void 0,\r\n      b21 = void 0,\r\n      b22 = void 0;\r\n\r\n  if (len < glMatrix.EPSILON) {\r\n    return null;\r\n  }\r\n\r\n  len = 1 / len;\r\n  x *= len;\r\n  y *= len;\r\n  z *= len;\r\n\r\n  s = Math.sin(rad);\r\n  c = Math.cos(rad);\r\n  t = 1 - c;\r\n\r\n  a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\r\n  a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\r\n  a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\r\n\r\n  // Construct the elements of the rotation matrix\r\n  b00 = x * x * t + c;b01 = y * x * t + z * s;b02 = z * x * t - y * s;\r\n  b10 = x * y * t - z * s;b11 = y * y * t + c;b12 = z * y * t + x * s;\r\n  b20 = x * z * t + y * s;b21 = y * z * t - x * s;b22 = z * z * t + c;\r\n\r\n  // Perform rotation-specific matrix multiplication\r\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\r\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\r\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\r\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\r\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\r\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\r\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\r\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\r\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\r\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\r\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\r\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged last row\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function rotateX(out, a, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  var a10 = a[4];\r\n  var a11 = a[5];\r\n  var a12 = a[6];\r\n  var a13 = a[7];\r\n  var a20 = a[8];\r\n  var a21 = a[9];\r\n  var a22 = a[10];\r\n  var a23 = a[11];\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged rows\r\n    out[0] = a[0];\r\n    out[1] = a[1];\r\n    out[2] = a[2];\r\n    out[3] = a[3];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[4] = a10 * c + a20 * s;\r\n  out[5] = a11 * c + a21 * s;\r\n  out[6] = a12 * c + a22 * s;\r\n  out[7] = a13 * c + a23 * s;\r\n  out[8] = a20 * c - a10 * s;\r\n  out[9] = a21 * c - a11 * s;\r\n  out[10] = a22 * c - a12 * s;\r\n  out[11] = a23 * c - a13 * s;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function rotateY(out, a, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  var a00 = a[0];\r\n  var a01 = a[1];\r\n  var a02 = a[2];\r\n  var a03 = a[3];\r\n  var a20 = a[8];\r\n  var a21 = a[9];\r\n  var a22 = a[10];\r\n  var a23 = a[11];\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged rows\r\n    out[4] = a[4];\r\n    out[5] = a[5];\r\n    out[6] = a[6];\r\n    out[7] = a[7];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = a00 * c - a20 * s;\r\n  out[1] = a01 * c - a21 * s;\r\n  out[2] = a02 * c - a22 * s;\r\n  out[3] = a03 * c - a23 * s;\r\n  out[8] = a00 * s + a20 * c;\r\n  out[9] = a01 * s + a21 * c;\r\n  out[10] = a02 * s + a22 * c;\r\n  out[11] = a03 * s + a23 * c;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function rotateZ(out, a, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  var a00 = a[0];\r\n  var a01 = a[1];\r\n  var a02 = a[2];\r\n  var a03 = a[3];\r\n  var a10 = a[4];\r\n  var a11 = a[5];\r\n  var a12 = a[6];\r\n  var a13 = a[7];\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged last row\r\n    out[8] = a[8];\r\n    out[9] = a[9];\r\n    out[10] = a[10];\r\n    out[11] = a[11];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = a00 * c + a10 * s;\r\n  out[1] = a01 * c + a11 * s;\r\n  out[2] = a02 * c + a12 * s;\r\n  out[3] = a03 * c + a13 * s;\r\n  out[4] = a10 * c - a00 * s;\r\n  out[5] = a11 * c - a01 * s;\r\n  out[6] = a12 * c - a02 * s;\r\n  out[7] = a13 * c - a03 * s;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\nexport function fromTranslation(out, v) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = 1;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 1;\r\n  out[11] = 0;\r\n  out[12] = v[0];\r\n  out[13] = v[1];\r\n  out[14] = v[2];\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\r\nexport function fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = v[1];\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = v[2];\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\nexport function fromRotation(out, rad, axis) {\r\n  var x = axis[0],\r\n      y = axis[1],\r\n      z = axis[2];\r\n  var len = Math.sqrt(x * x + y * y + z * z);\r\n  var s = void 0,\r\n      c = void 0,\r\n      t = void 0;\r\n\r\n  if (len < glMatrix.EPSILON) {\r\n    return null;\r\n  }\r\n\r\n  len = 1 / len;\r\n  x *= len;\r\n  y *= len;\r\n  z *= len;\r\n\r\n  s = Math.sin(rad);\r\n  c = Math.cos(rad);\r\n  t = 1 - c;\r\n\r\n  // Perform rotation-specific matrix multiplication\r\n  out[0] = x * x * t + c;\r\n  out[1] = y * x * t + z * s;\r\n  out[2] = z * x * t - y * s;\r\n  out[3] = 0;\r\n  out[4] = x * y * t - z * s;\r\n  out[5] = y * y * t + c;\r\n  out[6] = z * y * t + x * s;\r\n  out[7] = 0;\r\n  out[8] = x * z * t + y * s;\r\n  out[9] = y * z * t - x * s;\r\n  out[10] = z * z * t + c;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function fromXRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = c;\r\n  out[6] = s;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = -s;\r\n  out[10] = c;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function fromYRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = c;\r\n  out[1] = 0;\r\n  out[2] = -s;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = 1;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = s;\r\n  out[9] = 0;\r\n  out[10] = c;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function fromZRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = -s;\r\n  out[5] = c;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 1;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\nexport function fromRotationTranslation(out, q, v) {\r\n  // Quaternion math\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var xy = x * y2;\r\n  var xz = x * z2;\r\n  var yy = y * y2;\r\n  var yz = y * z2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  out[0] = 1 - (yy + zz);\r\n  out[1] = xy + wz;\r\n  out[2] = xz - wy;\r\n  out[3] = 0;\r\n  out[4] = xy - wz;\r\n  out[5] = 1 - (xx + zz);\r\n  out[6] = yz + wx;\r\n  out[7] = 0;\r\n  out[8] = xz + wy;\r\n  out[9] = yz - wx;\r\n  out[10] = 1 - (xx + yy);\r\n  out[11] = 0;\r\n  out[12] = v[0];\r\n  out[13] = v[1];\r\n  out[14] = v[2];\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\r\nexport function fromQuat2(out, a) {\r\n  var translation = new glMatrix.ARRAY_TYPE(3);\r\n  var bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3],\r\n      ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7];\r\n\r\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw;\r\n  //Only scale if it makes sense\r\n  if (magnitude > 0) {\r\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\r\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\r\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\r\n  } else {\r\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\r\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\r\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\r\n  }\r\n  fromRotationTranslation(out, a, translation);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\nexport function getTranslation(out, mat) {\r\n  out[0] = mat[12];\r\n  out[1] = mat[13];\r\n  out[2] = mat[14];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\nexport function getScaling(out, mat) {\r\n  var m11 = mat[0];\r\n  var m12 = mat[1];\r\n  var m13 = mat[2];\r\n  var m21 = mat[4];\r\n  var m22 = mat[5];\r\n  var m23 = mat[6];\r\n  var m31 = mat[8];\r\n  var m32 = mat[9];\r\n  var m33 = mat[10];\r\n\r\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\r\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\r\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\r\nexport function getRotation(out, mat) {\r\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n  var trace = mat[0] + mat[5] + mat[10];\r\n  var S = 0;\r\n\r\n  if (trace > 0) {\r\n    S = Math.sqrt(trace + 1.0) * 2;\r\n    out[3] = 0.25 * S;\r\n    out[0] = (mat[6] - mat[9]) / S;\r\n    out[1] = (mat[8] - mat[2]) / S;\r\n    out[2] = (mat[1] - mat[4]) / S;\r\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\r\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\r\n    out[3] = (mat[6] - mat[9]) / S;\r\n    out[0] = 0.25 * S;\r\n    out[1] = (mat[1] + mat[4]) / S;\r\n    out[2] = (mat[8] + mat[2]) / S;\r\n  } else if (mat[5] > mat[10]) {\r\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\r\n    out[3] = (mat[8] - mat[2]) / S;\r\n    out[0] = (mat[1] + mat[4]) / S;\r\n    out[1] = 0.25 * S;\r\n    out[2] = (mat[6] + mat[9]) / S;\r\n  } else {\r\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\r\n    out[3] = (mat[1] - mat[4]) / S;\r\n    out[0] = (mat[8] + mat[2]) / S;\r\n    out[1] = (mat[6] + mat[9]) / S;\r\n    out[2] = 0.25 * S;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\r\nexport function fromRotationTranslationScale(out, q, v, s) {\r\n  // Quaternion math\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var xy = x * y2;\r\n  var xz = x * z2;\r\n  var yy = y * y2;\r\n  var yz = y * z2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n  var sx = s[0];\r\n  var sy = s[1];\r\n  var sz = s[2];\r\n\r\n  out[0] = (1 - (yy + zz)) * sx;\r\n  out[1] = (xy + wz) * sx;\r\n  out[2] = (xz - wy) * sx;\r\n  out[3] = 0;\r\n  out[4] = (xy - wz) * sy;\r\n  out[5] = (1 - (xx + zz)) * sy;\r\n  out[6] = (yz + wx) * sy;\r\n  out[7] = 0;\r\n  out[8] = (xz + wy) * sz;\r\n  out[9] = (yz - wx) * sz;\r\n  out[10] = (1 - (xx + yy)) * sz;\r\n  out[11] = 0;\r\n  out[12] = v[0];\r\n  out[13] = v[1];\r\n  out[14] = v[2];\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\r\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\r\n  // Quaternion math\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var xy = x * y2;\r\n  var xz = x * z2;\r\n  var yy = y * y2;\r\n  var yz = y * z2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  var sx = s[0];\r\n  var sy = s[1];\r\n  var sz = s[2];\r\n\r\n  var ox = o[0];\r\n  var oy = o[1];\r\n  var oz = o[2];\r\n\r\n  var out0 = (1 - (yy + zz)) * sx;\r\n  var out1 = (xy + wz) * sx;\r\n  var out2 = (xz - wy) * sx;\r\n  var out4 = (xy - wz) * sy;\r\n  var out5 = (1 - (xx + zz)) * sy;\r\n  var out6 = (yz + wx) * sy;\r\n  var out8 = (xz + wy) * sz;\r\n  var out9 = (yz - wx) * sz;\r\n  var out10 = (1 - (xx + yy)) * sz;\r\n\r\n  out[0] = out0;\r\n  out[1] = out1;\r\n  out[2] = out2;\r\n  out[3] = 0;\r\n  out[4] = out4;\r\n  out[5] = out5;\r\n  out[6] = out6;\r\n  out[7] = 0;\r\n  out[8] = out8;\r\n  out[9] = out9;\r\n  out[10] = out10;\r\n  out[11] = 0;\r\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\r\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\r\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\r\nexport function fromQuat(out, q) {\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var yx = y * x2;\r\n  var yy = y * y2;\r\n  var zx = z * x2;\r\n  var zy = z * y2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  out[0] = 1 - yy - zz;\r\n  out[1] = yx + wz;\r\n  out[2] = zx - wy;\r\n  out[3] = 0;\r\n\r\n  out[4] = yx - wz;\r\n  out[5] = 1 - xx - zz;\r\n  out[6] = zy + wx;\r\n  out[7] = 0;\r\n\r\n  out[8] = zx + wy;\r\n  out[9] = zy - wx;\r\n  out[10] = 1 - xx - yy;\r\n  out[11] = 0;\r\n\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nexport function frustum(out, left, right, bottom, top, near, far) {\r\n  var rl = 1 / (right - left);\r\n  var tb = 1 / (top - bottom);\r\n  var nf = 1 / (near - far);\r\n  out[0] = near * 2 * rl;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = near * 2 * tb;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = (right + left) * rl;\r\n  out[9] = (top + bottom) * tb;\r\n  out[10] = (far + near) * nf;\r\n  out[11] = -1;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = far * near * 2 * nf;\r\n  out[15] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\r\nexport function perspective(out, fovy, aspect, near, far) {\r\n  var f = 1.0 / Math.tan(fovy / 2),\r\n      nf = void 0;\r\n  out[0] = f / aspect;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = f;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[11] = -1;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[15] = 0;\r\n  if (far != null && far !== Infinity) {\r\n    nf = 1 / (near - far);\r\n    out[10] = (far + near) * nf;\r\n    out[14] = 2 * far * near * nf;\r\n  } else {\r\n    out[10] = -1;\r\n    out[14] = -2 * near;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\r\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\r\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\r\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\r\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\r\n  var xScale = 2.0 / (leftTan + rightTan);\r\n  var yScale = 2.0 / (upTan + downTan);\r\n\r\n  out[0] = xScale;\r\n  out[1] = 0.0;\r\n  out[2] = 0.0;\r\n  out[3] = 0.0;\r\n  out[4] = 0.0;\r\n  out[5] = yScale;\r\n  out[6] = 0.0;\r\n  out[7] = 0.0;\r\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\r\n  out[9] = (upTan - downTan) * yScale * 0.5;\r\n  out[10] = far / (near - far);\r\n  out[11] = -1.0;\r\n  out[12] = 0.0;\r\n  out[13] = 0.0;\r\n  out[14] = far * near / (near - far);\r\n  out[15] = 0.0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nexport function ortho(out, left, right, bottom, top, near, far) {\r\n  var lr = 1 / (left - right);\r\n  var bt = 1 / (bottom - top);\r\n  var nf = 1 / (near - far);\r\n  out[0] = -2 * lr;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = -2 * bt;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 2 * nf;\r\n  out[11] = 0;\r\n  out[12] = (left + right) * lr;\r\n  out[13] = (top + bottom) * bt;\r\n  out[14] = (far + near) * nf;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\r\nexport function lookAt(out, eye, center, up) {\r\n  var x0 = void 0,\r\n      x1 = void 0,\r\n      x2 = void 0,\r\n      y0 = void 0,\r\n      y1 = void 0,\r\n      y2 = void 0,\r\n      z0 = void 0,\r\n      z1 = void 0,\r\n      z2 = void 0,\r\n      len = void 0;\r\n  var eyex = eye[0];\r\n  var eyey = eye[1];\r\n  var eyez = eye[2];\r\n  var upx = up[0];\r\n  var upy = up[1];\r\n  var upz = up[2];\r\n  var centerx = center[0];\r\n  var centery = center[1];\r\n  var centerz = center[2];\r\n\r\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\r\n    return identity(out);\r\n  }\r\n\r\n  z0 = eyex - centerx;\r\n  z1 = eyey - centery;\r\n  z2 = eyez - centerz;\r\n\r\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\r\n  z0 *= len;\r\n  z1 *= len;\r\n  z2 *= len;\r\n\r\n  x0 = upy * z2 - upz * z1;\r\n  x1 = upz * z0 - upx * z2;\r\n  x2 = upx * z1 - upy * z0;\r\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\r\n  if (!len) {\r\n    x0 = 0;\r\n    x1 = 0;\r\n    x2 = 0;\r\n  } else {\r\n    len = 1 / len;\r\n    x0 *= len;\r\n    x1 *= len;\r\n    x2 *= len;\r\n  }\r\n\r\n  y0 = z1 * x2 - z2 * x1;\r\n  y1 = z2 * x0 - z0 * x2;\r\n  y2 = z0 * x1 - z1 * x0;\r\n\r\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\r\n  if (!len) {\r\n    y0 = 0;\r\n    y1 = 0;\r\n    y2 = 0;\r\n  } else {\r\n    len = 1 / len;\r\n    y0 *= len;\r\n    y1 *= len;\r\n    y2 *= len;\r\n  }\r\n\r\n  out[0] = x0;\r\n  out[1] = y0;\r\n  out[2] = z0;\r\n  out[3] = 0;\r\n  out[4] = x1;\r\n  out[5] = y1;\r\n  out[6] = z1;\r\n  out[7] = 0;\r\n  out[8] = x2;\r\n  out[9] = y2;\r\n  out[10] = z2;\r\n  out[11] = 0;\r\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\r\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\r\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\r\nexport function targetTo(out, eye, target, up) {\r\n  var eyex = eye[0],\r\n      eyey = eye[1],\r\n      eyez = eye[2],\r\n      upx = up[0],\r\n      upy = up[1],\r\n      upz = up[2];\r\n\r\n  var z0 = eyex - target[0],\r\n      z1 = eyey - target[1],\r\n      z2 = eyez - target[2];\r\n\r\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\r\n  if (len > 0) {\r\n    len = 1 / Math.sqrt(len);\r\n    z0 *= len;\r\n    z1 *= len;\r\n    z2 *= len;\r\n  }\r\n\r\n  var x0 = upy * z2 - upz * z1,\r\n      x1 = upz * z0 - upx * z2,\r\n      x2 = upx * z1 - upy * z0;\r\n\r\n  len = x0 * x0 + x1 * x1 + x2 * x2;\r\n  if (len > 0) {\r\n    len = 1 / Math.sqrt(len);\r\n    x0 *= len;\r\n    x1 *= len;\r\n    x2 *= len;\r\n  }\r\n\r\n  out[0] = x0;\r\n  out[1] = x1;\r\n  out[2] = x2;\r\n  out[3] = 0;\r\n  out[4] = z1 * x2 - z2 * x1;\r\n  out[5] = z2 * x0 - z0 * x2;\r\n  out[6] = z0 * x1 - z1 * x0;\r\n  out[7] = 0;\r\n  out[8] = z0;\r\n  out[9] = z1;\r\n  out[10] = z2;\r\n  out[11] = 0;\r\n  out[12] = eyex;\r\n  out[13] = eyey;\r\n  out[14] = eyez;\r\n  out[15] = 1;\r\n  return out;\r\n};\r\n\r\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nexport function str(a) {\r\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nexport function frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\r\n}\r\n\r\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  out[6] = a[6] + b[6];\r\n  out[7] = a[7] + b[7];\r\n  out[8] = a[8] + b[8];\r\n  out[9] = a[9] + b[9];\r\n  out[10] = a[10] + b[10];\r\n  out[11] = a[11] + b[11];\r\n  out[12] = a[12] + b[12];\r\n  out[13] = a[13] + b[13];\r\n  out[14] = a[14] + b[14];\r\n  out[15] = a[15] + b[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  out[4] = a[4] - b[4];\r\n  out[5] = a[5] - b[5];\r\n  out[6] = a[6] - b[6];\r\n  out[7] = a[7] - b[7];\r\n  out[8] = a[8] - b[8];\r\n  out[9] = a[9] - b[9];\r\n  out[10] = a[10] - b[10];\r\n  out[11] = a[11] - b[11];\r\n  out[12] = a[12] - b[12];\r\n  out[13] = a[13] - b[13];\r\n  out[14] = a[14] - b[14];\r\n  out[15] = a[15] - b[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\r\nexport function multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  out[6] = a[6] * b;\r\n  out[7] = a[7] * b;\r\n  out[8] = a[8] * b;\r\n  out[9] = a[9] * b;\r\n  out[10] = a[10] * b;\r\n  out[11] = a[11] * b;\r\n  out[12] = a[12] * b;\r\n  out[13] = a[13] * b;\r\n  out[14] = a[14] * b;\r\n  out[15] = a[15] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  out[4] = a[4] + b[4] * scale;\r\n  out[5] = a[5] + b[5] * scale;\r\n  out[6] = a[6] + b[6] * scale;\r\n  out[7] = a[7] + b[7] * scale;\r\n  out[8] = a[8] + b[8] * scale;\r\n  out[9] = a[9] + b[9] * scale;\r\n  out[10] = a[10] + b[10] * scale;\r\n  out[11] = a[11] + b[11] * scale;\r\n  out[12] = a[12] + b[12] * scale;\r\n  out[13] = a[13] + b[13] * scale;\r\n  out[14] = a[14] + b[14] * scale;\r\n  out[15] = a[15] + b[15] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var a4 = a[4],\r\n      a5 = a[5],\r\n      a6 = a[6],\r\n      a7 = a[7];\r\n  var a8 = a[8],\r\n      a9 = a[9],\r\n      a10 = a[10],\r\n      a11 = a[11];\r\n  var a12 = a[12],\r\n      a13 = a[13],\r\n      a14 = a[14],\r\n      a15 = a[15];\r\n\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  var b4 = b[4],\r\n      b5 = b[5],\r\n      b6 = b[6],\r\n      b7 = b[7];\r\n  var b8 = b[8],\r\n      b9 = b[9],\r\n      b10 = b[10],\r\n      b11 = b[11];\r\n  var b12 = b[12],\r\n      b13 = b[13],\r\n      b14 = b[14],\r\n      b15 = b[15];\r\n\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\r\n\r\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(3);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(3);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nexport function length(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  return Math.sqrt(x * x + y * y + z * z);\r\n}\r\n\r\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\r\nexport function fromValues(x, y, z) {\r\n  var out = new glMatrix.ARRAY_TYPE(3);\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\r\nexport function set(out, x, y, z) {\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  out[0] = a[0] * b[0];\r\n  out[1] = a[1] * b[1];\r\n  out[2] = a[2] * b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function divide(out, a, b) {\r\n  out[0] = a[0] / b[0];\r\n  out[1] = a[1] / b[1];\r\n  out[2] = a[2] / b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\r\nexport function ceil(out, a) {\r\n  out[0] = Math.ceil(a[0]);\r\n  out[1] = Math.ceil(a[1]);\r\n  out[2] = Math.ceil(a[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\r\nexport function floor(out, a) {\r\n  out[0] = Math.floor(a[0]);\r\n  out[1] = Math.floor(a[1]);\r\n  out[2] = Math.floor(a[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function min(out, a, b) {\r\n  out[0] = Math.min(a[0], b[0]);\r\n  out[1] = Math.min(a[1], b[1]);\r\n  out[2] = Math.min(a[2], b[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function max(out, a, b) {\r\n  out[0] = Math.max(a[0], b[0]);\r\n  out[1] = Math.max(a[1], b[1]);\r\n  out[2] = Math.max(a[2], b[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\r\nexport function round(out, a) {\r\n  out[0] = Math.round(a[0]);\r\n  out[1] = Math.round(a[1]);\r\n  out[2] = Math.round(a[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\r\nexport function scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\r\nexport function scaleAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\nexport function distance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  return Math.sqrt(x * x + y * y + z * z);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\nexport function squaredDistance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  return x * x + y * y + z * z;\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\nexport function squaredLength(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  return x * x + y * y + z * z;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\r\nexport function negate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\r\nexport function inverse(out, a) {\r\n  out[0] = 1.0 / a[0];\r\n  out[1] = 1.0 / a[1];\r\n  out[2] = 1.0 / a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\r\nexport function normalize(out, a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var len = x * x + y * y + z * z;\r\n  if (len > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len = 1 / Math.sqrt(len);\r\n    out[0] = a[0] * len;\r\n    out[1] = a[1] * len;\r\n    out[2] = a[2] * len;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\nexport function dot(a, b) {\r\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n}\r\n\r\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function cross(out, a, b) {\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2];\r\n  var bx = b[0],\r\n      by = b[1],\r\n      bz = b[2];\r\n\r\n  out[0] = ay * bz - az * by;\r\n  out[1] = az * bx - ax * bz;\r\n  out[2] = ax * by - ay * bx;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\nexport function lerp(out, a, b, t) {\r\n  var ax = a[0];\r\n  var ay = a[1];\r\n  var az = a[2];\r\n  out[0] = ax + t * (b[0] - ax);\r\n  out[1] = ay + t * (b[1] - ay);\r\n  out[2] = az + t * (b[2] - az);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\nexport function hermite(out, a, b, c, d, t) {\r\n  var factorTimes2 = t * t;\r\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\r\n  var factor2 = factorTimes2 * (t - 2) + t;\r\n  var factor3 = factorTimes2 * (t - 1);\r\n  var factor4 = factorTimes2 * (3 - 2 * t);\r\n\r\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\r\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\r\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\nexport function bezier(out, a, b, c, d, t) {\r\n  var inverseFactor = 1 - t;\r\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\r\n  var factorTimes2 = t * t;\r\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\r\n  var factor2 = 3 * t * inverseFactorTimesTwo;\r\n  var factor3 = 3 * factorTimes2 * inverseFactor;\r\n  var factor4 = factorTimes2 * t;\r\n\r\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\r\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\r\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\r\nexport function random(out, scale) {\r\n  scale = scale || 1.0;\r\n\r\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\r\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\r\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\r\n\r\n  out[0] = Math.cos(r) * zScale;\r\n  out[1] = Math.sin(r) * zScale;\r\n  out[2] = z * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\r\nexport function transformMat4(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\r\n  w = w || 1.0;\r\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\r\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\r\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\r\nexport function transformMat3(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  out[0] = x * m[0] + y * m[3] + z * m[6];\r\n  out[1] = x * m[1] + y * m[4] + z * m[7];\r\n  out[2] = x * m[2] + y * m[5] + z * m[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\r\nexport function transformQuat(out, a, q) {\r\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3];\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  // var qvec = [qx, qy, qz];\r\n  // var uv = vec3.cross([], qvec, a);\r\n  var uvx = qy * z - qz * y,\r\n      uvy = qz * x - qx * z,\r\n      uvz = qx * y - qy * x;\r\n  // var uuv = vec3.cross([], qvec, uv);\r\n  var uuvx = qy * uvz - qz * uvy,\r\n      uuvy = qz * uvx - qx * uvz,\r\n      uuvz = qx * uvy - qy * uvx;\r\n  // vec3.scale(uv, uv, 2 * w);\r\n  var w2 = qw * 2;\r\n  uvx *= w2;\r\n  uvy *= w2;\r\n  uvz *= w2;\r\n  // vec3.scale(uuv, uuv, 2);\r\n  uuvx *= 2;\r\n  uuvy *= 2;\r\n  uuvz *= 2;\r\n  // return vec3.add(out, a, vec3.add(out, uv, uuv));\r\n  out[0] = x + uvx + uuvx;\r\n  out[1] = y + uvy + uuvy;\r\n  out[2] = z + uvz + uuvz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\r\nexport function rotateX(out, a, b, c) {\r\n  var p = [],\r\n      r = [];\r\n  //Translate point to the origin\r\n  p[0] = a[0] - b[0];\r\n  p[1] = a[1] - b[1];\r\n  p[2] = a[2] - b[2];\r\n\r\n  //perform rotation\r\n  r[0] = p[0];\r\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\r\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c);\r\n\r\n  //translate to correct position\r\n  out[0] = r[0] + b[0];\r\n  out[1] = r[1] + b[1];\r\n  out[2] = r[2] + b[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\r\nexport function rotateY(out, a, b, c) {\r\n  var p = [],\r\n      r = [];\r\n  //Translate point to the origin\r\n  p[0] = a[0] - b[0];\r\n  p[1] = a[1] - b[1];\r\n  p[2] = a[2] - b[2];\r\n\r\n  //perform rotation\r\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\r\n  r[1] = p[1];\r\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c);\r\n\r\n  //translate to correct position\r\n  out[0] = r[0] + b[0];\r\n  out[1] = r[1] + b[1];\r\n  out[2] = r[2] + b[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\r\nexport function rotateZ(out, a, b, c) {\r\n  var p = [],\r\n      r = [];\r\n  //Translate point to the origin\r\n  p[0] = a[0] - b[0];\r\n  p[1] = a[1] - b[1];\r\n  p[2] = a[2] - b[2];\r\n\r\n  //perform rotation\r\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\r\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\r\n  r[2] = p[2];\r\n\r\n  //translate to correct position\r\n  out[0] = r[0] + b[0];\r\n  out[1] = r[1] + b[1];\r\n  out[2] = r[2] + b[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\r\nexport function angle(a, b) {\r\n  var tempA = fromValues(a[0], a[1], a[2]);\r\n  var tempB = fromValues(b[0], b[1], b[2]);\r\n\r\n  normalize(tempA, tempA);\r\n  normalize(tempB, tempB);\r\n\r\n  var cosine = dot(tempA, tempB);\r\n\r\n  if (cosine > 1.0) {\r\n    return 0;\r\n  } else if (cosine < -1.0) {\r\n    return Math.PI;\r\n  } else {\r\n    return Math.acos(cosine);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nexport function str(a) {\r\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;\r\n\r\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\r\nexport var div = divide;\r\n\r\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\r\nexport var dist = distance;\r\n\r\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\r\nexport var sqrDist = squaredDistance;\r\n\r\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\r\nexport var len = length;\r\n\r\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\nexport var forEach = function () {\r\n  var vec = create();\r\n\r\n  return function (a, stride, offset, count, fn, arg) {\r\n    var i = void 0,\r\n        l = void 0;\r\n    if (!stride) {\r\n      stride = 3;\r\n    }\r\n\r\n    if (!offset) {\r\n      offset = 0;\r\n    }\r\n\r\n    if (count) {\r\n      l = Math.min(count * stride + offset, a.length);\r\n    } else {\r\n      l = a.length;\r\n    }\r\n\r\n    for (i = offset; i < l; i += stride) {\r\n      vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];\r\n      fn(vec, vec, arg);\r\n      a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];\r\n    }\r\n\r\n    return a;\r\n  };\r\n}();","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\r\n\r\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\r\nexport function fromValues(x, y, z, w) {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  out[3] = w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\r\nexport function set(out, x, y, z, w) {\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  out[3] = w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  out[0] = a[0] * b[0];\r\n  out[1] = a[1] * b[1];\r\n  out[2] = a[2] * b[2];\r\n  out[3] = a[3] * b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function divide(out, a, b) {\r\n  out[0] = a[0] / b[0];\r\n  out[1] = a[1] / b[1];\r\n  out[2] = a[2] / b[2];\r\n  out[3] = a[3] / b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\r\nexport function ceil(out, a) {\r\n  out[0] = Math.ceil(a[0]);\r\n  out[1] = Math.ceil(a[1]);\r\n  out[2] = Math.ceil(a[2]);\r\n  out[3] = Math.ceil(a[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\r\nexport function floor(out, a) {\r\n  out[0] = Math.floor(a[0]);\r\n  out[1] = Math.floor(a[1]);\r\n  out[2] = Math.floor(a[2]);\r\n  out[3] = Math.floor(a[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function min(out, a, b) {\r\n  out[0] = Math.min(a[0], b[0]);\r\n  out[1] = Math.min(a[1], b[1]);\r\n  out[2] = Math.min(a[2], b[2]);\r\n  out[3] = Math.min(a[3], b[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function max(out, a, b) {\r\n  out[0] = Math.max(a[0], b[0]);\r\n  out[1] = Math.max(a[1], b[1]);\r\n  out[2] = Math.max(a[2], b[2]);\r\n  out[3] = Math.max(a[3], b[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\r\nexport function round(out, a) {\r\n  out[0] = Math.round(a[0]);\r\n  out[1] = Math.round(a[1]);\r\n  out[2] = Math.round(a[2]);\r\n  out[3] = Math.round(a[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\r\nexport function scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\r\nexport function scaleAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\nexport function distance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  var w = b[3] - a[3];\r\n  return Math.sqrt(x * x + y * y + z * z + w * w);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\nexport function squaredDistance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  var w = b[3] - a[3];\r\n  return x * x + y * y + z * z + w * w;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nexport function length(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var w = a[3];\r\n  return Math.sqrt(x * x + y * y + z * z + w * w);\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\nexport function squaredLength(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var w = a[3];\r\n  return x * x + y * y + z * z + w * w;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\r\nexport function negate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = -a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\r\nexport function inverse(out, a) {\r\n  out[0] = 1.0 / a[0];\r\n  out[1] = 1.0 / a[1];\r\n  out[2] = 1.0 / a[2];\r\n  out[3] = 1.0 / a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\r\nexport function normalize(out, a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var w = a[3];\r\n  var len = x * x + y * y + z * z + w * w;\r\n  if (len > 0) {\r\n    len = 1 / Math.sqrt(len);\r\n    out[0] = x * len;\r\n    out[1] = y * len;\r\n    out[2] = z * len;\r\n    out[3] = w * len;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\nexport function dot(a, b) {\r\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\r\nexport function lerp(out, a, b, t) {\r\n  var ax = a[0];\r\n  var ay = a[1];\r\n  var az = a[2];\r\n  var aw = a[3];\r\n  out[0] = ax + t * (b[0] - ax);\r\n  out[1] = ay + t * (b[1] - ay);\r\n  out[2] = az + t * (b[2] - az);\r\n  out[3] = aw + t * (b[3] - aw);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\r\nexport function random(out, scale) {\r\n  scale = scale || 1.0;\r\n\r\n  // Marsaglia, George. Choosing a Point from the Surface of a\r\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\r\n  // http://projecteuclid.org/euclid.aoms/1177692644;\r\n  var v1, v2, v3, v4;\r\n  var s1, s2;\r\n  do {\r\n    v1 = glMatrix.RANDOM() * 2 - 1;\r\n    v2 = glMatrix.RANDOM() * 2 - 1;\r\n    s1 = v1 * v1 + v2 * v2;\r\n  } while (s1 >= 1);\r\n  do {\r\n    v3 = glMatrix.RANDOM() * 2 - 1;\r\n    v4 = glMatrix.RANDOM() * 2 - 1;\r\n    s2 = v3 * v3 + v4 * v4;\r\n  } while (s2 >= 1);\r\n\r\n  var d = Math.sqrt((1 - s1) / s2);\r\n  out[0] = scale * v1;\r\n  out[1] = scale * v2;\r\n  out[2] = scale * v3 * d;\r\n  out[3] = scale * v4 * d;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\r\nexport function transformMat4(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2],\r\n      w = a[3];\r\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\r\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\r\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\r\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\r\nexport function transformQuat(out, a, q) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3];\r\n\r\n  // calculate quat * vec\r\n  var ix = qw * x + qy * z - qz * y;\r\n  var iy = qw * y + qz * x - qx * z;\r\n  var iz = qw * z + qx * y - qy * x;\r\n  var iw = -qx * x - qy * y - qz * z;\r\n\r\n  // calculate result * inverse quat\r\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\r\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\r\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nexport function str(a) {\r\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;\r\n\r\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\r\nexport var div = divide;\r\n\r\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\r\nexport var dist = distance;\r\n\r\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\r\nexport var sqrDist = squaredDistance;\r\n\r\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\r\nexport var len = length;\r\n\r\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\nexport var forEach = function () {\r\n  var vec = create();\r\n\r\n  return function (a, stride, offset, count, fn, arg) {\r\n    var i = void 0,\r\n        l = void 0;\r\n    if (!stride) {\r\n      stride = 4;\r\n    }\r\n\r\n    if (!offset) {\r\n      offset = 0;\r\n    }\r\n\r\n    if (count) {\r\n      l = Math.min(count * stride + offset, a.length);\r\n    } else {\r\n      l = a.length;\r\n    }\r\n\r\n    for (i = offset; i < l; i += stride) {\r\n      vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];vec[3] = a[i + 3];\r\n      fn(vec, vec, arg);\r\n      a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];a[i + 3] = vec[3];\r\n    }\r\n\r\n    return a;\r\n  };\r\n}();","import * as glMatrix from \"./common.js\";\r\nimport * as mat3 from \"./mat3.js\";\r\nimport * as vec3 from \"./vec3.js\";\r\nimport * as vec4 from \"./vec4.js\";\r\n\r\n/**\r\n * Quaternion\r\n * @module quat\r\n */\r\n\r\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n  }\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\r\nexport function identity(out) {\r\n  out[0] = 0;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\r\nexport function setAxisAngle(out, axis, rad) {\r\n  rad = rad * 0.5;\r\n  var s = Math.sin(rad);\r\n  out[0] = s * axis[0];\r\n  out[1] = s * axis[1];\r\n  out[2] = s * axis[2];\r\n  out[3] = Math.cos(rad);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\r\nexport function getAxisAngle(out_axis, q) {\r\n  var rad = Math.acos(q[3]) * 2.0;\r\n  var s = Math.sin(rad / 2.0);\r\n  if (s > glMatrix.EPSILON) {\r\n    out_axis[0] = q[0] / s;\r\n    out_axis[1] = q[1] / s;\r\n    out_axis[2] = q[2] / s;\r\n  } else {\r\n    // If s is zero, return any axis (no rotation - axis does not matter)\r\n    out_axis[0] = 1;\r\n    out_axis[1] = 0;\r\n    out_axis[2] = 0;\r\n  }\r\n  return rad;\r\n}\r\n\r\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bx = b[0],\r\n      by = b[1],\r\n      bz = b[2],\r\n      bw = b[3];\r\n\r\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\r\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\r\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\r\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\nexport function rotateX(out, a, rad) {\r\n  rad *= 0.5;\r\n\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bx = Math.sin(rad),\r\n      bw = Math.cos(rad);\r\n\r\n  out[0] = ax * bw + aw * bx;\r\n  out[1] = ay * bw + az * bx;\r\n  out[2] = az * bw - ay * bx;\r\n  out[3] = aw * bw - ax * bx;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\nexport function rotateY(out, a, rad) {\r\n  rad *= 0.5;\r\n\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var by = Math.sin(rad),\r\n      bw = Math.cos(rad);\r\n\r\n  out[0] = ax * bw - az * by;\r\n  out[1] = ay * bw + aw * by;\r\n  out[2] = az * bw + ax * by;\r\n  out[3] = aw * bw - ay * by;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\nexport function rotateZ(out, a, rad) {\r\n  rad *= 0.5;\r\n\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bz = Math.sin(rad),\r\n      bw = Math.cos(rad);\r\n\r\n  out[0] = ax * bw + ay * bz;\r\n  out[1] = ay * bw - ax * bz;\r\n  out[2] = az * bw + aw * bz;\r\n  out[3] = aw * bw - az * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\r\nexport function calculateW(out, a) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\r\nexport function slerp(out, a, b, t) {\r\n  // benchmarks:\r\n  //    http://jsperf.com/quaternion-slerp-implementations\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bx = b[0],\r\n      by = b[1],\r\n      bz = b[2],\r\n      bw = b[3];\r\n\r\n  var omega = void 0,\r\n      cosom = void 0,\r\n      sinom = void 0,\r\n      scale0 = void 0,\r\n      scale1 = void 0;\r\n\r\n  // calc cosine\r\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n  // adjust signs (if necessary)\r\n  if (cosom < 0.0) {\r\n    cosom = -cosom;\r\n    bx = -bx;\r\n    by = -by;\r\n    bz = -bz;\r\n    bw = -bw;\r\n  }\r\n  // calculate coefficients\r\n  if (1.0 - cosom > glMatrix.EPSILON) {\r\n    // standard case (slerp)\r\n    omega = Math.acos(cosom);\r\n    sinom = Math.sin(omega);\r\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n    scale1 = Math.sin(t * omega) / sinom;\r\n  } else {\r\n    // \"from\" and \"to\" quaternions are very close\r\n    //  ... so we can do a linear interpolation\r\n    scale0 = 1.0 - t;\r\n    scale1 = t;\r\n  }\r\n  // calculate final values\r\n  out[0] = scale0 * ax + scale1 * bx;\r\n  out[1] = scale0 * ay + scale1 * by;\r\n  out[2] = scale0 * az + scale1 * bz;\r\n  out[3] = scale0 * aw + scale1 * bw;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\r\nexport function random(out) {\r\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\r\n  // TODO: Calling random 3 times is probably not the fastest solution\r\n  var u1 = glMatrix.RANDOM();\r\n  var u2 = glMatrix.RANDOM();\r\n  var u3 = glMatrix.RANDOM();\r\n\r\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\r\n  var sqrtU1 = Math.sqrt(u1);\r\n\r\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\r\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\r\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\r\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\r\nexport function invert(out, a) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\r\n  var invDot = dot ? 1.0 / dot : 0;\r\n\r\n  // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\r\n\r\n  out[0] = -a0 * invDot;\r\n  out[1] = -a1 * invDot;\r\n  out[2] = -a2 * invDot;\r\n  out[3] = a3 * invDot;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\r\nexport function conjugate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport function fromMat3(out, m) {\r\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\r\n  // article \"Quaternion Calculus and Fast Animation\".\r\n  var fTrace = m[0] + m[4] + m[8];\r\n  var fRoot = void 0;\r\n\r\n  if (fTrace > 0.0) {\r\n    // |w| > 1/2, may as well choose w > 1/2\r\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\r\n    out[3] = 0.5 * fRoot;\r\n    fRoot = 0.5 / fRoot; // 1/(4w)\r\n    out[0] = (m[5] - m[7]) * fRoot;\r\n    out[1] = (m[6] - m[2]) * fRoot;\r\n    out[2] = (m[1] - m[3]) * fRoot;\r\n  } else {\r\n    // |w| <= 1/2\r\n    var i = 0;\r\n    if (m[4] > m[0]) i = 1;\r\n    if (m[8] > m[i * 3 + i]) i = 2;\r\n    var j = (i + 1) % 3;\r\n    var k = (i + 2) % 3;\r\n\r\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\r\n    out[i] = 0.5 * fRoot;\r\n    fRoot = 0.5 / fRoot;\r\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\r\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\r\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport function fromEuler(out, x, y, z) {\r\n  var halfToRad = 0.5 * Math.PI / 180.0;\r\n  x *= halfToRad;\r\n  y *= halfToRad;\r\n  z *= halfToRad;\r\n\r\n  var sx = Math.sin(x);\r\n  var cx = Math.cos(x);\r\n  var sy = Math.sin(y);\r\n  var cy = Math.cos(y);\r\n  var sz = Math.sin(z);\r\n  var cz = Math.cos(z);\r\n\r\n  out[0] = sx * cy * cz - cx * sy * sz;\r\n  out[1] = cx * sy * cz + sx * cy * sz;\r\n  out[2] = cx * cy * sz - sx * sy * cz;\r\n  out[3] = cx * cy * cz + sx * sy * sz;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nexport function str(a) {\r\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\r\n}\r\n\r\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\r\nexport var clone = vec4.clone;\r\n\r\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\r\nexport var fromValues = vec4.fromValues;\r\n\r\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var copy = vec4.copy;\r\n\r\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var set = vec4.set;\r\n\r\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var add = vec4.add;\r\n\r\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var scale = vec4.scale;\r\n\r\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\r\nexport var dot = vec4.dot;\r\n\r\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var lerp = vec4.lerp;\r\n\r\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nexport var length = vec4.length;\r\n\r\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\r\nexport var len = length;\r\n\r\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\r\nexport var squaredLength = vec4.squaredLength;\r\n\r\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var normalize = vec4.normalize;\r\n\r\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport var exactEquals = vec4.exactEquals;\r\n\r\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport var equals = vec4.equals;\r\n\r\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\r\nexport var rotationTo = function () {\r\n  var tmpvec3 = vec3.create();\r\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\r\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\r\n\r\n  return function (out, a, b) {\r\n    var dot = vec3.dot(a, b);\r\n    if (dot < -0.999999) {\r\n      vec3.cross(tmpvec3, xUnitVec3, a);\r\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\r\n      vec3.normalize(tmpvec3, tmpvec3);\r\n      setAxisAngle(out, tmpvec3, Math.PI);\r\n      return out;\r\n    } else if (dot > 0.999999) {\r\n      out[0] = 0;\r\n      out[1] = 0;\r\n      out[2] = 0;\r\n      out[3] = 1;\r\n      return out;\r\n    } else {\r\n      vec3.cross(tmpvec3, a, b);\r\n      out[0] = tmpvec3[0];\r\n      out[1] = tmpvec3[1];\r\n      out[2] = tmpvec3[2];\r\n      out[3] = 1 + dot;\r\n      return normalize(out, out);\r\n    }\r\n  };\r\n}();\r\n\r\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\r\nexport var sqlerp = function () {\r\n  var temp1 = create();\r\n  var temp2 = create();\r\n\r\n  return function (out, a, b, c, d, t) {\r\n    slerp(temp1, a, d, t);\r\n    slerp(temp2, b, c, t);\r\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\r\n\r\n    return out;\r\n  };\r\n}();\r\n\r\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\r\nexport var setAxes = function () {\r\n  var matr = mat3.create();\r\n\r\n  return function (out, view, right, up) {\r\n    matr[0] = right[0];\r\n    matr[3] = right[1];\r\n    matr[6] = right[2];\r\n\r\n    matr[1] = up[0];\r\n    matr[4] = up[1];\r\n    matr[7] = up[2];\r\n\r\n    matr[2] = -view[0];\r\n    matr[5] = -view[1];\r\n    matr[8] = -view[2];\r\n\r\n    return normalize(out, fromMat3(out, matr));\r\n  };\r\n}();","import * as glMatrix from \"./common.js\";\r\nimport * as quat from \"./quat.js\";\r\nimport * as mat4 from \"./mat4.js\";\r\n\r\n/**\r\n * Dual Quaternion<br>\r\n * Format: [real, dual]<br>\r\n * Quaternion format: XYZW<br>\r\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\r\n * @module quat2\r\n */\r\n\r\n/**\r\n * Creates a new identity dual quat\r\n *\r\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\r\n */\r\nexport function create() {\r\n  var dq = new glMatrix.ARRAY_TYPE(8);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    dq[0] = 0;\r\n    dq[1] = 0;\r\n    dq[2] = 0;\r\n    dq[4] = 0;\r\n    dq[5] = 0;\r\n    dq[6] = 0;\r\n    dq[7] = 0;\r\n  }\r\n  dq[3] = 1;\r\n  return dq;\r\n}\r\n\r\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat2} a dual quaternion to clone\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\r\nexport function clone(a) {\r\n  var dq = new glMatrix.ARRAY_TYPE(8);\r\n  dq[0] = a[0];\r\n  dq[1] = a[1];\r\n  dq[2] = a[2];\r\n  dq[3] = a[3];\r\n  dq[4] = a[4];\r\n  dq[5] = a[5];\r\n  dq[6] = a[6];\r\n  dq[7] = a[7];\r\n  return dq;\r\n}\r\n\r\n/**\r\n * Creates a new dual quat initialized with the given values\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\r\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\r\n  var dq = new glMatrix.ARRAY_TYPE(8);\r\n  dq[0] = x1;\r\n  dq[1] = y1;\r\n  dq[2] = z1;\r\n  dq[3] = w1;\r\n  dq[4] = x2;\r\n  dq[5] = y2;\r\n  dq[6] = z2;\r\n  dq[7] = w2;\r\n  return dq;\r\n}\r\n\r\n/**\r\n * Creates a new dual quat from the given values (quat and translation)\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component (translation)\r\n * @param {Number} y2 Y component (translation)\r\n * @param {Number} z2 Z component (translation)\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\r\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\r\n  var dq = new glMatrix.ARRAY_TYPE(8);\r\n  dq[0] = x1;\r\n  dq[1] = y1;\r\n  dq[2] = z1;\r\n  dq[3] = w1;\r\n  var ax = x2 * 0.5,\r\n      ay = y2 * 0.5,\r\n      az = z2 * 0.5;\r\n  dq[4] = ax * w1 + ay * z1 - az * y1;\r\n  dq[5] = ay * w1 + az * x1 - ax * z1;\r\n  dq[6] = az * w1 + ax * y1 - ay * x1;\r\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\r\n  return dq;\r\n}\r\n\r\n/**\r\n * Creates a dual quat from a quaternion and a translation\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {quat} q quaternion\r\n * @param {vec3} t tranlation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\r\nexport function fromRotationTranslation(out, q, t) {\r\n  var ax = t[0] * 0.5,\r\n      ay = t[1] * 0.5,\r\n      az = t[2] * 0.5,\r\n      bx = q[0],\r\n      by = q[1],\r\n      bz = q[2],\r\n      bw = q[3];\r\n  out[0] = bx;\r\n  out[1] = by;\r\n  out[2] = bz;\r\n  out[3] = bw;\r\n  out[4] = ax * bw + ay * bz - az * by;\r\n  out[5] = ay * bw + az * bx - ax * bz;\r\n  out[6] = az * bw + ax * by - ay * bx;\r\n  out[7] = -ax * bx - ay * by - az * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a dual quat from a translation\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {vec3} t translation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\r\nexport function fromTranslation(out, t) {\r\n  out[0] = 0;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  out[4] = t[0] * 0.5;\r\n  out[5] = t[1] * 0.5;\r\n  out[6] = t[2] * 0.5;\r\n  out[7] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a dual quat from a quaternion\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {quat} q the quaternion\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\r\nexport function fromRotation(out, q) {\r\n  out[0] = q[0];\r\n  out[1] = q[1];\r\n  out[2] = q[2];\r\n  out[3] = q[3];\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new dual quat from a matrix (4x4)\r\n *\r\n * @param {quat2} out the dual quaternion\r\n * @param {mat4} a the matrix\r\n * @returns {quat2} dual quat receiving operation result\r\n * @function\r\n */\r\nexport function fromMat4(out, a) {\r\n  //TODO Optimize this\r\n  var outer = quat.create();\r\n  mat4.getRotation(outer, a);\r\n  var t = new glMatrix.ARRAY_TYPE(3);\r\n  mat4.getTranslation(t, a);\r\n  fromRotationTranslation(out, outer, t);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one dual quat to another\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the source dual quaternion\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a dual quat to the identity dual quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @returns {quat2} out\r\n */\r\nexport function identity(out) {\r\n  out[0] = 0;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a dual quat to the given values\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\r\n  out[0] = x1;\r\n  out[1] = y1;\r\n  out[2] = z1;\r\n  out[3] = w1;\r\n\r\n  out[4] = x2;\r\n  out[5] = y2;\r\n  out[6] = z2;\r\n  out[7] = w2;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Gets the real part of a dual quat\r\n * @param  {quat} out real part\r\n * @param  {quat2} a Dual Quaternion\r\n * @return {quat} real part\r\n */\r\nexport var getReal = quat.copy;\r\n\r\n/**\r\n * Gets the dual part of a dual quat\r\n * @param  {quat} out dual part\r\n * @param  {quat2} a Dual Quaternion\r\n * @return {quat} dual part\r\n */\r\nexport function getDual(out, a) {\r\n  out[0] = a[4];\r\n  out[1] = a[5];\r\n  out[2] = a[6];\r\n  out[3] = a[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the real component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat} q a quaternion representing the real part\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nexport var setReal = quat.copy;\r\n\r\n/**\r\n * Set the dual component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat} q a quaternion representing the dual part\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nexport function setDual(out, q) {\r\n  out[4] = q[0];\r\n  out[5] = q[1];\r\n  out[6] = q[2];\r\n  out[7] = q[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Gets the translation of a normalized dual quat\r\n * @param  {vec3} out translation\r\n * @param  {quat2} a Dual Quaternion to be decomposed\r\n * @return {vec3} translation\r\n */\r\nexport function getTranslation(out, a) {\r\n  var ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7],\r\n      bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3];\r\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\r\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\r\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translates a dual quat by the given vector\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {quat2} out\r\n */\r\nexport function translate(out, a, v) {\r\n  var ax1 = a[0],\r\n      ay1 = a[1],\r\n      az1 = a[2],\r\n      aw1 = a[3],\r\n      bx1 = v[0] * 0.5,\r\n      by1 = v[1] * 0.5,\r\n      bz1 = v[2] * 0.5,\r\n      ax2 = a[4],\r\n      ay2 = a[5],\r\n      az2 = a[6],\r\n      aw2 = a[7];\r\n  out[0] = ax1;\r\n  out[1] = ay1;\r\n  out[2] = az1;\r\n  out[3] = aw1;\r\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\r\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\r\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\r\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around the X axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\r\nexport function rotateX(out, a, rad) {\r\n  var bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3],\r\n      ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7],\r\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\r\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\r\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\r\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\r\n  quat.rotateX(out, a, rad);\r\n  bx = out[0];\r\n  by = out[1];\r\n  bz = out[2];\r\n  bw = out[3];\r\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around the Y axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\r\nexport function rotateY(out, a, rad) {\r\n  var bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3],\r\n      ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7],\r\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\r\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\r\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\r\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\r\n  quat.rotateY(out, a, rad);\r\n  bx = out[0];\r\n  by = out[1];\r\n  bz = out[2];\r\n  bw = out[3];\r\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around the Z axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\r\nexport function rotateZ(out, a, rad) {\r\n  var bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3],\r\n      ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7],\r\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\r\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\r\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\r\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\r\n  quat.rotateZ(out, a, rad);\r\n  bx = out[0];\r\n  by = out[1];\r\n  bz = out[2];\r\n  bw = out[3];\r\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat by a given quaternion (a * q)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {quat} q quaternion to rotate by\r\n * @returns {quat2} out\r\n */\r\nexport function rotateByQuatAppend(out, a, q) {\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3],\r\n      ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n\r\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\r\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\r\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\r\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\r\n  ax = a[4];\r\n  ay = a[5];\r\n  az = a[6];\r\n  aw = a[7];\r\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\r\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\r\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\r\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat by a given quaternion (q * a)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat} q quaternion to rotate by\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @returns {quat2} out\r\n */\r\nexport function rotateByQuatPrepend(out, q, a) {\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3],\r\n      bx = a[0],\r\n      by = a[1],\r\n      bz = a[2],\r\n      bw = a[3];\r\n\r\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\r\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\r\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\r\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\r\n  bx = a[4];\r\n  by = a[5];\r\n  bz = a[6];\r\n  bw = a[7];\r\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\r\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\r\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\r\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around a given axis. Does the normalisation automatically\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {vec3} axis the axis to rotate around\r\n * @param {Number} rad how far the rotation should be\r\n * @returns {quat2} out\r\n */\r\nexport function rotateAroundAxis(out, a, axis, rad) {\r\n  //Special case for rad = 0\r\n  if (Math.abs(rad) < glMatrix.EPSILON) {\r\n    return copy(out, a);\r\n  }\r\n  var axisLength = Math.sqrt(axis[0] * axis[0] + axis[1] * axis[1] + axis[2] * axis[2]);\r\n\r\n  rad = rad * 0.5;\r\n  var s = Math.sin(rad);\r\n  var bx = s * axis[0] / axisLength;\r\n  var by = s * axis[1] / axisLength;\r\n  var bz = s * axis[2] / axisLength;\r\n  var bw = Math.cos(rad);\r\n\r\n  var ax1 = a[0],\r\n      ay1 = a[1],\r\n      az1 = a[2],\r\n      aw1 = a[3];\r\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n\r\n  var ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7];\r\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\r\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\r\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\r\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  out[6] = a[6] + b[6];\r\n  out[7] = a[7] + b[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {quat2} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  var ax0 = a[0],\r\n      ay0 = a[1],\r\n      az0 = a[2],\r\n      aw0 = a[3],\r\n      bx1 = b[4],\r\n      by1 = b[5],\r\n      bz1 = b[6],\r\n      bw1 = b[7],\r\n      ax1 = a[4],\r\n      ay1 = a[5],\r\n      az1 = a[6],\r\n      aw1 = a[7],\r\n      bx0 = b[0],\r\n      by0 = b[1],\r\n      bz0 = b[2],\r\n      bw0 = b[3];\r\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\r\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\r\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\r\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\r\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\r\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\r\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\r\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Alias for {@link quat2.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Scales a dual quat by a scalar number\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {quat2} a the dual quat to scale\r\n * @param {Number} b amount to scale the dual quat by\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nexport function scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  out[6] = a[6] * b;\r\n  out[7] = a[7] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\r\n *\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\r\nexport var dot = quat.dot;\r\n\r\n/**\r\n * Performs a linear interpolation between two dual quats's\r\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat2} out\r\n */\r\nexport function lerp(out, a, b, t) {\r\n  var mt = 1 - t;\r\n  if (dot(a, b) < 0) t = -t;\r\n\r\n  out[0] = a[0] * mt + b[0] * t;\r\n  out[1] = a[1] * mt + b[1] * t;\r\n  out[2] = a[2] * mt + b[2] * t;\r\n  out[3] = a[3] * mt + b[3] * t;\r\n  out[4] = a[4] * mt + b[4] * t;\r\n  out[5] = a[5] * mt + b[5] * t;\r\n  out[6] = a[6] * mt + b[6] * t;\r\n  out[7] = a[7] * mt + b[7] * t;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a dual quat to calculate inverse of\r\n * @returns {quat2} out\r\n */\r\nexport function invert(out, a) {\r\n  var sqlen = squaredLength(a);\r\n  out[0] = -a[0] / sqlen;\r\n  out[1] = -a[1] / sqlen;\r\n  out[2] = -a[2] / sqlen;\r\n  out[3] = a[3] / sqlen;\r\n  out[4] = -a[4] / sqlen;\r\n  out[5] = -a[5] / sqlen;\r\n  out[6] = -a[6] / sqlen;\r\n  out[7] = a[7] / sqlen;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the conjugate of a dual quat\r\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat2} a quat to calculate conjugate of\r\n * @returns {quat2} out\r\n */\r\nexport function conjugate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = a[3];\r\n  out[4] = -a[4];\r\n  out[5] = -a[5];\r\n  out[6] = -a[6];\r\n  out[7] = a[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the length of a dual quat\r\n *\r\n * @param {quat2} a dual quat to calculate length of\r\n * @returns {Number} length of a\r\n * @function\r\n */\r\nexport var length = quat.length;\r\n\r\n/**\r\n * Alias for {@link quat2.length}\r\n * @function\r\n */\r\nexport var len = length;\r\n\r\n/**\r\n * Calculates the squared length of a dual quat\r\n *\r\n * @param {quat2} a dual quat to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\r\nexport var squaredLength = quat.squaredLength;\r\n\r\n/**\r\n * Alias for {@link quat2.squaredLength}\r\n * @function\r\n */\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Normalize a dual quat\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a dual quaternion to normalize\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nexport function normalize(out, a) {\r\n  var magnitude = squaredLength(a);\r\n  if (magnitude > 0) {\r\n    magnitude = Math.sqrt(magnitude);\r\n\r\n    var a0 = a[0] / magnitude;\r\n    var a1 = a[1] / magnitude;\r\n    var a2 = a[2] / magnitude;\r\n    var a3 = a[3] / magnitude;\r\n\r\n    var b0 = a[4];\r\n    var b1 = a[5];\r\n    var b2 = a[6];\r\n    var b3 = a[7];\r\n\r\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\r\n\r\n    out[0] = a0;\r\n    out[1] = a1;\r\n    out[2] = a2;\r\n    out[3] = a3;\r\n\r\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\r\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\r\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\r\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a dual quatenion\r\n *\r\n * @param {quat2} a dual quaternion to represent as a string\r\n * @returns {String} string representation of the dual quat\r\n */\r\nexport function str(a) {\r\n  return 'quat2(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ')';\r\n}\r\n\r\n/**\r\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat2} a the first dual quaternion.\r\n * @param {quat2} b the second dual quaternion.\r\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\r\n}\r\n\r\n/**\r\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat2} a the first dual quat.\r\n * @param {quat2} b the second dual quat.\r\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5],\r\n      a6 = a[6],\r\n      a7 = a[7];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3],\r\n      b4 = b[4],\r\n      b5 = b[5],\r\n      b6 = b[6],\r\n      b7 = b[7];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\r\n}","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\r\n\r\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(2);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(2);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\r\nexport function fromValues(x, y) {\r\n  var out = new glMatrix.ARRAY_TYPE(2);\r\n  out[0] = x;\r\n  out[1] = y;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\r\nexport function set(out, x, y) {\r\n  out[0] = x;\r\n  out[1] = y;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  out[0] = a[0] * b[0];\r\n  out[1] = a[1] * b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function divide(out, a, b) {\r\n  out[0] = a[0] / b[0];\r\n  out[1] = a[1] / b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\r\nexport function ceil(out, a) {\r\n  out[0] = Math.ceil(a[0]);\r\n  out[1] = Math.ceil(a[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\r\nexport function floor(out, a) {\r\n  out[0] = Math.floor(a[0]);\r\n  out[1] = Math.floor(a[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function min(out, a, b) {\r\n  out[0] = Math.min(a[0], b[0]);\r\n  out[1] = Math.min(a[1], b[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function max(out, a, b) {\r\n  out[0] = Math.max(a[0], b[0]);\r\n  out[1] = Math.max(a[1], b[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\r\nexport function round(out, a) {\r\n  out[0] = Math.round(a[0]);\r\n  out[1] = Math.round(a[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\r\nexport function scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\r\nexport function scaleAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\nexport function distance(a, b) {\r\n  var x = b[0] - a[0],\r\n      y = b[1] - a[1];\r\n  return Math.sqrt(x * x + y * y);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\nexport function squaredDistance(a, b) {\r\n  var x = b[0] - a[0],\r\n      y = b[1] - a[1];\r\n  return x * x + y * y;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nexport function length(a) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  return Math.sqrt(x * x + y * y);\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\nexport function squaredLength(a) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  return x * x + y * y;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\r\nexport function negate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\r\nexport function inverse(out, a) {\r\n  out[0] = 1.0 / a[0];\r\n  out[1] = 1.0 / a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\r\nexport function normalize(out, a) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  var len = x * x + y * y;\r\n  if (len > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len = 1 / Math.sqrt(len);\r\n    out[0] = a[0] * len;\r\n    out[1] = a[1] * len;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\nexport function dot(a, b) {\r\n  return a[0] * b[0] + a[1] * b[1];\r\n}\r\n\r\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function cross(out, a, b) {\r\n  var z = a[0] * b[1] - a[1] * b[0];\r\n  out[0] = out[1] = 0;\r\n  out[2] = z;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\r\nexport function lerp(out, a, b, t) {\r\n  var ax = a[0],\r\n      ay = a[1];\r\n  out[0] = ax + t * (b[0] - ax);\r\n  out[1] = ay + t * (b[1] - ay);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\r\nexport function random(out, scale) {\r\n  scale = scale || 1.0;\r\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\r\n  out[0] = Math.cos(r) * scale;\r\n  out[1] = Math.sin(r) * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nexport function transformMat2(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  out[0] = m[0] * x + m[2] * y;\r\n  out[1] = m[1] * x + m[3] * y;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nexport function transformMat2d(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  out[0] = m[0] * x + m[2] * y + m[4];\r\n  out[1] = m[1] * x + m[3] * y + m[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nexport function transformMat3(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  out[0] = m[0] * x + m[3] * y + m[6];\r\n  out[1] = m[1] * x + m[4] * y + m[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nexport function transformMat4(out, a, m) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  out[0] = m[0] * x + m[4] * y + m[12];\r\n  out[1] = m[1] * x + m[5] * y + m[13];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\r\nexport function rotate(out, a, b, c) {\r\n  //Translate point to the origin\r\n  var p0 = a[0] - b[0],\r\n      p1 = a[1] - b[1],\r\n      sinC = Math.sin(c),\r\n      cosC = Math.cos(c);\r\n\r\n  //perform rotation and translate to correct position\r\n  out[0] = p0 * cosC - p1 * sinC + b[0];\r\n  out[1] = p0 * sinC + p1 * cosC + b[1];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\r\nexport function angle(a, b) {\r\n  var x1 = a[0],\r\n      y1 = a[1],\r\n      x2 = b[0],\r\n      y2 = b[1];\r\n\r\n  var len1 = x1 * x1 + y1 * y1;\r\n  if (len1 > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len1 = 1 / Math.sqrt(len1);\r\n  }\r\n\r\n  var len2 = x2 * x2 + y2 * y2;\r\n  if (len2 > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len2 = 1 / Math.sqrt(len2);\r\n  }\r\n\r\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\r\n\r\n  if (cosine > 1.0) {\r\n    return 0;\r\n  } else if (cosine < -1.0) {\r\n    return Math.PI;\r\n  } else {\r\n    return Math.acos(cosine);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nexport function str(a) {\r\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1];\r\n  var b0 = b[0],\r\n      b1 = b[1];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\r\nexport var len = length;\r\n\r\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;\r\n\r\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\r\nexport var div = divide;\r\n\r\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\r\nexport var dist = distance;\r\n\r\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\r\nexport var sqrDist = squaredDistance;\r\n\r\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\nexport var forEach = function () {\r\n  var vec = create();\r\n\r\n  return function (a, stride, offset, count, fn, arg) {\r\n    var i = void 0,\r\n        l = void 0;\r\n    if (!stride) {\r\n      stride = 2;\r\n    }\r\n\r\n    if (!offset) {\r\n      offset = 0;\r\n    }\r\n\r\n    if (count) {\r\n      l = Math.min(count * stride + offset, a.length);\r\n    } else {\r\n      l = a.length;\r\n    }\r\n\r\n    for (i = offset; i < l; i += stride) {\r\n      vec[0] = a[i];vec[1] = a[i + 1];\r\n      fn(vec, vec, arg);\r\n      a[i] = vec[0];a[i + 1] = vec[1];\r\n    }\r\n\r\n    return a;\r\n  };\r\n}();","import * as glMatrix from \"./gl-matrix/common.js\";\r\nimport * as mat2 from \"./gl-matrix/mat2.js\";\r\nimport * as mat2d from \"./gl-matrix/mat2d.js\";\r\nimport * as mat3 from \"./gl-matrix/mat3.js\";\r\nimport * as mat4 from \"./gl-matrix/mat4.js\";\r\nimport * as quat from \"./gl-matrix/quat.js\";\r\nimport * as quat2 from \"./gl-matrix/quat2.js\";\r\nimport * as vec2 from \"./gl-matrix/vec2.js\";\r\nimport * as vec3 from \"./gl-matrix/vec3.js\";\r\nimport * as vec4 from \"./gl-matrix/vec4.js\";\r\n\r\nexport { glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 };"],"sourceRoot":""}